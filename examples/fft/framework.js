(function(FuseBox){FuseBox.$fuse$=FuseBox,FuseBox.pkg("nerdy-app",{},function(___scope___){var _Mathsqrt=Math.sqrt;var _Mathabs=Math.abs;var _Mathround=Math.round;var _Mathmin=Math.min;var _MathPI=Math.PI;var _Mathmax=Math.max;return ___scope___.file("app/index.js",function(exports,require,module,__filename,__dirname){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const framework_1=require("../framework");const nerdy_utils_1=require("~/modules/nerdy-utils");nerdy_utils_1.$entry(__filename||"nerdy-elements/components/nerdy-element.tsx",{FuseBox:"undefined"==typeof FuseBox?void 0:FuseBox,Framework:framework_1.default});const app_1=require("./app");const app=new app_1.default}),___scope___.file("framework/index.js",function(exports,require,module,__filename,__dirname){"use strict";function __export(m){for(var p in m)exports.hasOwnProperty(p)||(exports[p]=m[p])}Object.defineProperty(exports,"__esModule",{value:!0}),__export(require("./framework"));const Framework=require("./framework");exports.default=Framework}),___scope___.file("framework/framework.js",function(exports,require,module,__filename,__dirname){"use strict";function __export(m){for(var p in m)exports.hasOwnProperty(p)||(exports[p]=m[p])}function backend(callback){Utils.isBackend&&callback()}function frontend(callback){Utils.isFrontend&&callback()}Object.defineProperty(exports,"__esModule",{value:!0});const Elements=require("~/modules/nerdy-elements");exports.Elements=Elements;const App=require("~/modules/nerdy-app");exports.App=App;const Utils=require("~/modules/nerdy-utils");exports.Utils=Utils;var nerdy_app_1=require("~/modules/nerdy-app");exports.NerdyApp=nerdy_app_1.NerdyApp;var nerdy_elements_1=require("~/modules/nerdy-elements");exports.Components=nerdy_elements_1.Components,__export(require("~/modules/nerdy-elements")),__export(require("~/modules/nerdy-utils")),exports.backend=backend,exports.frontend=frontend}),___scope___.file("modules/nerdy-elements/index.js",function(exports,require,module,__filename,__dirname){"use strict";function __export(m){for(var p in m)exports.hasOwnProperty(p)||(exports[p]=m[p])}Object.defineProperty(exports,"__esModule",{value:!0}),__export(require("./core"));var core_1=require("./core");exports.default=core_1.default;var nerdy_element_1=require("./components/nerdy-element");exports.NerdyElement=nerdy_element_1.NerdyElement;var polymer_element_1=require("./components/polymer-element");exports.PolymerElement=polymer_element_1.default;var style_element_1=require("./components/style-element");exports.StyleElement=style_element_1.default;const Styles=require("./styles");exports.Styles=Styles;const Polymer=require("./polymer");exports.Polymer=Polymer;var styles_1=require("./styles");exports.StylesObject=styles_1.StylesObject,exports.style=styles_1.style,exports.styling=styles_1.styling}),___scope___.file("modules/nerdy-elements/core/index.js",function(exports,require,module,__filename,__dirname){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var nerdy_elements_1=require("./nerdy-elements");exports.default=nerdy_elements_1.default,exports.Components=nerdy_elements_1.default,exports.CustomElement=nerdy_elements_1.CustomElement,exports.TemplateFactory=nerdy_elements_1.TemplateFactory,exports.BindingHandler=nerdy_elements_1.BindingHandler,exports.NerdyBindingHandler=nerdy_elements_1.NerdyBindingHandler,exports.BindingProxy=nerdy_elements_1.BindingProxy,exports.utils=nerdy_elements_1.utils,exports.HTMLElement=nerdy_elements_1.HTMLElement,exports.createElement=nerdy_elements_1.createElement}),___scope___.file("modules/nerdy-elements/core/nerdy-elements.js",function(exports,require,module,__filename,__dirname){"use strict";function __export(m){for(var p in m)exports.hasOwnProperty(p)||(exports[p]=m[p])}Object.defineProperty(exports,"__esModule",{value:!0});const utils=require("./helpers");exports.utils=utils;const elements_registry_1=require("./elements-registry");exports.registry=new elements_registry_1.default,exports.createElement=exports.registry.createElement,__export(require("./helpers")),__export(require("./decorators")),__export(require("./elements-registry")),__export(require("./elements-factory")),__export(require("./templates-factory")),__export(require("./native-elements")),exports.default=exports.registry}),___scope___.file("modules/nerdy-elements/core/helpers.js",function(exports,require,module,__filename,__dirname){"use strict";function call(callable){if(1<arguments.length){let[target,method,...args]=arguments;return exports.isString(method)&&exports.isFunction((target||{})[method])?[(target||{})[method](...args)]:!!exports.isFunction(method)&&[method.call(arguments[0]||null,...args)]}return!!exports.isFunction(callable)&&[callable()]}function defer(callback){return exports.isFunction(requestAnimationFrame)?requestAnimationFrame(callback):setTimeout(callback,0)}Object.defineProperty(exports,"__esModule",{value:!0});var nerdy_utils_1=require("~/modules/nerdy-utils");exports.isBrowser=nerdy_utils_1.isBrowser,exports.typeCheck=(reference,type)=>exports.isString(type)?"null"===type?reference===type:typeof reference==type:exports.isFunction(type)?reference instanceof type:call(type,"test",reference),exports.isCustomTagName=reference=>/^\w+\-\w+(\-\w+)*$/.test(`${reference||""}`)||null,exports.isElement=reference=>(reference||null)instanceof HTMLElement||null,exports.isFunction=reference=>"function"==typeof reference||null,exports.isString=reference=>"string"==typeof reference||null,exports.isTemplateElement=reference=>reference&&"object"==typeof reference&&"content"in reference&&reference instanceof HTMLTemplateElement||null,exports.isTemplateFactory=reference=>exports.isFunction(reference)||null,exports.call=call,exports.defer=defer}),___scope___.file("modules/nerdy-utils/index.js",function(exports,require,module,__filename,__dirname){"use strict";function __export(m){for(var p in m)exports.hasOwnProperty(p)||(exports[p]=m[p])}Object.defineProperty(exports,"__esModule",{value:!0}),__export(require("./reflect-metadata")),__export(require("./type-checker")),__export(require("./type-cast")),__export(require("./object-array")),__export(require("./global-scope")),__export(require("./bound-reflection")),__export(require("./specs")),__export(require("./styles")),__export(require("./path")),__export(require("./uri")),__export(require("./generators")),__export(require("./math"));var traces_1=require("./traces");exports.$traces=traces_1.main,exports.$entry=traces_1.entry;const global_scope_1=require("./global-scope");const main="function"==typeof require&&require.main||void 0;exports.$require=function $require(id,parent=this){return"undefined"!=typeof parent&&parent.require?parent.require(id):"undefined"!=typeof global_scope_1.default&&global_scope_1.default.require?global_scope_1.default.require(id):eval(`require('${id}')`)}.bind(main||module)}),___scope___.file("modules/nerdy-utils/reflect-metadata.js",function(exports,require,module,__filename,__dirname){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),require("reflect-metadata");const reflect=Reflect;exports.Reflect=reflect,exports.default=reflect}),___scope___.file("modules/nerdy-utils/type-checker.js",function(exports,require,module,__filename,__dirname){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const supportsSymbol="function"==typeof Symbol&&"symbol"==typeof Symbol("");class TypeChecker{constructor(){return TypeChecker}static isUndefined(reference){return void 0===reference}static isNull(reference){return null===reference}static isString(reference){return"string"==typeof reference}static isNumber(reference){return"number"==typeof reference}static isBoolean(reference){return!0===reference||!1===reference}static isSymbol(reference){return reference&&"symbol"==typeof reference}static isFunction(reference){return reference&&"function"==typeof reference}static isObject(reference){return reference&&"object"==typeof reference}static isObjectLike(reference){return reference&&"object"==typeof reference||"function"==typeof reference}static isObjectLiteral(reference){return reference&&TypeChecker.isObject(reference)&&Object.getPrototypeOf(reference)===Object.prototype}static isArray(reference){return reference&&"object"==typeof reference&&Array.isArray(reference)}}TypeChecker.supportsSymbol="function"==typeof Symbol&&"symbol"==typeof Symbol(""),exports.TypeChecker=TypeChecker;const{isUndefined,isNull,isString,isNumber,isBoolean,isSymbol,isFunction,isObject,isObjectLike,isObjectLiteral,isArray}=TypeChecker;exports.isUndefined=isUndefined,exports.isNull=isNull,exports.isString=isString,exports.isNumber=isNumber,exports.isBoolean=isBoolean,exports.isSymbol=isSymbol,exports.isFunction=isFunction,exports.isObject=isObject,exports.isObjectLike=isObjectLike,exports.isObjectLiteral=isObjectLiteral,exports.isArray=isArray,exports.default=TypeChecker}),___scope___.file("modules/nerdy-utils/type-cast.js",function(exports,require,module,__filename,__dirname){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.map=(object,mapper)=>(Array.isArray(object)?object:Object.values(object)).map(mapper),exports.reduce=(object,reducer,initialValue)=>(reducer.keys=!Array.isArray(object)&&Object.keys(object)||[],(Array.isArray(object)?object:Object.values(object)).reduce((result,value,index)=>reducer(result,value,reducer.keys[index]||index,object),initialValue))}),___scope___.file("modules/nerdy-utils/object-array.js",function(exports,require,module,__filename,__dirname){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.OBJECT=Symbol("[[OBJECT]]"),exports.ARRAY=Symbol("[[ARRAY]]"),exports.OBJECTARRAY=Symbol("[[OBJECTARRAY]]"),exports.ITERATOR=Symbol.iterator||Symbol("[[ITERATOR]]"),exports.UNSCOPABLES=Symbol.unscopables||Symbol("[[UNSCOPABLES]]"),exports.HANDLER=Symbol("[[HANDLER]]");const{keys:keysOf,values:valuesOf}=Object;const hasOwn=(object,property)=>Object.prototype.hasOwnProperty.call(object,property);const preferSync=({appVersion:version}=navigator)=>/Chrome/.test(version)?55>(/(Chrome)\/(\d+)/.exec(version)||[]).pop():!/Safari/.test(version)||604>(/(Safari)\/(\d+)/.exec(version)||[]).pop();class ObjectArray extends Array{constructor(object){if(Array.isArray(object=object[exports.OBJECT]||object||{}))throw TypeError("ObjectArrays cannot be constructed from Array objects.");const instance=super(...valuesOf(object));let array=instance[exports.ARRAY]=Array.from(instance);const{prototype,reserved,unsupported,scoped,inherited,reflected}=ObjectArray;const properties={constructor:ObjectArray,[exports.UNSCOPABLES]:[].concat(object[exports.UNSCOPABLES],array[exports.UNSCOPABLES]),get[exports.ITERATOR](){return array[exports.ITERATOR]},get[exports.OBJECT](){return instance[exports.OBJECT]},set[exports.OBJECT](object){instance[exports.OBJECT]=object},get[exports.OBJECTARRAY](){return instance[exports.OBJECTARRAY]},set[exports.OBJECTARRAY](objectArray){objectArray[exports.OBJECTARRAY]=objectArray},get[exports.ARRAY](){return instance[exports.ARRAY]},set[exports.ARRAY](array){instance[exports.ARRAY]=array},get length(){return array.length}};properties[exports.OBJECT]=object,properties[exports.OBJECTARRAY]=instance;const updateSync=()=>{Array.prototype.splice.call(properties[exports.ARRAY]=array=valuesOf(object),0,instance.length,...array)};const update=preferSync?updateSync:async()=>updateSync();const unsupportedMethod=()=>{throw ReferenceError(`Cannot modify a read-only array.`)};const methodFor=property=>properties[property]||(properties[property]=-1<unsupported.indexOf(property)?unsupportedMethod:hasOwn(prototype,property)&&"function"==typeof prototype[property]?(...args)=>prototype[property].call(instance,...args):(...args)=>instance[property].call(array,...args));const handler={ownKeys:target=>["length"].concat(Reflect.ownKeys(target),Reflect.ownKeys(object)),getOwnPropertyDescriptor:(target,property)=>Object.getOwnPropertyDescriptor(object,property)||Object.getOwnPropertyDescriptor(array,property),get:(target,property)=>property in properties?properties[property]:property in target?target[property]:"symbol"==typeof property?property in instance?instance[property]:object[property]:isNaN(property)?"function"==typeof instance[property]?methodFor(property):object[property]:0>property?array[array.length+ +property]:array[property],set:(target,property,value)=>{if(property in target)return Reflect.set(target,property,value);const propertyType=typeof property;const readonly=-1<reserved.indexOf(property)||"symbol"!=propertyType&&!isNaN(property);if(readonly)return!0;if("symbol"==propertyType)return properties[property]=value,!0;const previouslyDefined=property in object,previousValue=object[property];const result=Reflect.set(object,property,value);return(!previouslyDefined||previousValue!==object[property])&&update(),result},deleteProperty:(target,property)=>{if(-1<reserved.indexOf(property))return!1;const previouslyDefined=property in object;const result=Reflect.deleteProperty(object,property);return previouslyDefined&&!(property in object)&&update(),result}};for(const trap of reflected)handler[trap]=(target,...args)=>Reflect[trap](object,...args);const proxy=new Proxy(this,handler);return proxy}static[Symbol.hasInstance](instance){return Array.isArray(instance)&&instance[exports.OBJECTARRAY]&&instance[exports.OBJECT]}static from(object){return new ObjectArray(object)}remap(callback,thisArg=this){const object=this[exports.OBJECT];if("function"!=typeof callback)throw TypeError("Cannot map an ObjectArray without a valid mapper function as the first argument");if(object){const keys=keysOf(object),values=[];for(let i=0;i<keys.length;i++){const key=keys[i],value=object[key];const mapped=callback.call(thisArg||this,value,keys[i],i,this)}return values}}toJSON(){return this[exports.OBJECT]}}ObjectArray.scoped=["length","toJSON",exports.OBJECT,exports.ITERATOR,exports.UNSCOPABLES],ObjectArray.inherited=[...keysOf(Object.prototype),...keysOf(Array.prototype)],ObjectArray.unsupported=["copyWithin","fill","push","pop","shift","unshift","sort","splice"],ObjectArray.reflected=["apply","construct","has","getPrototypeOf","setPrototypeOf","preventExtensions","isExtensible"],exports.ObjectArray=ObjectArray,ObjectArray.reserved=[].concat(ObjectArray.scoped,ObjectArray.unsupported,ObjectArray.inherited,keysOf(ObjectArray.prototype)),exports.default=ObjectArray,function Spec(){const object={a:"A",b:"B"};const objects=[1,2,3].map(()=>Object.assign({},object));const objectArray=new ObjectArray(object);const objectArrays=objects.map(object=>new ObjectArray(object));delete objectArrays[0].a,objectArrays[1].c=objectArrays[2].c="C",delete objectArrays[1].b,objectArrays[2].a="\xC5";const stringify=(object,...args)=>JSON.stringify(object,...args);const forOf=(subject,values=[])=>{for(const i of subject)values.push(i);return values};const forIn=(subject,values={})=>{for(const k in subject)values[k]=subject[k];return values};const forAll=(subject,values=[])=>{for(let i=0;i<subject.length;i++)values.push(subject[i]);return values};const spec=(subject,{separator=",",quote=""}={})=>(subject=subject||{},Object.assign({"[ object ]":subject[exports.OBJECTARRAY]||subject,keys:Array.from(keysOf(subject)||[]).join(separator),ownKeys:Reflect.ownKeys(subject).join(separator),values:valuesOf(subject).join(separator),from:Array.from(subject).join(separator),join:subject.join(separator),JSON:JSON.stringify(subject),"for … in":stringify(forIn(subject,{})),"for … of":stringify(forOf(subject,[])),"for …":stringify(forAll(subject,[]))},keysOf(subject).reduce((values,key,index)=>(values[`[${key}]`]=subject[key],values[`[${index}]`]=subject[index],values),{})));const results=[spec(objectArray),...objectArrays.map(spec)];console.table(results)}}),___scope___.file("modules/nerdy-utils/global-scope.js",function(exports,require,module,__filename,__dirname){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const type_checker_1=require("./type-checker");const $this=eval("() => this")();class GlobalScope{}GlobalScope.isWindow=!!("object"==typeof window&&type_checker_1.isObject(window.navigator)),GlobalScope.notWindow=!GlobalScope.isWindow,GlobalScope.isWorker=GlobalScope.notWindow&&!!("object"==typeof self&&type_checker_1.isObject(self.navigator)),GlobalScope.notWorker=!GlobalScope.isWorker,GlobalScope.isBrowser=GlobalScope.isWindow||GlobalScope.isWorker,GlobalScope.notBrowser=!GlobalScope.isBrowser,GlobalScope.isFrontend=GlobalScope.isBrowser,GlobalScope.notFrontend=!GlobalScope.isFrontend,GlobalScope.isProcess=GlobalScope.notFrontend&&!!("object"==typeof global&&type_checker_1.isObject(global.process)),GlobalScope.notProcess=!GlobalScope.isProcess,GlobalScope.isBackend=GlobalScope.isProcess,GlobalScope.notBackend=!GlobalScope.isBackend,GlobalScope.isOther=GlobalScope.notBrowser&&GlobalScope.notProcess,GlobalScope.notOther=!GlobalScope.isOther,GlobalScope.$window=GlobalScope.isWindow?window:void 0,GlobalScope.$worker=GlobalScope.isWorker?self:void 0,GlobalScope.$process=GlobalScope.isProcess?global:void 0,GlobalScope.$lexical=$this,GlobalScope.$global=GlobalScope.$window||GlobalScope.$worker||GlobalScope.$process||GlobalScope.$lexical,exports.GlobalScope=GlobalScope,Object.setPrototypeOf(GlobalScope,GlobalScope.$global),exports.$window=GlobalScope.$window&&GlobalScope,exports.$worker=GlobalScope.$worker&&GlobalScope,exports.$process=GlobalScope.$process&&GlobalScope,exports.$lexical=GlobalScope.$lexical&&GlobalScope,exports.$global=GlobalScope,exports.isWindow=GlobalScope.isWindow,exports.isWorker=GlobalScope.isWorker,exports.isProcess=GlobalScope.isProcess,exports.isOther=GlobalScope.isOther,exports.isBrowser=GlobalScope.isBrowser,exports.isBackend=GlobalScope.isBackend,exports.isFrontend=GlobalScope.isFrontend,exports.notWindow=GlobalScope.notWindow,exports.notWorker=GlobalScope.notWorker,exports.notProcess=GlobalScope.notProcess,exports.notOther=GlobalScope.notOther,exports.notBrowser=GlobalScope.notBrowser,exports.notBackend=GlobalScope.notBackend,exports.notFrontend=GlobalScope.notFrontend,exports.default=exports.$global}),___scope___.file("modules/nerdy-utils/bound-reflection.js",function(exports,require,module,__filename,__dirname){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Reflection=(target,bindings={})=>({set:Reflect.set.bind(Reflect,target),get:Reflect.get.bind(Reflect,target)}),exports.Bound=(target,bindings=exports.Reflection(target))=>new Proxy(target,{get(target,property){const value=Reflect.get(target,property);return bindings[property]||("function"==typeof value?bindings[property]=value.bind(target):value)}})}),___scope___.file("modules/nerdy-utils/specs.js",function(exports,require,module,__filename,__dirname){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const type_checker_1=require("./type-checker");class Spec{constructor(spec,...specs){return spec=[].reduce.call(arguments,Spec.merge),1<arguments.length||"function"==typeof arguments[0]?new Spec(spec):void Object.assign(this,spec)}}Spec.merge=(result={},spec)=>Object.assign(result||{},type_checker_1.isFunction(spec)?spec(result):type_checker_1.isObject(spec)?spec:{}),exports.Spec=Spec,exports.default=Spec}),___scope___.file("modules/nerdy-utils/styles.js",function(exports,require,module,__filename,__dirname){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const type_cast_1=require("./type-cast");const{defineProperty,assign,getPrototypeOf,hasOwnProperty}=Object;const selectorFunctions=new WeakMap;exports.merge=(style={},...styles)=>{"object"!=typeof style&&(style=Object.assign({},style));let prototype=getPrototypeOf(style);prototype===Object.prototype&&Object.setPrototypeOf(style,prototype={});const mergeStyle=(target,source)=>{if("function"==typeof target&&(target=target()),"object"!=typeof target&&(target={}),!!source)return"function"==typeof source&&(source=source()),"object"==typeof source&&Object.assign(target,source),target};const defineSelector=selector=>!hasOwnProperty.call(style,selector)&&defineProperty(style,selector,{set:value=>prototype[selector]["this"]=value,get:()=>{const own=prototype[selector]["this"];const merged=prototype[selector].values();const style=mergeStyle({},own);for(const _style of merged)mergeStyle(style,_style);return style}});for(const _style of styles)if("object"==typeof _style)for(let selector in _style)if(selector="string"==typeof selector&&selector.trim()){if(!(selector in prototype)){const styleValue=[style[selector]]||{},styleSelector=()=>styleValue;prototype[selector]=new Set,prototype[selector]["this"]=styleSelector,delete style[selector]}if(selector in style){selectorFunctions.has(_style)||selectorFunctions.set(_style,{});const _styleSelectors=selectorFunctions.get(_style);const _styleSelector=_styleSelectors[selector]=_styleSelectors[selector]||(()=>_style.selector);prototype[selector].add(()=>_style.selector),defineSelector(selector)}}return style};var Selectors;(function(Selectors){const SelectorClass=(_a=class Selector{constructor(selectors={},$=Selector.selector(selectors)){Selector.define.call(this,...arguments)}static define(selectors={},$=Selector.selector(selectors)){const target=this===Selector?selectors:this;return defineProperty(target,"$",{get:()=>$,set:()=>{},configurable:!0}),type_cast_1.reduce(selectors,(object,item,key)=>"$"!==key&&isNaN(key)&&/(object|string)/.test(typeof selectors[key])?assign(object,{[key]:new Selector(Selector.selectors(item),Selector.selector(item,key).replace(/^(\…|\.\.\.)/,$))}):object,target),target}toString(){return this.$}},_a.stringifier="toString",_a.selector=(selector,fallback="")=>("string"==typeof selector?selector:selector.$)||fallback,_a.selectors=(selector,fallback={})=>"object"==typeof selector?selector:fallback,_a);Selectors.Selector=function SelectorFactory(selectors,...args){return selectors instanceof Selectors.Selector?SelectorClass.define(...arguments):new SelectorClass(...arguments)},Object.setPrototypeOf(Selectors.Selector,SelectorClass);var _a})(Selectors||(Selectors={}));var Selector=Selectors.Selector;exports.Selector=Selector,exports.Selectors=Selector,exports.normalizeProperty=property=>"string"==typeof property?property.replace(/^\$/,"--").replace(/([a-z])([A-Z])/g,"$1-$2").toLocaleLowerCase():"";var Variables;(function(Variables){Variables.Var=Object.assign(function Var(name,fallback){const args=3>arguments.length?[...arguments]:[arguments[0],arguments[arguments.length-1]].slice(0,_Mathmax(arguments.length,2));if("symbol"!=typeof this){const boundVar=Var.bind(Symbol("var"),...args);return boundVar.toString=()=>boundVar(),0===args.length?boundVar:boundVar}return args.length?Var.stringify(...args):""},{stringify:(name,fallback)=>`var(--${exports.normalizeProperty(name).replace(/^($|--)/,"")}${fallback?`, ${fallback}`:""})`,mock:($=new Variables.Var)=>({length:$.length,"()":`${$()}`,"(a)":`${$("a")}`,"(a, b)":`${$("a","b")}`,"(a, b, c)":`${$("a","b","c")}`,"new ()":`${new $}`,"new (AA)":`${new $("AA")}`,"new (AA, BB)":`${new $("AA","BB")}`,"new (AA, BB, CC)":`${new $("AA","BB","CC")}`}),mocks:()=>({"new()":Variables.Var.mock(new Variables.Var),"new(A)":Variables.Var.mock(new Variables.Var("A")),"new(A, B)":Variables.Var.mock(new Variables.Var("A","B")),"new(A, B, C)":Variables.Var.mock(new Variables.Var("A","B","C"))})})})(Variables=exports.Variables||(exports.Variables={}));var Var=Variables.Var;exports.Var=Var}),___scope___.file("modules/nerdy-utils/path.js",function(exports,require,module,__filename,__dirname){var process=require("process");"use strict",Object.defineProperty(exports,"__esModule",{value:!0});const global_scope_1=require("./global-scope");const path_1=require("path");exports.resolvePath=path_1.resolve,exports.resolve=path_1.resolve,exports.joinPath=path_1.join,exports.join=path_1.join,exports.mainPath="function"==typeof require&&require.main&&path_1.dirname(require.main.filename)||void 0,exports.cwd=global_scope_1.$global&&global_scope_1.$global.process&&global_scope_1.$global.process.cwd?global_scope_1.$global.process.cwd():void 0,exports.baseURI="/";class Paths{constructor(base=exports.mainPath||exports.cwd||exports.baseURI,...segments){this.resolve=path_1.resolve,segments.length&&(base=path_1.resolve(base,...segments)),this.filter=path=>path,Object.defineProperties(this,{absolute:{get:()=>(...segments)=>path_1.resolve(base,...segments)},join:{get:()=>(...segments)=>path_1.join(base,...segments)},relative:{get:()=>to=>path_1.relative(base,to)},base:{get:()=>base,set:path=>base=path}})}}exports.Paths=Paths,exports.paths=new Paths,exports.absolute=exports.paths.absolute,exports.relative=exports.paths.relative,exports.basePath=exports.paths.entry,exports.absolutePath=exports.absolute,exports.relativePath=exports.relative}),___scope___.file("modules/nerdy-utils/uri.js",function(exports,require,module,__filename,__dirname){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isDataURI=uri=>/^data\:/.test(uri),exports.isURL=uri=>/^(data:.*?,|(https?|file)\:\/\/).{3}/.test(uri);var Attributes;(function(Attributes){Attributes.stringify=(attributes,keys=Object.keys(attributes))=>attributes?"string"==typeof attributes?attributes:keys.map(key=>attributes[key]?`${key}=${attributes[key]}`:"").join(";").trim():"",Attributes.append=(uri,attributes)=>exports.isDataURI(uri)&&(attributes=Attributes.stringify(attributes)).length?uri.replace(/^(data\:[^,;]+)(\;.*?)?,/,`$1;${attributes}$2,`):uri,Attributes.parse=uri=>{const[match,type,metadata]=[...(/(?:^data\:([^;]+;);*(.*?)\;*,)/g.exec(uri)||"")];if(!metadata)return{};const query=metadata.split(/;+/).map(param=>param.replace(/^([^=]*?)=?$/g,"$1=true")).join("&");const url=new URL(`fake:///?${query}`);const attributes=[...url.searchParams.entries()].reduce((attributes,[attribute,value=""])=>(attributes[attribute]=""===value?"":"true"===value||"false"!==value&&(isNaN(value)?value:+value),attributes),{type:type.substr(0,-1)});return attributes}})(Attributes=exports.Attributes||(exports.Attributes={}));const bystStringEncoder="undefined"==typeof TextEncoder?{encode(string){return Uint8Array.from(string,c=>c.charCodeAt(0))}}:new TextEncoder;exports.toFile=src=>{const type=(/^(?:data\:)([^;,]+)/.exec(src)||"")[1];const attributes=Attributes.parse(src);const filename=attributes.name||"";const content=src.split(",")[1];const scope={src,type,attributes,filename,content};if(content){const raw=attributes.base64?atob(content):decodeURIComponent(content);const bits=bystStringEncoder.encode(raw);const file=new File([bits],filename,{type});return file}throw console.warn("uri.toFile::[from: unknown] FAILED!",scope),ReferenceError("Unsupported URI!")},exports.toFileAsync=src=>new Promise((resolve,reject)=>setTimeout(()=>resolve(exports.toFile(src)),0));const uri=require("./uri");exports.uri=uri,exports.default=uri}),___scope___.file("modules/nerdy-utils/generators.js",function(exports,require,module,__filename,__dirname){"use strict";function*subinterval(data,interval=1,start=0,end=data&&data.length){if(!(!data||"number"!=typeof data.length||1>data.length||data.length<end))for(let i=start;i<end;i+=interval)yield data[i]}Object.defineProperty(exports,"__esModule",{value:!0}),exports.subinterval=subinterval}),___scope___.file("modules/nerdy-utils/math.js",function(exports,require,module,__filename,__dirname){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const{hypot:_hypot}=Math;exports.PI=_MathPI,exports.imul=Math.imul,exports.min=_Mathmin,exports.max=_Mathmax,exports.pow=Math.pow,exports.hypot=(a,b=a)=>_hypot(a,b),exports.trunc=v=>~~(1*v),exports.floor=(v,t=exports.trunc(v))=>v===t?t:v>=t?t:t-1,exports.ceil=(v,f=exports.floor(v))=>0<=v?f+1:f>=v?f:f+1,exports.round=(v,t=exports.trunc(v))=>v===t?t:0<=v?0.5>v-t?t:t+1:0.5>t-v?t:t-1,exports.mround=(v,m,t=exports.trunc(v*m)/m)=>v===t?t:0<=v?0.5>v-t?t:t+1:0.5>t-v?t:t-1,exports.power=(b,e)=>b**e,exports.diagonal=(a,b=a)=>exports.ceil(exports.hypot(a,b)),exports.opposite=(b,a=b)=>exports.power(exports.power(b,2)/2,0.5)}),___scope___.file("modules/nerdy-utils/traces.js",function(exports,require,module,__filename,__dirname){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});class Traces{constructor(){this.sync=!1,this._traces=new Set,this.debugging=new Set,this._entries=0}static get main(){return this._main}get traces(){return[...this._traces]}entry(filename,...content){return filename&&"string"==typeof filename&&(async()=>this.trace({type:"entry",index:this._entries++,filename,content,debug:!1},(await!0)))(),!0}trace(trace,sync=null){if(!trace||!/(object|function)/.test(typeof trace))return!1;const type=trace.type="string"==typeof trace.type?trace.type:"trace";const debug=trace&&!1!==trace.debug&&trace.options&&trace.options.debug;return this._traces.add(trace),sync=!0===sync||!1===sync?sync:!0===trace.sync||!1===trace.sync?trace.sync:this.sync,!1===debug||(sync?this.debug(trace,debug):(async()=>await this.debug(trace,debug))())&&!0}debug(trace={},options={},filters=options.filters||this.debugging){if(!trace)return;const{force=!1}="object"==typeof options?options:"string"==typeof options?{force:/^\b(force|async|sync|)\b$/i.exec([options,"sync"])[0]||!1}:{force:"boolean"==typeof options&&options};const cue=trace.cue="string"==`[$${trace.type}][@${trace.filename||"/"}]`+typeof trace.cue?trace.cue:"",filter=filter=>filter.test?filter.test(cue):"string"==typeof filter?-1<cue.indexOf(filter):"function"==typeof filter&&!!filter(trace);const mode=/\b(log|warn|info|error)\b/i.exec([trace.level,options.level,"log"])[0];return(async()=>(console[mode](...("string"==typeof trace?[trace]:[`${trace.type||""} ${-1<trace.index?`[${trace.index}]`:""} ${trace.filename||""}`.trim().replace(/\s+/g," ")+" \u2014 ",...[].concat(trace.content||trace)])),await!0))()}}Traces._main=new Traces,exports.Traces=Traces,exports.main=Traces.main,exports.entry=(...args)=>exports.main.entry(...args),exports.default=exports.main}),___scope___.file("modules/nerdy-elements/core/elements-registry.js",function(exports,require,module,__filename,__dirname){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const helpers_1=require("./helpers");const elements_factory_1=require("./elements-factory");const templates_factory_1=require("./templates-factory");const native_elements_1=require("./native-elements");class ElementsRegistry{constructor(){this.constructors=[],this.tags=[],this.elementFactory=new elements_factory_1.default(this),this.templateFactory=new templates_factory_1.default(this),this.createElement=this.elementFactory.create,this.createComment=this.elementFactory.createComment,this.createTemplate=this.templateFactory.create,this.defineTemplate=this.templateFactory.define,this._defined=new Set}define(constructor,options={}){const{tagName}=constructor;if(this._defined.has(tagName))throw ReferenceError(`Cannot define the ${tagName||"<unnamed>"} element since the tag name has already been defined;`);if(this._defined.has(constructor))throw ReferenceError(`Cannot define the ${tagName||"<unnamed>"} element since the constructor has already been defined;`);this._defined.add(tagName),this._defined.add(constructor);const base=options&&options.extends||constructor.extends;return helpers_1.isFunction(base)&&!options.extends&&(options.extends=ElementsRegistry.resolveTagName(base)),this.register(tagName,constructor,options)}register(tagName,constructor,options={}){return ElementsRegistry.validateTagName(tagName),ElementsRegistry.validateConstructor(constructor),this.registerTagName(tagName),this.registerConstructor(constructor,tagName),ElementsRegistry.registerCustomElement(tagName,constructor,Object.assign({extends:"div"},options)),constructor}registerTagName(tagName){if(this.tags.includes(tagName))throw RangeError(`Tag name "${tagName}" is already in use.`);return this.tags.push(tagName),tagName}include(entity){return!helpers_1.isString(entity)&&this.constructors.includes(entity)}registerConstructor(constructor,tagName){const alreadyRegistered=this.include(constructor);return this.constructors.push(constructor),alreadyRegistered&&console.warn(`Constructor ${constructor.name} is now registered multiple times with different tags.`),helpers_1.isCustomTagName(tagName)&&Object.defineProperty(constructor,"name",{value:constructor.tagName=tagName}),constructor}}exports.ElementsRegistry=ElementsRegistry,function(ElementsRegistry){function resolveTagName(entity){return helpers_1.isString(entity)?helpers_1.isCustomTagName(entity)||native_elements_1.tagNames.includes(entity):helpers_1.isFunction(entity)?helpers_1.isCustomTagName(entity.tagName)?entity.tagName:helpers_1.isCustomTagName(entity.is)?entity.is:/HTML(\w+)Element/.test(entity.name)?native_elements_1.getTagName(entity):null:null}function validateTagName(tagName){if(validateTagName.lastValid===tagName)return!0;if(!helpers_1.isCustomTagName(tagName))throw TypeError(helpers_1.isString(tagName)?`Tag name "${tagName}" is not a valid custom element tag (try adding a prefix to include at lease one dash in the name to conform to v1 specs).`:`Tag name of type "${typeof tagName}" is not allowed, expecting a string instead.`);validateTagName.lastValid=tagName}function validateConstructor(constructor){if(validateConstructor.lastValid===constructor)return!0;if(!(helpers_1.isFunction(constructor)&&constructor.prototype instanceof native_elements_1.Element))throw TypeError(`Constructor of type ${typeof constructor} is not allowed, expecting a constructor function with a valid Element prototype.`);validateConstructor.lastValid=constructor}async function registerCustomElement(tagName,constructor,options={}){return!!helpers_1.isBrowser&&(validateTagName(tagName),validateConstructor(constructor),helpers_1.isCustomTagName(options.extends)&&(await window.customElements.whenDefined(options.extends)),"function"==typeof constructor.canRegister&&(constructor=await constructor.canRegister()),window.customElements.define(tagName,constructor,options),constructor)}ElementsRegistry.resolveTagName=resolveTagName,ElementsRegistry.validateTagName=validateTagName,ElementsRegistry.validateConstructor=validateConstructor,ElementsRegistry.registerCustomElement=registerCustomElement}(ElementsRegistry=exports.ElementsRegistry||(exports.ElementsRegistry={}));const assert=console.assert;exports.default=ElementsRegistry}),___scope___.file("modules/nerdy-elements/core/elements-factory.js",function(exports,require,module,__filename,__dirname){var __decorate=__fsbx_decorate(arguments);"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=3>c?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;0<=i;i--)(d=decorators[i])&&(r=(3>c?d(r):3<c?d(target,key,r):d(target,key))||r);return 3<c&&r&&Object.defineProperty(target,key,r),r};var __metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)};Object.defineProperty(exports,"__esModule",{value:!0});const decorators_1=require("./decorators");const helpers_1=require("./helpers");const native_elements_1=require("./native-elements");exports.commonAttributesNames=["id","name","class","hidden","value"],exports.propertyAttributeMap={className:"class",hide:"hidden"},exports.standardAttributeProperties=Object.keys(exports.propertyAttributeMap),exports.standardAttributeNames=[...exports.commonAttributesNames,...exports.standardAttributeProperties.map(name=>exports.standardAttributeProperties[name])].filter(name=>name&&helpers_1.isString(name)),exports.standardAttributeExpression=new RegExp(`/^(${exports.standardAttributeNames.join("|")})$/`),exports.supportsDocumentFactory=!!("object"==typeof document&&document.createElement),exports.supportsCustomElements=!!("object"==typeof window&&window.customElements&&window.customElements.define&&window.customElements.whenDefined);const textify=(object,string=object+"")=>object?helpers_1.isString(object)?object:isNaN(object)?object[Symbol.toPrimitive]&&object[Symbol.toPrimitive]!==Object[Symbol.toPrimitive]?object[Symbol.toPrimitive]("string"):object[Symbol.toStringTag]&&object[Symbol.toStringTag]!==Object[Symbol.toStringTag]?object[Symbol.toStringTag]():object.toString&&object.toString!==Object.toString?object.toString():"":string:"";let ElementsFactory=ElementsFactory_1=class ElementsFactory{constructor(registrar){this.registrar=registrar}static getKeys(name,keys=ElementsFactory_1.keyMap.get(name),{property="",attribute=""}=keys||{}){return name&&(property&&attribute||(keys={property:property=property||name.replace(/-([a-z]|$)/ig,a=>(a[1]||"").toUpperCase()),attribute:attribute=attribute||property.replace(/([a-z](?=[A-Z])|\D(?=\d)|[A-Z](?=[A-Z][a-z]))/g,"$1-").toLowerCase()},ElementsFactory_1.keyMap.set(name,keys).set(property,keys).set(attribute,keys))),{property,attribute}}get create(){return this.createElement}createElement(entity,properties,...contents){const element=helpers_1.isString(entity)?this.constructElement(entity):this.constructElement(entity);const pseudo=element;return this.applyProperties(pseudo,properties),contents.length&&this.appendContents(pseudo,...[].concat(...contents)),element}constructElement(entity){const ensureDefined=()=>{};if(exports.supportsDocumentFactory&&helpers_1.isString(entity)){const element=document.createElement(entity);return element}if(helpers_1.isFunction(entity)){if(ElementsFactory_1.useCustomElementsRegistry&&helpers_1.isCustomTagName(entity.tagName))return ensureDefined(),this.constructElement(entity.tagName);if(native_elements_1.isNativeConstructor(entity))return this.constructElement(native_elements_1.getTagName(entity));try{return new entity}catch(exception){if(/constructor/.test(exception.message)&&"TypeError"===exception.name)return entity();console.error(exception)}}else throw TypeError(`Cannot construct element from entity "${entity}" which should either be a valid tag name or a Custom Element constructor.`)}createTextNode(content){return document.createTextNode(textify(content))}createComment(data){return document.createComment(`${data}`)}applyProperties(element,properties){if("object"==typeof properties){const keys=Object.keys(properties||{});if(keys.length)for(const property of keys){const{property:propertyKey,attribute:attributeKey}=ElementsFactory_1.getKeys(property),value=properties[property],valueType=typeof value;(propertyKey in element||element[propertyKey])&&"undefined"!=valueType&&null!==value&&typeof element[propertyKey]!=valueType||(element[propertyKey]=value),!1===value||null===value||void 0===value?element.removeAttribute(attributeKey):!0!==value&&("function"==valueType||"object"==valueType||"symbol"==valueType)||element.setAttribute(attributeKey,!0===value?"":value)}}}appendContents(element,...contents){if(contents&&contents.length&&"object"==typeof element&&element instanceof native_elements_1.HTMLElement){const template=helpers_1.isTemplateElement(element)&&element;const parent=template?template.content:element;if(parent&&"f"===(typeof parent.appendChild)[0]){for(const child of contents)child&&(helpers_1.isElement(child)||child instanceof Text?parent.appendChild(child):"function"==typeof parent.appendObject?parent.appendObject(child):parent.appendChild(this.createTextNode(child)));template&&this.initializeTemplateContents(template)}}}initializeTemplateContents(template){if(helpers_1.isTemplateElement(template)){const descendants=template.content.querySelectorAll("*");for(const decendant of Array.from(descendants).reverse())helpers_1.call(decendant,"attachedToTemplate",template)}}};ElementsFactory.useCustomElementsRegistry=exports.supportsCustomElements,ElementsFactory.keyMap=new Map,__decorate([decorators_1.bind,__metadata("design:type",Function),__metadata("design:paramtypes",[Object,Object,Object]),__metadata("design:returntype",void 0)],ElementsFactory.prototype,"createElement",null),__decorate([decorators_1.bind,__metadata("design:type",Function),__metadata("design:paramtypes",[Object]),__metadata("design:returntype",void 0)],ElementsFactory.prototype,"constructElement",null),__decorate([decorators_1.bind,__metadata("design:type",Function),__metadata("design:paramtypes",[Object]),__metadata("design:returntype",Object)],ElementsFactory.prototype,"createTextNode",null),__decorate([decorators_1.bind,__metadata("design:type",Function),__metadata("design:paramtypes",[Object]),__metadata("design:returntype",Object)],ElementsFactory.prototype,"createComment",null),ElementsFactory=ElementsFactory_1=__decorate([decorators_1.bind,__metadata("design:paramtypes",[Object])],ElementsFactory),exports.ElementsFactory=ElementsFactory,exports.default=ElementsFactory;var ElementsFactory_1}),___scope___.file("modules/nerdy-elements/core/decorators.js",function(exports,require,module,__filename,__dirname){"use strict";function bind(target,method=target[exports.BindMethods],descriptor=null){const scope={};if(3===arguments.length)target[exports.BindMethods]=[...(target[exports.BindMethods]||[]),method];else if(3>arguments.length&&"object"==typeof target&&Array.isArray(method)){const prototype=scope.prototype=Object.getPrototypeOf(target),properties=scope.properties={},boundMethods=scope.boundMethods=method||[];for(const boundMethod of boundMethods)"string"==typeof boundMethod&&"function"==typeof prototype[boundMethod]&&(target[boundMethod]=prototype[boundMethod].bind(target))}else if(1===arguments.length&&"function"==typeof target)return class extends target{constructor(...args){super(...args),bind(this)}}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.BindMethods=Symbol("[[BindMethods]]"),exports.bind=bind}),___scope___.file("modules/nerdy-elements/core/native-elements.js",function(exports,require,module,__filename,__dirname){"use strict";function getTagName(constructor){const name=constructor.name;return exports.classNameMap[name]}function getConstructor(tagName){if(tagName in exports.tagNameMap)return window[exports.tagNameMap[tagName]]}Object.defineProperty(exports,"__esModule",{value:!0}),exports.tagNameMap={a:"Anchor",applet:"Applet",area:"Area",audio:"Audio",base:"Base",basefont:"BaseFont",blockquote:"Quote",body:"Body",br:"BR",button:"Button",canvas:"Canvas",caption:"TableCaption",col:"TableCol",colgroup:"TableCol",data:"Data",datalist:"DataList",del:"Mod",dir:"Directory",div:"Div",dl:"DList",embed:"Embed",fieldset:"FieldSet",font:"Font",form:"Form",frame:"Frame",frameset:"FrameSet",h1:"Heading",h2:"Heading",h3:"Heading",h4:"Heading",h5:"Heading",h6:"Heading",head:"Head",hr:"HR",html:"Html",iframe:"IFrame",img:"Image",input:"Input",ins:"Mod",isindex:"Unknown",label:"Label",legend:"Legend",li:"LI",link:"Link",listing:"Pre",map:"Map",marquee:"Marquee",menu:"Menu",meta:"Meta",meter:"Meter",nextid:"Unknown",object:"Object",ol:"OList",optgroup:"OptGroup",option:"Option",output:"Output",p:"Paragraph",param:"Param",picture:"Picture",pre:"Pre",progress:"Progress",q:"Quote",script:"Script",select:"Select",source:"Source",span:"Span",style:"Style",table:"Table",tbody:"TableSection",td:"TableDataCell",template:"Template",textarea:"TextArea",tfoot:"TableSection",th:"TableHeaderCell",thead:"TableSection",time:"Time",title:"Title",tr:"TableRow",track:"Track",ul:"UList",video:"Video",xmp:"Pre"},exports.classNameMap={},exports.tagNames=Object.keys(exports.tagNameMap);for(const tagName of exports.tagNames){const className=`HTML${exports.tagNameMap[tagName]}Element`;exports.classNameMap[className]||(exports.classNameMap[className]=tagName,exports.tagNameMap[tagName]=className)}exports.classNames=Object.keys(exports.classNameMap),exports.getTagName=getTagName,exports.getConstructor=getConstructor,exports.isNativeConstructor=constructor=>window[constructor.name]===constructor||exports.classNames.includes(constructor.name),exports.BaseElement="undefined"==typeof Element?class Element{}:Element,exports.Element=exports.BaseElement,exports.NativeElement="undefined"==typeof HTMLElement?class HTMLElement extends exports.BaseElement{}:HTMLElement,exports.HTMLElement=exports.NativeElement,exports.CustomElement=exports.NativeElement}),___scope___.file("modules/nerdy-elements/core/templates-factory.js",function(exports,require,module,__filename,__dirname){var __decorate=__fsbx_decorate(arguments);"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=3>c?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;0<=i;i--)(d=decorators[i])&&(r=(3>c?d(r):3<c?d(target,key,r):d(target,key))||r);return 3<c&&r&&Object.defineProperty(target,key,r),r};var __metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)};Object.defineProperty(exports,"__esModule",{value:!0});const decorators_1=require("./decorators");const helpers_1=require("./helpers");const elements_factory_1=require("./elements-factory");exports.PROXY=Symbol("Binding::Proxy"),exports.COMPONENT=Symbol("Binding::Component"),exports.HOOKS=Symbol("Binding::Hooks");class BindingProxy{static get(proxy,model={}){return"function"==typeof proxy||"function"==typeof(proxy||{}).get?new BindingProxy(model,proxy):proxy instanceof BindingProxy?proxy:new BindingProxy(model)}constructor(component,handler=NerdyBindingHandler){return component instanceof BindingProxy?component:("function"==typeof handler&&(handler=new handler(component)),component[exports.PROXY]=new Proxy(this,{get:(target,property,receiver)=>handler.get(component,property,receiver)}))}}exports.BindingProxy=BindingProxy;class BindingHook{static declare(hook){return helpers_1.isString(hook)?new BindingHook(hook):(BindingHook[exports.HOOKS].add(hook),hook)}constructor(name){return this.toString=()=>name,this[Symbol.toStringTag]=`«${name}»`,BindingHook.declare(Object.create(this))}}exports.BindingHook=BindingHook,BindingHook[exports.HOOKS]=new WeakSet;class NerdyBindingHandler{constructor(component,hooks={}){this[exports.COMPONENT]=component,this[exports.HOOKS]=component.constructor.bindingHooks=hooks,this.get=(target,property,receiver)=>property===exports.PROXY?receiver:property in this?this[property]:this.getHook(property,component[property]),component.constructor.bindingHandler=this}getHook(property,value){return this[exports.HOOKS][property]||(this[exports.HOOKS][property]=new BindingHook(property))}}exports.NerdyBindingHandler=NerdyBindingHandler;const canQuerySelector=object=>"object"==typeof object&&"function"==typeof object.querySelector;let TemplatesFactory=TemplatesFactory_1=class TemplatesFactory{constructor(elementsFactory){this.elementsFactory=elementsFactory,void 0!==this.container&&this.container instanceof Element||(this.container=[this.container,this.constructor.container].reduce((element,selector)=>element||null===element?element:null===selector?null:(helpers_1.isString(selector)?document.querySelector(selector):helpers_1.isElement(selector)&&selector)||element))}get create(){return this.createTemplate}get define(){return this.defineTemplate}get createElement(){return this.elementsFactory&&this.elementsFactory.createElement}get createComment(){return this.elementsFactory&&this.elementsFactory.createComment}createTemplateElement(...contents){const properties=0===contents.length||contents[0].cloneNode?{}:contents.shift();return this.createElement(HTMLTemplateElement,properties,...contents)}createTemplate(template,proxy,model){const element=helpers_1.isTemplateElement(template)?template:helpers_1.isTemplateFactory(template)?this.createFromFactory(template,proxy):this.createFromElements(helpers_1.isElement(template)?template:this.createComment(template));return element[exports.PROXY]=element[exports.PROXY]||proxy,element}createFromFactory(factory,proxy,model){proxy=BindingProxy.get(proxy,model)||{};let element=factory(proxy);return element[exports.PROXY]=element[exports.PROXY]||proxy,"function"==typeof proxy.bind&&proxy.bind(element),element}createFromElements(...elements){return this.createTemplateElement(...elements)}defineTemplate(id,template,proxy){if(!helpers_1.isCustomTagName(id))return this.createTemplateElement(template);id=TemplatesFactory_1.normalizeId(id);const templateElement=TemplatesFactory_1.templateElements.get(id)||[this.container&&this.container.querySelector(`template[for=${id}], template#${id}`)].find(helpers_1.isTemplateElement)||this.createTemplate(template,proxy);return templateElement.hasAttribute("for")||templateElement.setAttribute("for",id),TemplatesFactory_1.templateElements.set(id,templateElement),this.container&&templateElement.parentElement!==this.container&&this.container.appendChild(templateElement),templateElement}};TemplatesFactory.container="head",TemplatesFactory.templateElements=new Map,TemplatesFactory.normalizeId=id=>id.toLowerCase().replace(/\-+template$/,"")+"-template",__decorate([decorators_1.bind,__metadata("design:type","function"==typeof(_a="undefined"!=typeof elements_factory_1.ElementFactoryMethod&&elements_factory_1.ElementFactoryMethod)&&_a||Object),__metadata("design:paramtypes",[])],TemplatesFactory.prototype,"createElement",null),__decorate([decorators_1.bind,__metadata("design:type","function"==typeof(_b="undefined"!=typeof elements_factory_1.CommentFactoryMethod&&elements_factory_1.CommentFactoryMethod)&&_b||Object),__metadata("design:paramtypes",[])],TemplatesFactory.prototype,"createComment",null),__decorate([decorators_1.bind,__metadata("design:type",Function),__metadata("design:paramtypes",[Object]),__metadata("design:returntype",Object)],TemplatesFactory.prototype,"createTemplateElement",null),__decorate([decorators_1.bind,__metadata("design:type",Function),__metadata("design:paramtypes",[Object,Object,Object]),__metadata("design:returntype",Object)],TemplatesFactory.prototype,"createTemplate",null),__decorate([decorators_1.bind,__metadata("design:type",Function),__metadata("design:paramtypes",[Object,Object,Object]),__metadata("design:returntype",Object)],TemplatesFactory.prototype,"createFromFactory",null),__decorate([decorators_1.bind,__metadata("design:type",Function),__metadata("design:paramtypes",[Object]),__metadata("design:returntype",void 0)],TemplatesFactory.prototype,"createFromElements",null),__decorate([decorators_1.bind,__metadata("design:type",Function),__metadata("design:paramtypes",[String,Object,Object]),__metadata("design:returntype",Object)],TemplatesFactory.prototype,"defineTemplate",null),TemplatesFactory=TemplatesFactory_1=__decorate([decorators_1.bind,__metadata("design:paramtypes",[Object])],TemplatesFactory),exports.TemplatesFactory=TemplatesFactory,exports.default=TemplatesFactory;var TemplatesFactory_1,_a,_b,_c,_d}),___scope___.file("modules/nerdy-elements/components/nerdy-element.jsx",function(exports,require,module,__filename,__dirname){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const core_1=require("../core");const logger_1=require("~/modules/nerdy-utils/logger");const nerdy_utils_1=require("~/modules/nerdy-utils");nerdy_utils_1.$entry(__filename||"nerdy-elements/components/nerdy-element.tsx");const{defineProperty,defineProperties}=Object;class NerdyElement extends core_1.CustomElement{constructor(){super(),this._instanceNumber=-1;const constructor=this.constructor;constructor.hasOwnProperty("_instanceCount")||defineProperty(constructor,"_instanceCount",{value:0,writable:!0}),this._instanceNumber=constructor._instanceCount=(constructor._instanceCount||0)+1;const{template,templateBinder}=constructor;"function"!=typeof template||templateBinder&&templateBinder!==core_1.NerdyBindingHandler||NerdyElement.stampTemplate(this,template)}static get localName(){return this.tagName||this.name||this.displayName}static createLogger(instance,options="log"){const{localName="",_instanceNumber:index,constructor:{tagName,name:functionName}}=instance;const type=/(log|info|warn|error)/.exec([options,options.type,"log"])[0];const name=[localName,tagName,functionName].find(name=>name&&"string"==typeof name);const prefix=/\w/.test(options.prefix||"")?options.prefix:-1<index?`${name}-${index}`:name;return options=Object.assign({},"object"==typeof options?options:{},{type,prefix,source:instance}),logger_1.default(Object.assign({},options))}static async canRegister(){return await this}static stampTemplate(element,template){if(template){const constructor=element.constructor;const BindingHandler=constructor.templateBinder||core_1.NerdyBindingHandler;const binder=new core_1.BindingProxy(element,new BindingHandler(element));const factory="function"==typeof template&&template;if(factory&&(template=core_1.default.defineTemplate(element.tagName,factory,binder)),!(template instanceof HTMLTemplateElement))throw TypeError(`Cannot stampTemplate without a valid HTMLTemplateElement or TemplateFactory.`);element.template=template;const container="light"===constructor.root?element:element.attachShadow({mode:"closed"===constructor.root?"closed":"open"});const content=template.content.cloneNode(!0);container.appendChild(content)}}get log(){return Object.defineProperty(this,"log",{value:NerdyElement.createLogger(this,"log")}).log}get info(){return Object.defineProperty(this,"info",{value:NerdyElement.createLogger(this,"info")}).info}get warn(){return Object.defineProperty(this,"warn",{value:NerdyElement.createLogger(this,"warn")}).warn}get error(){return Object.defineProperty(this,"error",{value:NerdyElement.createLogger(this,"error")}).error}connectedCallback(){core_1.utils.call(this,"attached")}disconnectedCallback(){core_1.utils.call(this,"detatched")}adoptedCallback(){core_1.utils.call(this,"adopted")}attributeChangedCallback(attribute,previousValue,value){core_1.utils.call(this,"modified",attribute,previousValue,value)}asNumber(value,fallback){return 1<arguments.length?isNaN(value)?fallback:value:isNaN(value)?void 0:value}asFixed(value,rounding=2,fallback){return this.asNumber(value).toFixed(rounding)}asPrecise(value,rounding=3,fallback){return this.asNumber(value).toPrecision(rounding)}asString(value){return"string"==typeof value||"number"==typeof value?0===value?"0":value?`${value}`:"":""}asLower(value){return this.asString(value).toLowerCase()}asUpper(value){return this.asString(value).toUpperCase()}asJoinedString(...values){return values.map(this.asString).join("")}asJoinedWords(...values){return values.map(this.asString).join(" ")}asJoinedList(...values){return values.map(this.asString).join(", ")}asStringTag(value){return value&&value[Symbol.toStringTag]&&value[Symbol.toStringTag]()||Object.prototype[Symbol.toStringTag].call(value)}}NerdyElement.root="open",NerdyElement._instanceCount=0,NerdyElement.templateBinder=core_1.NerdyBindingHandler,NerdyElement.define=(...args)=>core_1.default.define(...args),exports.NerdyElement=NerdyElement,exports.default=NerdyElement}),___scope___.file("modules/nerdy-utils/logger.js",function(exports,require,module,__filename,__dirname){"use strict";function createStyledLogger(options={},...args){const{type="log",prefix="",color=exports.styles.colors[type]||exports.styles.color,background=exports.styles.backgrounds[type]||exports.styles.background,padding=exports.styles.padding,fontSize=exports.styles.fontSize,style=`color:${color};background:${background};padding:${padding};font-size:${fontSize};font-family:sans-serif;margin-right: 0.5em;`,source={},format=((style&&prefix?`%c${prefix}%c `:style?`%c `:" ")+("error"===type?errorFormat:"")).trim()}=options;const method=console[type],bindings=[format||null,style||null,style?"":null].filter(arg=>"string"==typeof arg);const logger=method.bind(console,...bindings,...args),loggers=logger.loggers=new Map;const sublogger=(id,postfix)=>id?loggers.get(id)||loggers.set(id,createStyledLogger(Object.assign({},options,{prefix:(postfix=postfix||"function"==typeof source[id]?`#${id}`:`${id}`)?/^[a-z0-9\_]/i.test(postfix)?`${prefix}:${postfix}`:`${prefix}${postfix}`:prefix}),...(args||[]))).get(id):void 0;const proxy=new Proxy(logger,{get(target,property){return void 0===logger[property]?logger[property]=sublogger(property):logger[property]}});return proxy}Object.defineProperty(exports,"__esModule",{value:!0}),exports.styles={background:"lightgray",backgrounds:{log:"lightgray",info:"#9CF",warn:"#CC3",error:"red"},color:"black",colors:{log:"white",info:"white",warn:"white",error:"white"},padding:"0.125em 0.25em",fontSize:"90%"};const errorFormat=/Chrome/.test(navigator.appVersion)?"%o":/Safari/.test(navigator.appVersion)?"\u2013 %s":"%s";exports.createStyledLogger=createStyledLogger,exports.default=createStyledLogger}),___scope___.file("modules/nerdy-elements/components/polymer-element.jsx",function(exports,require,module,__filename,__dirname){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const polymer_1=require("../polymer");exports.default=polymer_1.NerdyPolymerElement;const nerdy_utils_1=require("~/modules/nerdy-utils");nerdy_utils_1.$entry(__filename||"nerdy-elements/components/polymer-element.tsx")}),___scope___.file("modules/nerdy-elements/polymer/index.js",function(exports,require,module,__filename,__dirname){"use strict";function configurable(value){value=1!==arguments.length||value;const decorate=(target,propertyKey,descriptor)=>{descriptor.configurable=!1!==value};return 1===arguments.length&&decorate||decorate(...arguments)||void 0}Object.defineProperty(exports,"__esModule",{value:!0}),require("reflect-metadata");const core_1=require("../core");const helpers_1=require("../core/helpers");const nerdy_element_1=require("../components/nerdy-element");let{ElementMixin}=(({Polymer})=>Polymer||{})("undefined"==typeof window?{}:window);let Base=ElementMixin?ElementMixin(nerdy_element_1.NerdyElement):core_1.CustomElement;exports.PolymerElement=Base;var NerdyPolymer;(function(NerdyPolymer){const Polymer=(({interval=250,timeout=6e4}={})=>new Promise((resolve,reject)=>{const didResolve=({ElementMixin,Element}={})=>"function"==typeof ElementMixin&&"function"==typeof Element;const tryResolve=(Polymer=window.Polymer)=>Date.now()>timeout?(clearInterval(interval),reject(`NerdyPolymer timed-out while waiting for Polymer to load!`),!1):didResolve(Polymer)&&(clearInterval(interval),resolve(Polymer),!0);timeout=Date.now()+timeout,interval="undefined"==typeof window?reject(`NerdyPolymer expects a valid runtime window global context.`):tryResolve()||setInterval(tryResolve,interval)}))();class BindingHandler extends core_1.NerdyBindingHandler{bind(template){if(helpers_1.isTemplateElement(template)){const{content}=template;const wrapper=document.createElement("div");for(const element of Array.from(content.querySelectorAll("[bind-src]"))){const{parentElement,localName:tag}=element,src=element.getAttribute("bind-src");if("img"===tag&&/^\[\[.*?\]\]$/.test(src)){const replacement=(wrapper.innerHTML=element.outerHTML.replace(/bind-src\=/,"src$="),wrapper.children[0]);parentElement.insertBefore(replacement,element),element.remove()}}}return template}getHook(property,value){const type=typeof value;const name="string"==typeof property&&property.replace(/^$/,"");const binding="function"==type?"listener":name&&/^$/.test(property)?"one-way":"two-way";const annotation="listener"==binding?property:"one-way"==binding?`[[${name}]]`:`{{${name}}}`;return annotation}}NerdyPolymer.BindingHandler=BindingHandler;class NerdyPolymerElement extends Base{static async canRegister(){const self=NerdyPolymerElement,constructor=this,polymer=await Polymer;const warn=()=>console.warn("NerdyPolymerElement#canRegister: FAILED",{constructor,this:this,polymer,Polymer});return self._resolvedPolymer||((self._resolvedPolymer="ElementMixin"in polymer)?self._resolvedPolymer=!!self._upgradePrototype(exports.PolymerElement=Base=(ElementMixin=polymer.ElementMixin)(nerdy_element_1.NerdyElement)):warn()),constructor}static _upgradePrototype(newSuper,constructor=this){let upgraded=!1;const debugging=!1,verbose=debugging;const name=(constructor=>constructor.displayName||constructor.name||constructor.tagName||"<anonymous class>")(constructor);const isClass=Class=>"function"==typeof Class&&/(function|object)/.test(typeof Class.prototype);if(!isClass(newSuper)||!isClass(constructor)||newSuper instanceof constructor)return!1;const prototype=constructor.prototype,newSupertype=newSuper.prototype,oldSuper=Object.getPrototypeOf(constructor),oldSupertype=Object.getPrototypeOf(prototype);try{return upgraded=(-1!==[oldSuper,constructor].indexOf(newSuper)||Object.setPrototypeOf(constructor,newSuper))&&(-1!==[oldSupertype,prototype].indexOf(newSupertype)||Object.setPrototypeOf(prototype,newSupertype))}catch(exception){try{Object.setPrototypeOf(prototype,oldSupertype),Object.setPrototypeOf(constructor,oldSuper)}catch(exception){}return upgraded=!1}finally{const results={newSuper,newSupertype,oldSuper,oldSupertype,upgraded};!upgraded&&(Object.getPrototypeOf(constructor)!==oldSuper||Object.getPrototypeOf(prototype)!==oldSupertype?console.error(new Error(`Ciritcal Error: Failed to revert the changes after failing to upgrade prototypes for ${name}!`)):console.warn(new Error(`Failed to upgrade prototypes for ${name}!`)))}}static get tagName(){if(this!==NerdyPolymerElement){if(!this._tagName){const{name,displayName,is}=this;let tagName=helpers_1.isCustomTagName(is)?is:"";if(!tagName){const validClassName=name=>/^[A-Z]+\w+([A-Z]+\w+)+/.test(name);const className=[name,displayName].find(validClassName);if(tagName=className?className.replace(/([a-z](?=[A-Z])|\D(?=\d)|[A-Z](?=[A-Z][a-z]))/g,"$1-").toLowerCase():void 0,!helpers_1.isCustomTagName(tagName))throw ReferenceError(`Custom element classes must declare a valid tag using the static tagName (or "is") property or by having a class name that evaluates appropriately to a custom element tag.`);else this.tagName=tagName}}return this._tagName}}static set tagName(value){this===NerdyPolymerElement||(this._tagName=value)}static get is(){return this._tagName}static set is(value){this===NerdyPolymerElement||(this._tagName=value)}static get template(){return this._template}static set template(value){this===NerdyPolymerElement||(!("tagName"in this)&&console.log(`[${this.name} Missing Tag`,this),"function"==typeof value&&(this._nerdyTemplate=value,value=core_1.Components.defineTemplate(this.tagName,value,new core_1.BindingProxy({},new BindingHandler(this.prototype)))),this._template=value)}connectedCallback(){super.connectedCallback&&super.connectedCallback.call(this),nerdy_element_1.NerdyElement.prototype.connectedCallback.call(this)}disconnectedCallback(){super.disconnectedCallback&&super.disconnectedCallback.call(this),nerdy_element_1.NerdyElement.prototype.disconnectedCallback.call(this)}adoptedCallback(){super.adoptedCallback&&super.adoptedCallback.call(this),nerdy_element_1.NerdyElement.prototype.adoptedCallback.call(this)}attributeChangedCallback(attribute,previousValue,value){super.attributeChangedCallback&&super.attributeChangedCallback.call(this,attribute,previousValue,value),nerdy_element_1.NerdyElement.prototype.attributeChangedCallback.call(this,attribute,previousValue,value)}_attachDom(dom){const{root}=this.constructor;return"light"===root?(this.root=this,this.root.appendChild(dom)):super._attachDom(dom)}}NerdyPolymerElement.templateBinder=BindingHandler,NerdyPolymer.NerdyPolymerElement=NerdyPolymerElement})(NerdyPolymer=exports.NerdyPolymer||(exports.NerdyPolymer={}));var NerdyPolymerElement=NerdyPolymer.NerdyPolymerElement;exports.NerdyPolymerElement=NerdyPolymerElement,exports.default=NerdyPolymerElement}),___scope___.file("modules/nerdy-elements/components/style-element.jsx",function(exports,require,module,__filename,__dirname){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const styles_1=require("../styles");exports.StylesObject=styles_1.StylesObject,exports.StyleDeclaration=styles_1.StyleDeclaration,exports.styling=styles_1.styling,exports.style=styles_1.style;const nerdy_utils_1=require("~/modules/nerdy-utils");nerdy_utils_1.$entry(__filename||"nerdy-elements/components/style-element.tsx");const styleObjects=[],createStyleObject=()=>document.createElement("element").style,requestStyleObject=()=>styleObjects.pop()||createStyleObject(),returnStyleObject=object=>styleObjects.push(object);exports.createStyleObject=createStyleObject,exports.parseValue=(value,type=typeof value)=>`${"string"===type||"number"===type?value:"function"===type?value():"object"===type&&Array.isArray(value)?value.map(exports.parseValue).join(", "):""}`,exports.normalizeProperty=property=>property.replace(/^\$/,"--").replace(/([a-z]|^)([A-Z])/g,"$1-$2").toLocaleLowerCase(),exports.setProperty=(styleObject,property,value,priority=/\!important/.test(value)?"important":"")=>("content"===property&&(value=`${value||""}`.trim().replace(/^"?(.*?)"?$/,"\"$1\"")),property in styleObject||!0===priority||"important"===priority?styleObject.setProperty(property=exports.normalizeProperty(property),priority?`${value}`.replace(/\!important/,"").trim():value,!0===priority||"important"===priority?"important":""):styleObject[property]=value,property),exports.generateStyleText=(styles={})=>{const strings=[];if("object"==typeof styles){const object=requestStyleObject();for(const selector in styles){const style=styles[selector],properties=[];if("object"==typeof style){APPLY:for(const property in style)properties.push(exports.setProperty(object,property,exports.parseValue(style[property])));strings.push(`${selector} { ${`${object.cssText}`.trim()} }`);RESET:for(const property of properties)object.removeProperty(property)}else"string"==typeof style&&strings.push(`${selector} { ${style.trim()} }`)}returnStyleObject(object)}else if("string"==typeof styles)return styles;return strings.join("\n")};class AbstractNerdyStyle extends HTMLStyleElement{appendObject(object){if(object instanceof HTMLElement)return this.appendChild(object);if(object instanceof Text)return this.appendChild(object);const text=exports.generateStyleText(object).trim()||"";text&&this.appendChild(document.createTextNode(text))}}AbstractNerdyStyle.normalizeProperty=exports.normalizeProperty,AbstractNerdyStyle.generateStyleText=exports.generateStyleText,AbstractNerdyStyle.parseValue=exports.parseValue,AbstractNerdyStyle.setProperty=exports.setProperty,exports.AbstractNerdyStyle=AbstractNerdyStyle;const prototype={appendObject:AbstractNerdyStyle.prototype.appendObject};const NerdyStyle=class NerdyStyle{constructor(){const element=Object.assign(document.createElement("style"),prototype);return element}};Object.setPrototypeOf(NerdyStyle,AbstractNerdyStyle),exports.default=NerdyStyle}),___scope___.file("modules/nerdy-elements/styles/index.js",function(exports,require,module,__filename,__dirname){"use strict";Object.defineProperty(exports,"__esModule",{value:!0})}),___scope___.file("modules/nerdy-app/index.js",function(exports,require,module,__filename,__dirname){"use strict";function __export(m){for(var p in m)exports.hasOwnProperty(p)||(exports[p]=m[p])}Object.defineProperty(exports,"__esModule",{value:!0}),__export(require("./app"));var app_1=require("./app");exports.default=app_1.NerdyApp;const nerdy_utils_1=require("~/modules/nerdy-utils");nerdy_utils_1.$entry(__filename||"nerdy-app/index.ts")}),___scope___.file("modules/nerdy-app/app.js",function(exports,require,module,__filename,__dirname){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const nerdy_utils_1=require("~/modules/nerdy-utils");nerdy_utils_1.$entry(__filename||"nerdy-app/app.ts");class NerdyApp{static get app(){return this._app||(this._app=new this)}constructor(){this.initialize=this.initialize.bind(this),this.fail=this.fail.bind(this),this.initialize()}initialize(){}fail(...reasons){console.error(...reasons)}}exports.NerdyApp=NerdyApp,exports.default=NerdyApp}),___scope___.file("app/app.js",function(exports,require,module,__filename,__dirname){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const framework_1=require("../framework");const nerdy_utils_1=require("~/modules/nerdy-utils");require("./polyfills"),nerdy_utils_1.$entry(__filename||"nerdy-elements/components/nerdy-element.tsx",{FuseBox:"undefined"==typeof FuseBox?void 0:FuseBox,Framework:framework_1.default,ObjectArray:nerdy_utils_1.ObjectArray});const components_1=require("./components");class NerdyApp extends framework_1.default.NerdyApp{constructor(){super(...arguments),this.state=new AppState}initialize(){this.bootstrap()}async bootstrap(){this.view=this.view||framework_1.createElement(components_1.AppView),window.customElements.whenDefined(components_1.AppView.tagName).then(()=>{this.view.state=this.state}),this.container=this.container||document.body,this.container.appendChild(this.view)}fail(...reasons){super.fail(__filename,...reasons)}}exports.NerdyApp=NerdyApp;const routes={iqfft:{name:"iqfft",href:"/iqfft",shortTitle:"IQ:FFT",description:"A simple FFT demo",src:"routes/iq-fft"},"error-404":{name:"error-404",href:"/error-404",shortTitle:"Page Not Found!",description:"The page you are looking for cannot be found",src:"routes/error-404",hidden:!0}},entry="iqfft";exports.ROUTES=Symbol("[[ROUTES]]");class AppRoutes extends nerdy_utils_1.ObjectArray{constructor(routes,{entry="index",fallback="error-404",useHash=!0}={}){const define=(name,fallback)=>name in routes||Object.defineProperty(this,name,{configurable:!0,get:()=>get(name,fallback),set:route=>set(name,route)});const aliases={};const get=(key,fallback)=>isNaN(key)?routes[key]||aliases[key]&&routes[aliases[key]]||fallback&&get(fallback)||void 0:this[0>key?this.length-+key:key];const set=(key,route)=>{switch(define(key=key.replace(/^\$/,"")),typeof key){case"object":return delete aliases[key],routes[key]=route;case"string":case"number":return delete routes[key],aliases[key]=route;}};super(routes),Object.defineProperties(this,{[exports.ROUTES]:{value:routes},[Symbol.toPrimitive]:{value:()=>`[${Object.keys(this[exports.ROUTES]).join(", ")}]`}}),define("entry",entry),define("fallback",fallback),get("entry",entry),get("fallback",fallback)}}AppRoutes.ROUTES=Symbol("[[ROUTES]]"),exports.AppRoutes=AppRoutes;class AppState{constructor(){this.useHash=window&&window.location&&/^http/.test(window.location.protocol)?!1:!0,this.routes=new AppRoutes(routes,{entry,useHash:this.useHash})}}exports.AppState=AppState,exports.default=NerdyApp}),___scope___.file("app/polyfills.js",function(exports,require,module,__filename,__dirname){"use strict";(function StringTruncatePolyfill(){var _Stringprototype=String.prototype;_Stringprototype.truncate||(_Stringprototype.truncate=function truncate(until=25){return"string"==typeof until&&(until=this.indexOf(until)),-1<until&&this.length>until?`${this.slice(0,until)}…`:this})})(),function AsyncCallbackPolyfill(){var global="object"==typeof window?window:"object"==typeof global?global:this;global.requestDeferCallback||(global.requestDeferCallback=(callback,{timeout=0}={})=>setTimeout(callback,timeout||0),global.cancelDeferCallback=handle=>clearTimeout(handle)),global.requestIdleCallback||(global.requestIdleCallback=global.requestDeferCallback,global.cancelIdleCallback=global.cancelDeferCallback)}(),function InterfacePolyfill(){var global="object"==typeof window?window:"object"==typeof global?global:this;global.Interface=Object}()}),___scope___.file("app/components/index.js",function(exports,require,module,__filename,__dirname){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var app_router_1=require("./app-router");exports.AppRouter=app_router_1.default;var app_style_1=require("./app-style");exports.AppStyle=app_style_1.default;var app_status_1=require("./app-status");exports.AppStatus=app_status_1.default;var app_shell_1=require("./app-shell");exports.AppShell=app_shell_1.default;var app_view_1=require("./app-view");exports.AppView=app_view_1.default}),___scope___.file("app/components/app-router.jsx",function(exports,require,module,__filename,__dirname){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const framework_1=require("~/framework");const nerdy_polymer_elements_1=require("~/modules/nerdy-polymer-elements");const readOnly=!0,notify=!0;const bound={notify};class NerdyAppRouter extends framework_1.PolymerElement{constructor(){super(...arguments),this.data={},this.route={},this.tail={},this.pattern="/:page"}attached(){const appLocation=this.$.location,hash=appLocation&&appLocation.__hash||window.location.hash||"";appLocation&&appLocation.useHashAsPath&&!/^\//.test(hash)&&(appLocation.__hash=`/${hash}`)}_updatePage(page){if(void 0!==page&&(this.page=page,this.routes&&this.routes.length)){const route=this.routes[page||"entry"]||this.routes.fallback;this.set("route.current",route),this.set("route.name",route.name),this.set("view",route&&(route.view||route.src)||void 0,void 0)}}}NerdyAppRouter.tagName="nerdy-app-router",NerdyAppRouter.properties={page:{type:String,notify},view:{type:String,notify},data:{notify},route:{notify},tail:{notify},pattern:{notify},hash:Object.assign({},bound),path:Object.assign({},bound),query:Object.assign({},bound),useHash:{type:Boolean,value:()=>"file:"!==window.location.protocol}},NerdyAppRouter.observers=["_updatePage(data.page, routes)"],NerdyAppRouter.root="light",NerdyAppRouter.template=({})=>framework_1.Components.createElement("template",null,framework_1.Components.createElement(nerdy_polymer_elements_1.AppLocation,{id:"location",route:"{{route}}","use-hash-as-path":"[[useHash]]"}),framework_1.Components.createElement(nerdy_polymer_elements_1.AppRoute,{id:"route",route:"{{route}}",pattern:"{{pattern}}",data:"{{data}}",tail:"{{tail}}"})),exports.NerdyAppRouter=NerdyAppRouter,framework_1.Components.define(NerdyAppRouter),exports.default=NerdyAppRouter}),___scope___.file("modules/nerdy-polymer-elements/index.js",function(exports,require,module,__filename,__dirname){"use strict";function __export(m){for(var p in m)exports.hasOwnProperty(p)||(exports[p]=m[p])}Object.defineProperty(exports,"__esModule",{value:!0});const quasi_elements_1=require("~/modules/nerdy-elements/core/quasi-elements");__export(require("./app-elements")),__export(require("./iron-elements")),__export(require("./paper-elements")),exports.DomRepeat=quasi_elements_1.Constructor("dom-repeat");class Repeat{constructor(){const element=new exports.DomRepeat;const template=new quasi_elements_1.Template;return element.appendChild(template),element.appendChild=node=>(quasi_elements_1.Template.isTemplate(node)?template.replace(node):template.append([node]),node),element}}exports.Repeat=Repeat;class RepeatTemplate{constructor(){const element=new quasi_elements_1.Template;return element.setAttribute("is","dom-repeat"),element.appendChild=node=>(quasi_elements_1.Template.isTemplate(node)?element.replace(node):element.append([node]),node),element}}exports.RepeatTemplate=RepeatTemplate,exports.DomIf=quasi_elements_1.Constructor("dom-if");class If{constructor(){const element=new exports.DomIf;const template=new quasi_elements_1.Template;return element.appendChild(template),element.appendChild=node=>(node=>quasi_elements_1.Template.isTemplate(node)?template.replace(node):template.append([node]),node),element}}exports.If=If;class IfTemplate{constructor(){const element=new quasi_elements_1.Template;return element.setAttribute("is","dom-if"),element.appendChild=node=>(node=>quasi_elements_1.Template.isTemplate(node)?element.replace(node):element.append([node]),node),element}}exports.IfTemplate=IfTemplate}),___scope___.file("modules/nerdy-elements/core/quasi-elements.js",function(exports,require,module,__filename,__dirname){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const native_elements_1=require("./native-elements");exports.whenDefined=(tagName,prototype)=>new Promise((resolve,reject)=>{if(/\-/.test(tagName))return window.customElements.whenDefined(tagName).then(()=>resolve(window.customElements.get(tagName)));const constructor=tagName&&(prototype&&prototype.constructor||native_elements_1.getConstructor(tagName)||document.createElement(tagName).constructor);constructor?resolve(constructor):reject(ReferenceError(`Cannot resolve a constructor for '${tagName}' element tag.`))}),exports.Constructor=(tagName,prototype,options={})=>{tagName=tagName.replace(/([a-z](?=[A-Z])|\D(?=\d)|[A-Z](?=[A-Z][a-z]))/g,"$1-").toLowerCase();const constructor=(_a=class{constructor(tagName=constructor.tagName,options=constructor.options){const element=document.createElement(tagName);return element.constructor===HTMLElement?(element.setAttribute("not-defined",""),constructor.whenDefined.then(()=>(element.removeAttribute("not-defined"),element.setAttribute("has-been-defined","")))):element.setAttribute("is-defined",""),element}static[Symbol.hasInstance](object){return object instanceof HTMLElement&&object.localName===this.tagName}},_a.tagName=tagName,_a.options=options,_a.isDefined=!1,_a.whenDefined=exports.whenDefined(tagName,prototype).then(constructor=>(constructor.isDefined=!0,constructor)),_a);return Object.setPrototypeOf(constructor.prototype,prototype||HTMLElement.prototype),constructor;var _a};class Template extends exports.Constructor("template",HTMLTemplateElement.prototype){constructor(){super(),Object.setPrototypeOf(this,Template.prototype)}append(content){if(0<(content||0).length)for(const child of Array.from(content))this.content.appendChild(child);else"object"==typeof content&&(content instanceof HTMLTemplateElement?this.append(content.content.childNodes):content instanceof DocumentFragment?this.append(content.childNodes):content instanceof Node&&this.append([content]))}clear(){for(const child of Array.from(this.content.childNodes))this.content.removeChild(child)}replace(content){this.clear(),this.append(content)}}Template.isTemplate=object=>object&&object instanceof HTMLTemplateElement,exports.Template=Template,exports.Canvas=exports.Constructor("canvas")}),___scope___.file("modules/nerdy-polymer-elements/app-elements.js",function(exports,require,module,__filename,__dirname){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const quasi_elements_1=require("~/modules/nerdy-elements/core/quasi-elements");exports.AppBox=quasi_elements_1.Constructor("AppBox"),exports.AppDrawer=quasi_elements_1.Constructor("AppDrawer"),exports.AppDrawerLayout=quasi_elements_1.Constructor("AppDrawerLayout"),exports.AppGrid=quasi_elements_1.Constructor("AppGrid"),exports.AppHeader=quasi_elements_1.Constructor("AppHeader"),exports.AppHeaderLayout=quasi_elements_1.Constructor("AppHeaderLayout"),exports.AppLocation=quasi_elements_1.Constructor("AppLocation"),exports.AppRoute=quasi_elements_1.Constructor("AppRoute"),exports.AppRouteConverter=quasi_elements_1.Constructor("AppRouteConverter"),exports.AppToolbar=quasi_elements_1.Constructor("AppToolbar")}),___scope___.file("modules/nerdy-polymer-elements/iron-elements.js",function(exports,require,module,__filename,__dirname){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const quasi_elements_1=require("~/modules/nerdy-elements/core/quasi-elements");exports.IronDropdown=quasi_elements_1.Constructor("IronDropdown");class IronForm extends quasi_elements_1.Constructor("form"){constructor(){super(),this.setAttribute("is","iron-form")}}exports.IronForm=IronForm,exports.IronFlexLayout=quasi_elements_1.Constructor("IronFlexLayout"),exports.IronIcon=quasi_elements_1.Constructor("IronIcon"),exports.IronIconsetSvg=quasi_elements_1.Constructor("IronIconSvg"),exports.IronInput=quasi_elements_1.Constructor("IronInput"),exports.IronLabel=quasi_elements_1.Constructor("IronLabel"),exports.IronLocalstorage=quasi_elements_1.Constructor("IronLocalstorage"),exports.IronLocation=quasi_elements_1.Constructor("IronLocation"),exports.IronMediaQuery=quasi_elements_1.Constructor("IronMediaQuery"),exports.IronMeta=quasi_elements_1.Constructor("IronMeta"),exports.IronPages=quasi_elements_1.Constructor("IronPages"),exports.IronSelector=quasi_elements_1.Constructor("IronSelector"),exports.IronQueryParams=quasi_elements_1.Constructor("IronQueryParams")}),___scope___.file("modules/nerdy-polymer-elements/paper-elements.js",function(exports,require,module,__filename,__dirname){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const quasi_elements_1=require("~/modules/nerdy-elements/core/quasi-elements");exports.PaperDialog=quasi_elements_1.Constructor("PaperDialog"),exports.PaperTabs=quasi_elements_1.Constructor("PaperTabs"),exports.PaperButton=quasi_elements_1.Constructor("PaperButton"),exports.PaperCard=quasi_elements_1.Constructor("PaperCard"),exports.PaperInput=quasi_elements_1.Constructor("PaperInput"),exports.PaperInputContainer=quasi_elements_1.Constructor("PaperInputContainer"),exports.PaperIconButton=quasi_elements_1.Constructor("PaperIconButton"),exports.PaperRadioButton=quasi_elements_1.Constructor("PaperRadioButton"),exports.PaperRipple=quasi_elements_1.Constructor("PaperRipple"),exports.PaperStyles=quasi_elements_1.Constructor("PaperStyles");const Elements=require("./paper-elements");exports.PaperElements=Elements,exports.default=Elements}),___scope___.file("app/components/app-style.jsx",function(exports,require,module,__filename,__dirname){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const framework_1=require("~/framework");const styles_1=require("~/modules/nerdy-utils/styles");const quasi_elements_1=require("~/modules/nerdy-elements/core/quasi-elements");exports.QuasiStyle=quasi_elements_1.Constructor("style");class AppStyle extends exports.QuasiStyle{constructor(style=AppStyle.style+""){super(),this.appendChild(document.createTextNode("string"==typeof style&&style||""))}}exports.AppStyle=AppStyle,function(AppStyle){AppStyle.colors={primary:"#4285f4",secondary:"black",contrast:"white"};const{primary,secondary,contrast}=AppStyle.colors;AppStyle.variables={$Primary:primary,$PrimaryContrast:contrast,$Secondary:secondary,$SecondaryContrast:contrast},AppStyle.selectors=new styles_1.Selectors({host:{$:":host",drawerless:{$:":host([drawerless])",toggle:"\u2026 [drawer-toggle]"}},shell:{$:":host > #shell",toolbar:"\u2026 #topbar"},header:{$:"app-header",iconButton:"\u2026 paper-icon-button",toolbar:"\u2026 app-toolbar"},drawer:{$:"app-drawer",layout:{$:"\u2026-layout",wide:{$:"\u2026:not([narrow])",toggle:"\u2026 [drawer-toggle]"}},list:{$:".drawer-list",links:{$:"\u2026 a",selected:{$:"\u2026.iron-selected"}}}}}),AppStyle.host=AppStyle.selectors.host,AppStyle.shell=AppStyle.selectors.shell,AppStyle.header=AppStyle.selectors.header,AppStyle.iconButton=AppStyle.selectors.iconButton,AppStyle.drawer=AppStyle.selectors.drawer,AppStyle.drawerList=AppStyle.selectors.drawerList,AppStyle.$Primary=new styles_1.Var("Primary",primary),AppStyle.$PrimaryContrast=new styles_1.Var("PrimaryContrast",contrast),AppStyle.$Secondary=new styles_1.Var("Secondary",secondary),AppStyle.$SecondaryContrast=new styles_1.Var("SecondaryContrast",contrast),AppStyle.style={[AppStyle.host]:Object.assign({},AppStyle.variables,{display:"block"}),[AppStyle.header]:{color:AppStyle.$PrimaryContrast,backgroundColor:AppStyle.$Primary},[AppStyle.shell.toolbar]:{height:"40px",fontSize:"75%",color:AppStyle.$PrimaryContrast,backgroundColor:AppStyle.$Primary},[AppStyle.header.toolbar+" *[main-title] > *"]:{paddingRight:"1em"},[AppStyle.header.iconButton]:{$PaperIconButtonInkColor:AppStyle.$PrimaryContrast},[AppStyle.drawer.list]:{margin:"0 20px"},[AppStyle.drawer.list.links]:{display:"block",padding:"0 16px",color:AppStyle.$Secondary,textDecoration:"none",lineHeight:"40px"},[AppStyle.drawer.list.links.selected]:{color:"black",fontWeight:"bold"},[AppStyle.host.drawerless.toggle]:{display:"none"},[AppStyle.drawer.layout.wide.toggle]:{display:"none"},[Symbol.toPrimitive]:hint=>framework_1.StyleElement.generateStyleText(AppStyle.style)}}(AppStyle=exports.AppStyle||(exports.AppStyle={})),exports.default=AppStyle}),___scope___.file("app/components/app-status.jsx",function(exports,require,module,__filename,__dirname){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const framework_1=require("~/framework");const _1=require(".");class NerdyAppStatus extends framework_1.PolymerElement{}NerdyAppStatus.tagName="nerdy-app-status",NerdyAppStatus.style={":host":{position:"fixed",left:0,right:0,bottom:0,padding:0,margin:0,backgroundColor:"rgba(254, 254, 254, 0.5)",contain:"content",fontSize:"90%"},label:{fontWeight:"200"},"label::after":{content:":",paddingRight:"0.25em"},".status":{display:"flex",justifyContent:"space-around",alignContent:"center",padding:"0 0.5em",color:_1.AppStyle.$Primary,textShadow:"0 1.5px 0 rgba(255, 255, 255, 1)",backdropFilter:"blur(5px)",WebkitBackdropFilter:"blur(5px)"},".status ::slotted(*)":{padding:"0 1em",minWidth:"10%"}},NerdyAppStatus.template=({})=>framework_1.Components.createElement("template",null,framework_1.Components.createElement(framework_1.StyleElement,null,NerdyAppStatus.style),framework_1.Components.createElement("div",{class:"status"},framework_1.Components.createElement("slot",{id:"status-slot"}))),exports.NerdyAppStatus=NerdyAppStatus,framework_1.Components.define(NerdyAppStatus),exports.default=NerdyAppStatus}),___scope___.file("app/components/app-shell.jsx",function(exports,require,module,__filename,__dirname){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const framework_1=require("~/framework");const _1=require(".");const nerdy_polymer_elements_1=require("~/modules/nerdy-polymer-elements");class NerdyAppShell extends framework_1.PolymerElement{get $drawer(){return this.$&&this.$.drawer||null}get $header(){return this.$&&this.$.header||null}get $toolbar(){return this.$&&this.$.toolbar||null}closeDrawer(force=!1,{$:{drawer}}=this){drawer&&(!drawer.persistent||force)&&drawer.close&&drawer.close()}}NerdyAppShell.properties={displayTitle:{type:String},sitename:{type:String,reflectToAttribute:!0,notify:!0},drawerless:{type:Boolean,reflectToAttribute:!0}},NerdyAppShell.template=({})=>framework_1.Components.createElement("template",null,framework_1.Components.createElement(_1.AppStyle,null),framework_1.Components.createElement(nerdy_polymer_elements_1.AppDrawerLayout,{id:"shell",fullbleed:!0,"responsive-width":"960px"},framework_1.Components.createElement(nerdy_polymer_elements_1.IfTemplate,{if:"{{!drawerless}}"},framework_1.Components.createElement(nerdy_polymer_elements_1.AppDrawer,{id:"drawer",slot:"drawer"},framework_1.Components.createElement(nerdy_polymer_elements_1.AppToolbar,{id:"drawer-toolbar"},framework_1.Components.createElement("slot",{name:"drawer-toolbar"},"Menu")),framework_1.Components.createElement("slot",{name:"drawer-content"}))),framework_1.Components.createElement(nerdy_polymer_elements_1.AppHeaderLayout,{"has-scrolling-region":!0},framework_1.Components.createElement(nerdy_polymer_elements_1.AppHeader,{id:"header",slot:"header","x-condenses":!0,"x-reveals":!0,effects:"waterfall"},framework_1.Components.createElement(nerdy_polymer_elements_1.AppToolbar,{id:"topbar"},framework_1.Components.createElement(nerdy_polymer_elements_1.PaperIconButton,{icon:"my-icons:menu","drawer-toggle":!0}),framework_1.Components.createElement("div",{"main-title":!0},framework_1.Components.createElement("span",null,"[[sitename]]"),framework_1.Components.createElement("span",null,"[[title]]"))),framework_1.Components.createElement("slot",{name:"main-header"})),framework_1.Components.createElement("slot",{name:"main-content"})))),exports.NerdyAppShell=NerdyAppShell,framework_1.Components.define(NerdyAppShell),exports.default=NerdyAppShell}),___scope___.file("app/components/app-view.jsx",function(exports,require,module,__filename,__dirname){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const framework_1=require("~/framework");const nerdy_utils_1=require("~/modules/nerdy-utils");nerdy_utils_1.$entry(__filename||"nerdy-elements/components/nerdy-element.tsx",{FuseBox,Components:framework_1.Components});const _1=require(".");const iq_fft_1=require("../routes/iq-fft");const reflectToAttribute=!0;class NerdyAppView extends framework_1.PolymerElement{constructor(){if(super(),this.page="",this.view="",this.displayTitle="IQFFTDemo",this.sitename="NerdyApp: IQFFTDemo",this._resizing={},"function"==typeof this.handleResize){const{devicePixelRatio=1,initialRatio=devicePixelRatio,screen={}}=window||{};const{width:initialWidth,availWidth=initialWidth,initialAvailWidth=availWidth}=screen||{};this._resizing={initialRatio,initialWidth,initialAvailWidth,initialScreen:Object.assign({},screen)}}}get state(){return this._state}set state(state){this._state=state}get component(){return this._component}set component(component){this._activate(component)}get $shell(){return this.$&&this.$.shell||null}_href(path,useHash=this.state.useHash||!1){return(useHash?"#":"")+path.replace(/^\#/,"")}closeDrawer(force){this.$shell&&this.$shell.closeDrawer(...arguments)}attached(){}detatched(){}handleResize(event){this._resizeDebugger=this._resizeDebugger||(event=>{const{innerWidth:width,innerWidth,outerWidth}=window,{offsetWidth,clientWidth}=document.body;let scope={windowWidth:width};offsetWidth!==width&&(scope=Object.assign({},scope,{offsetWidth,clientWidth})),offsetWidth!==clientWidth&&(scope=Object.assign({},scope,{offsetWidth,clientWidth})),(innerWidth!==offsetWidth||innerWidth!==clientWidth)&&(scope=Object.assign({},scope,{innerWidth}));const{zoom:htmlZoom,scale:htmlScale}=window.getComputedStyle(document.documentElement);const{zoom:bodyZoom,scale:bodyScale}=window.getComputedStyle(document.body);scope=Object.assign({},scope,{html:[htmlZoom,htmlScale].join("|"),body:[bodyZoom,bodyScale].join("|")}),console.log(JSON.stringify(scope).replace(/([^\:\w]+\s*|\s+)/g," "),event)});const{initialAvailWidth,initialRatio,initialScreen,initialWidth}=this._resizing||{};const{devicePixelRatio:currentRatio,screen:{width:currentWidth,availWidth:currentAvailWidth}}=window;console.log({initialRatio,initialWidth,initialAvailWidth},{currentRatio,currentWidth,currentAvailWidth})}_viewChanged(view){if(!view||"string"!=typeof view)return;const container=this.$.pages;if(!container||!container.querySelector)return;clearTimeout(this._viewChangeTimeout);let component=container.querySelector(`[name='${view}']`);if(!component){const src=`../${view}`;const{default:View}=require(src);if(component="function"==typeof View?framework_1.Components.createElement(View,{name:view}," "):framework_1.Components.createElement("div",{name:view},"Oops! Something went wrong or we're just too slow... Sorry, this page is broken."),!component||!(component instanceof HTMLElement))return;container.appendChild(component),this._viewChangeTimeout=setTimeout(()=>this._viewChanged(view),100),this.log["#_viewChanged"]({view,View,container})}else this.component=component,container.selected=view,this.displayTitle=component.shortTitle||this.get("route.current.shortTitle")||"";this.closeDrawer()}_activate(component){if(component){const _component=this._component,container=component.container=this.$shell||this;_component!==component&&this._deactivate(_component),"function"==typeof component.activate&&component.activate(container),this._component=component}}_deactivate(component=this._component){component&&"function"==typeof component.deactivate&&component.deactivate()}}NerdyAppView.properties={route:{notify:!0},view:{type:String,observer:"_viewChanged",notify:!0}},NerdyAppView.template=({})=>framework_1.Components.createElement("template",null,framework_1.Components.createElement(_1.AppStyle,null),framework_1.Components.createElement(_1.AppShell,{id:"shell",sitename:"[[sitename]]",drawerless:!0},framework_1.Components.createElement(iq_fft_1.default,{slot:"main-content"}))),exports.NerdyAppView=NerdyAppView,framework_1.Components.define(NerdyAppView),exports.default=NerdyAppView}),___scope___.file("app/routes/iq-fft.jsx",function(exports,require,module,__filename,__dirname){var __decorate=__fsbx_decorate(arguments);"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=3>c?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;0<=i;i--)(d=decorators[i])&&(r=(3>c?d(r):3<c?d(target,key,r):d(target,key))||r);return 3<c&&r&&Object.defineProperty(target,key,r),r};Object.defineProperty(exports,"__esModule",{value:!0});const nerdy_elements_1=require("~/modules/nerdy-elements");const styles_1=require("../components/styles");const iq_fft_elements_1=require("../components/iq-fft-elements");const iq_fft_1=require("../models/iq-fft");const iq_fft_2=require("../modules/iq-fft");const nerdy_utils_1=require("~/modules/nerdy-utils");const stopEvent=event=>(event.stopPropagation(),event.preventDefault(),event);const notify=!0,reflectToAttribute=!0;const bits=(...args)=>args.reduceRight((a,b,i)=>a|+b<<i,0);const modifierKeys=["","ctrl","alt+","ctrl+alt","shift","ctrl+shift","alt+shift","ctrl+alt+shift","cmd","ctrl+cmd","alt+cmd","ctrl+alt+cmd","cmd","ctrl+shift+cmd","alt+shift+cmd","ctrl+alt+shift+cmd"];var SharedArrayBuffer=window.SharedArrayBuffer="undefined"==typeof SharedArrayBuffer?ArrayBuffer:SharedArrayBuffer;let IQFFTDemo=IQFFTDemo_1=class IQFFTDemo extends iq_fft_1.StatefulElement(nerdy_elements_1.PolymerElement){constructor(){super(...arguments),this.displayTitle="IQ:FFT Demo",this.filterMode=(this._filterMode()||"pass").toLocaleLowerCase(),this.timeouts={},this.processes={},this._droptargets=new Set,this.loaded=!1}get imageInput(){return this.$.imageInput}get imageInputCard(){return this.$.imageInputCard}get inverseImage(){return this.$.inverseImage}get fourierCanvasGroup(){return this.$.fourierCanvasGroup}get canvasBasis(){const $=this.$&&this.$.canvasControls;return $&&$.style?$.style.getPropertyValue("--canvas-basis"):NaN}set canvasBasis(canvasBasis){const $=this.$&&this.$.canvasControls;$&&$.style&&$.style.setProperty("--canvas-basis",canvasBasis)}get canvasZoom(){const $=this.$&&this.$.canvases;return $&&$.style?$.style&&+$.style.getPropertyValue("--canvas-zoom"):this._canvasZoom||NaN}set canvasZoom(canvasZoom){const $=this.$&&this.$.canvases;$&&$.style&&$.style.setProperty("--canvas-zoom",`${this._canvasZoom=isNaN(canvasZoom)?1:canvasZoom}`)}get canvasScale(){const $=this.$&&this.$.canvases;return $&&$.style?$.style&&+$.style.getPropertyValue("--canvas-zoom"):this._canvasScale||NaN}set canvasScale(canvasScale){canvasScale=this._canvasScale=isNaN(canvasScale)?1:canvasScale;const $=this.$&&this.$.canvases;$&&$.style&&$.style.setProperty("--canvas-zoom",`${canvasScale}`)}get progress(){return this._progress}set progress(progress){this._progress=1<progress||isNaN(progress)?1:progress}_drop(event){stopEvent(event)}_toggleFilterOverlayCanvas(){this.filterOverlayCanvas.classList.toggle("faded")}_toggleImageSelector(){this.$.imageSelector.toggle()}_toggleFilterCanvas(){this.filterCanvas.classList.toggle("faded")}_loadImage(sourceURI=this.sourceURI,force=!1){if(sourceURI){const params=["contrast","resolution","cycles"];const searchParams=!/^data:/.test(sourceURI)&&new URL(sourceURI).searchParams;const getValue=searchParams?(param,params=searchParams)=>+params.get(param):(param,urlString=sourceURI)=>+(("string"==typeof param?new RegExp(`/${param}=([\d\.]+)/`):param).exec(urlString)||["NaN"]).pop();[this.patchContrast,this.patchResolution,this.patchCycles]=params.map(param=>getValue(param))}const[defaultPatchSize,patchSizeUnit]=[7.06,"mm"];const pairsPerPatch=(pairsPerMillimeter,patchSize=defaultPatchSize)=>patchSize*pairsPerMillimeter;const bandRound=(band,factor=1/16)=>nerdy_utils_1.round(band/factor)*factor;const fundamental=cycles=>cycles;return sourceURI!==this.imageInput.value&&this.imageInput._updateValue(sourceURI),!this.patchResolution&&0<this.patchCycles&&(this.patchResolution=nerdy_utils_1.hypot(this.patchCycles)/defaultPatchSize[0]),0<this.patchResolution&&(this.bandFilter.band=bandRound(fundamental(pairsPerPatch(this.patchResolution))),this.patchCycles=this.patchCycles||nerdy_utils_1.opposite(this.patchResolution*defaultPatchSize)),this.notifyPath("bandFilter.band"),this._generateGrayDataFromImage(sourceURI,force)}_filterLabel(prefix,suffix){return[prefix,suffix].filter(Boolean).join(" ")}_filterMode(passMode=this.bandPassMode){return!1===passMode||/stop/.test(passMode)?"Stop":"Pass"}_filterMethod(dynamicFilter=this.dynamicFilter){return dynamicFilter?"Dynamic":"Static"}_overlaySize(canvasSize=this.canvasSize){return canvasSize=+canvasSize,_Mathmin(5120,10*canvasSize)}_disableSymmetricFilter({detail={},detail:{value=null}}={}){}_updateBand(band=this.bandFilter.band,size=this.bandFilter.size,dynamic=this.dynamicFilter){if(dynamic){const dynamicSize=(band=>size)(band);const{_bandSize=null}=this,sizeChange=null!==_bandSize&&_bandSize!==size;dynamic&&!isNaN(band)&&(sizeChange||size!==dynamicSize)&&(this.bandFilter.size=dynamicSize,this.notifyPath("bandFilter.size")),this._bandSize=this.bandFilter.size}}_updateFilter(filter=this.bandFilter,passMode=this.bandPassMode,size=this.canvasSize){return this._generateFilterData(filter instanceof Event?this.bandFilter:filter)}_updateContrast(autoContrast=this.autoContrast){return this._generateGrayDataFromFFTData()}_updateFilterScaling(filterScaling=this.filterScaling||!1){const{fourierCanvasGroup}=this,{style:fourierCanvasGroupStyle}=fourierCanvasGroup||{};fourierCanvasGroupStyle&&fourierCanvasGroupStyle.setProperty("--canvas-scale",filterScaling?"var(--focal-scale, 1)":"1"),this._simulateFilter()}_updateCanvasSize(canvasSize){if(canvasSize=+canvasSize||256,64>canvasSize)return this.canvasSize=64;if(4096<canvasSize)return this.canvasSize=4096;isNaN(canvasSize)&&(this.canvasSize=this.sourceCanvas.width),this._terminateProcess("all");const previousSize=this.previousCanvasSize=this.previousCanvasSize||this.grayData&&this.grayData.length||256;const{canvasControls,"canvas-area":canvasArea}=this.$;canvasControls&&canvasControls.style.setProperty("--canvas-basis",`${canvasSize}px`),canvasArea&&canvasArea.style.setProperty("--canvas-size",`${canvasSize}px`);const canvasZoom=+this.canvasZoom,canvasCount=2.5;return this.canvasZoom=canvasZoom*(previousSize/canvasSize),this.previousCanvasSize=canvasSize,requestAnimationFrame(()=>{this._defer(()=>{this.bandScaling&&this.bandFilter.setBasis(canvasSize)&&["low","high","band","size"].forEach(key=>this.notifyPath(`bandFilter.${key}`)),this._generateGrayDataFromImage(),this.$.canvases.classList.remove("disable-transitions")},"_updateCanvasSize",canvasSize/10000)}),!0}_propertiesChanged(final,change,previous){const paths=Object.keys(change);const _change=Object.assign({},change);if("canvasSize"in change){let{canvasSize}=change;const fallbackSize=isNaN(this.canvasSize)?this.sourceCanvas.width:this.canvasSize;change.canvasSize=canvasSize=_Mathmax(64,_Mathmin(4096,isNaN(canvasSize)?fallbackSize:+canvasSize||0))}paths.find(path=>path.startsWith("bandFilter."))&&(change.bandFilter=final.bandFilter);const result=super._propertiesChanged(final,change,previous)}attached(){this._zoomHandler=event=>{const{key,code,keyCode,ctrlKey,metaKey,shiftKey}=event;const zoomCode=(/^(?:Digit|)(Equal|Minus|\d)$/i.exec(code)||"")[1];const zoomModifier=ctrlKey||metaKey&&("0"===zoomCode?shiftKey:!shiftKey);const canZoom=this.$&&this.$.canvases&&this.$.canvases.style;const shouldZoom=zoomModifier&&zoomCode;if(canZoom&&shouldZoom){const coarseMode=!0;const parseZoom=zoom=>isNaN(zoom)?1:/\%$/.test(zoom)?parseInt(zoom,10)/100:/^(\d+|\d*\.\d+)$/.test(zoom)?parseFloat(zoom):+zoom||0.125;let zoom=parseZoom(this.$.canvases.style.getPropertyValue("--canvas-zoom"));if(isNaN(zoomCode))switch(zoomCode.toLocaleLowerCase()){case"equal":case"=":case"+":zoom=coarseMode?1.25*zoom:zoom+0.25;break;case"minus":case"-":case"_":zoom=coarseMode?0.75*zoom:zoom-0.25;break;default:return;}else zoom="0"===zoomCode?1:+zoomCode*(coarseMode?0.5:0.25);stopEvent(event);const canvasZoom=_Mathmax(0.125,_Mathmin(5,zoom));this.$.canvases.style.setProperty("--canvas-zoom",canvasZoom)}};const{_canvasZoom,_canvasSize,canvasSize}=this;const canvasZoom=this.canvasZoom=_canvasZoom||iq_fft_1.AppState.defaultZoom(canvasSize||256);const $canvasZoom=this.$.canvases.style.getPropertyValue("--canvas-zoom");const canvases=this.$.canvases.querySelectorAll("canvas");for(const canvas of canvases){canvas.getContext("2d").imageSmoothingQuality="high";const target=canvas.closest("[canvas-container]")||this;Object.defineProperty(canvas,"processes",{configurable:!0,get(){return _Mathmax(0,+target.getAttribute("processes")||0)},set(processes){processes=+processes||0,0<processes?target.setAttribute("processes",`${processes}`):target.removeAttribute("processes")}})}const{body}=document||{},{_dropHandler=stopEvent,_dragHandler=_dropHandler,_zoomHandler,_body}=this;_body&&body===body||(_body&&_body.removeEventListener&&(_body.removeEventListener("drop",_dropHandler),_body.removeEventListener("dragover",_dropHandler)),body.addEventListener("drop",this._dropHandler=_dropHandler,!1),body.addEventListener("dragover",this._dragHandler=_dragHandler,!1),body.addEventListener("keydown",_zoomHandler,!1));const useCapture=!0;const droptargets=[...this.root.querySelectorAll("[drop-target]")];const{imageInput}=this;for(const droptarget of droptargets){const target=droptarget.getAttribute("drop-target");const delegate="this"===target?this:this.$[target];if(!this._droptargets.has(droptarget)){this._droptargets.add(droptarget),droptarget.addEventListener("drop",e=>delegate._drop({dropspace:droptarget,type:"dragend"}),useCapture);for(const event of["drop","dragover","dragenter","dragleave"])droptarget.addEventListener(event,delegate[`_${event}`].bind(delegate),useCapture)}}const dragsources=[...this.root.querySelectorAll("[drag-source]")];for(const dragsource of dragsources){const source=dragsource.getAttribute("drag-source");const delegate="this"===source?this:this.$[source];delegate&&(delegate!==this&&dragsource.addEventListener("dragstart",e=>delegate._dragstart({dropspace:dragsource,type:"dragstart"}),useCapture),dragsource.addEventListener("dragstart",delegate._dragstart.bind(delegate),useCapture))}iq_fft_elements_1.FilterControls.attach(this);const{inverseCanvas,inverseCanvas:{width:dragWidth,height:dragHeight}}=this;this.dragImage||(this.dragImage=this.inverseImage),setTimeout(()=>{this.sourceURI=this.sourceURI||this._sourceURI},1024<this.canvasSize?2e3:1e3);const{resolutionTabs}=this.$;resolutionTabs&&resolutionTabs.notifyResize&&resolutionTabs.notifyResize()}_dragstart(event){const{dataTransfer}=event||{};const dragImage=this.$.inverseImage;if(dataTransfer){console.log([...(dataTransfer.types||[])].reduce((types,type)=>(types[type]=dataTransfer.getData(type),types),{})),dataTransfer.effectAllowed="copy",dataTransfer.dropEffect="copy",event.dataTransfer.setDragImage(dragImage,0,0);const src=dragImage.src,html=`<meta http-equiv="Content-Type" content="text/html;charset=UTF-8"><img src='${src} />`;return dataTransfer.setData("public.html",html),!1}}_terminateProcess(task,reason="terminated"){const timeouts=this.timeouts=this.timeouts||{};if("all"===task){const processes=this.processes;for(const timeout in timeouts)clearTimeout(timeouts[timeout]),delete timeouts[timeout];for(const process in this.processes)this._terminateProcess(process)}const process="object"==typeof task?task:"string"==typeof task&&this.processes[task];if("string"==typeof task&&(task in timeouts&&(clearTimeout(timeouts[task]),delete timeouts[task]),task in this.processes&&delete this.processes[task]),process)return"function"!=typeof process.abort||process.abort("terminated")}_defer(callback,id,timeout=0){const timeouts=this.timeouts=this.timeouts||{};return id?id in timeouts&&(clearTimeout(timeouts[id]),this._terminateProcess(id)):id="anonymous",new Promise((resolve,reject)=>{timeouts[id]=setTimeout(()=>{try{const result=callback();void 0===result?resolve():resolve(result)}catch(exception){reject(exception)}},timeout||0)})}async _generateGrayDataFromImage(sourceURI=this.sourceURI,force=!1,sourceImage){const Process=iq_fft_2.ConvertToGrayProcess,task=Process.id;const{processes={},processes:{[task]:previous},useWorker}=this;const{imageInput,sourceCanvas:canvas,sourceContext:context}=this;const{width,height}=canvas;if(clearTimeout(this.timeouts[task]),previous)if(previous.sourceURI!==sourceURI)this._terminateProcess(iq_fft_2.InverseFFTProcess.id,"outdated"),this._terminateProcess(iq_fft_2.ForwardFFTProcess.id,"outdated"),this._terminateProcess(previous,"outdated"),canvas.processes=0;else if(!force)return;if(!sourceImage&&!(sourceImage=this.sourceImage=sourceURI&&(await imageInput.getImage())))return canvas.processes=0,void 0;const process=processes[task]=new Process({input:sourceImage,parameters:{width,height,canvas,context,useWorker},deferred:!1});return process.next=({output:grayData,aborted})=>{aborted||(this.grayData=grayData,this._generateFFTDataFromGrayData(grayData))},await this._defer(process.execute,task,1),process.output}async _generateFFTDataFromGrayData(input,output){const Process=iq_fft_2.ForwardFFTProcess,task=Process.id;const{processes={},processes:{[task]:previous},useWorker}=this;const{forwardCanvas:canvas,forwardContext:context}=this;const{width,height}=canvas,length=width*height;if(previous){if(previous.input===input)return;this._terminateProcess(previous,"outdated"),canvas.processes=0}if(input&&input.length&&!(input.length<length)){const process=processes[task]=new Process({input,parameters:{width,height,context,useWorker}});return process.next=({output:fftData,aborted})=>{aborted||(canvas.processes=0,this.fftData=fftData,this._applyFilter({fftData}),this._renderFilter({fftData}))},await this._defer(process.execute,task,1),process.output}}async _generateGrayDataFromFFTData(input=this.filteredData||this.fftData,output){const Process=iq_fft_2.InverseFFTProcess,task=Process.id;const{processes={},processes:{[task]:previous},useWorker}=this;const{inverseCanvas:canvas,inverseContext:context}=this;const{width,height}=canvas,length=width*height;const{filterData,autoContrast}=this;if(previous&&(this._terminateProcess(previous,"outdated"),canvas.processes=0),input&&input.length&&!(input.length<length)){const process=processes[task]=new Process({input,parameters:{width,height,context,autoContrast,useWorker}});return Object.defineProperty(process,"progress",{get:()=>this._progress/100,set:progress=>this._progress=100*progress}),process.postrender=({output={}})=>(output.progress=1,canvas.processes=0,this.dragImage.src=canvas.toDataURL("image/png")),(await this._defer(process.execute,task,!useWorker&&256<width?100*(width||256)/256:1),process.output)}}async _generateFilterData(parameters=this.bandFilter||{},scope,{parameters:{lowValue,highValue},canvas=this.filterCanvas,width=canvas?canvas.width:256,height=canvas?canvas.height:256,low=_Mathmin(highValue,lowValue)||lowValue,high=_Mathmax(highValue,lowValue)||highValue}=Object.assign({},scope,{parameters})){const Process=iq_fft_2.GenerateFilterProcess,task=Process.id;const{processes={},processes:{[task]:previous},useWorker}=this;if(previous){const{low:_low,high:_high,width:_width,height:_height}=previous.parameters||{};if(_low===low&&_high===high&&_width===width&&_height===height)return await this._applyFilter();this._terminateProcess(previous,"outdated"),clearTimeout(this.timeouts[task])}parameters&&this._simulateFilter(parameters,{low,high,useWorker}),canvas.classList.add("tainted");const process=processes[task]=new Process({parameters:{low,high,width,height,useWorker}});return process.next=({output:filterData,aborted})=>aborted||(this.filterData=filterData,this.fftData&&this._applyFilter(),this._renderFilter()),await this._defer(process.execute,task,_Mathmax(1,100*(width-256)/256)),process.output}async _simulateFilter(parameters=this.bandFilter||{},scope,{parameters:{lowValue,highValue,useWorker=this.useWorker},canvas=this.filterOverlayCanvas,width=canvas?canvas.width:256,height=canvas?canvas.height:256,low=_Mathmin(highValue,lowValue)||lowValue,high=_Mathmax(highValue,lowValue)||highValue,scale}=Object.assign({},scope,{parameters})){const Process=iq_fft_2.SimulateFilterProcess,task=Process.id;const{processes={},processes:{[task]:previous}}=this;previous&&this._terminateProcess(previous,"outdated");const{fourierCanvasGroup,forwardCanvas}=this,{width:canvasWidth,height:canvasHeight}=forwardCanvas;const canvasZoom=+this.canvasZoom||1;const vmin=_Mathmin(canvasWidth,canvasHeight),vmax=_Mathmax(canvasWidth,canvasHeight);const focalMargin=vmin/5*canvasZoom,focalSize=_Mathmax(0<high?nerdy_utils_1.hypot(high)+focalMargin:0<low?nerdy_utils_1.hypot(low)+focalMargin:vmin);const focalScale=_Mathmax(1,vmin/focalSize||0);const overlayScale=width/canvasWidth;scale=(this.filterScaling&&focalScale||1)*overlayScale;const process=processes[task]=new Process({parameters:{low,high,width,height,scale,canvas,useWorker}});process.next=({aborted})=>{!aborted&&fourierCanvasGroup&&fourierCanvasGroup.style.setProperty("--focal-scale",focalScale)},process.execute()}async _renderFilter({filterData=this.filterData,fftData=this.fftData}=this){const Process=iq_fft_2.RenderFilterProcess,task=Process.id;const{processes={},processes:{[task]:previous},useWorker}=this;const{data,width,height,low,high}=filterData||{};const{filterCanvas:canvas,filterContext:context}=this;const{compositeCanvas,compositeContext}=this;if(previous){const{filterData:_filterData,fftData:_fftData}=previous.input||{};const{low:_low,high:_high,width:_width,height:_height}=_filterData||{};const sameFilter=_filterData===filterData||_low===low&&_high===high&&_width===width&&_height===height;const sameFFT=_fftData===fftData;if(filterData&&sameFilter&&sameFFT)return;this._terminateProcess(previous,"outdated")}if(canvas.classList.add("tainted"),filterData&&fftData&&!isNaN(width+height)){const process=processes[task]=new Process({input:{filterData,fftData},parameters:{context,width,height,compositeContext,useWorker}});return await process.execute(),canvas.classList.remove("tainted"),process.output}}async _applyFilter({filterData=this.filterData,fftData=this.fftData}=this){const Process=iq_fft_2.FilterFFTProcess,task=Process.id;const{processes={},processes:{[task]:previous},useWorker,bandPassMode:passMode,filterMode}=this;const{data,width,height,low,high}=filterData||{};const mode=this._filterMode(passMode).toLowerCase();if(clearTimeout(this.timeouts[task]),previous){const{filterData:_filterData,fftData:_fftData,mode:_mode}=previous.parameters||{};if(filterData&&_filterData===filterData&&_fftData===fftData&&mode===_mode)return;this._terminateProcess(previous,"outdated")}if(filterData&&fftData&&!isNaN(width+height)&&filterData){const process=processes[task]=new Process({input:{filterData,fftData},parameters:{width,height,mode,useWorker}});return process.next=({output:filteredData,aborted,parameters:{mode}})=>{aborted||(this.filterMode=mode,this.filteredData=filteredData,this._simulateFilter(),this._generateGrayDataFromFFTData(filteredData))},256<(await width)?this._defer(process.execute,task,100*(width||256)/256):process.execute(),process.output}}};IQFFTDemo.properties={displayTitle:{type:String,reflectToAttribute:!1},sourceURI:{type:String,notify,observer:"_loadImage"},bandFilter:{type:iq_fft_1.BandPassFilter},bandPassMode:{type:Boolean,value:iq_fft_1.AppState.bandPassMode},autoContrast:{type:Boolean,value:iq_fft_1.AppState.autoContrast},bandScaling:{type:Boolean,value:iq_fft_1.AppState.bandScaling},filterScaling:{type:Boolean,value:iq_fft_1.AppState.filterScaling},useWorker:{type:Boolean,value:iq_fft_1.AppState.useWorker},dynamicFilter:{type:Boolean,value:iq_fft_1.AppState.dynamicFilter},canvasSize:{type:Number,value:iq_fft_1.AppState.canvasSize},canvasZoom:{type:Number,value:iq_fft_1.AppState.canvasZoom},patchContrast:Number,patchResolution:Number,progress:Number},IQFFTDemo.observers=["_updateCanvasSize(canvasSize, useWorker)","_updateBand(bandFilter.band, bandFilter.size, dynamicFilter)","_updateFilterScaling(filterScaling)","_updateFilter(bandFilter, bandPassMode, canvasSize)","_updateContrast(autoContrast)"],IQFFTDemo.style=Object.assign({},styles_1.mixins.View,{":host":Object.assign({},styles_1.mixins.View[":host"],{$FlexPadding:"var(--flex-padding, 0.5em)"},iq_fft_elements_1.$Checkerboard,{$PaperTabInk:"var(--primary, gray)",$PaperTabsSelectionBarColor:"var(--primary, gray)",$CanvasBasis:"256px",$FilterScale:"1",$FocalScale:"1"}),".flex-fit":{flex:"1 1 auto",overflow:"hidden"},"#imageInput":{$MaxImageHeight:"150px"},":not(input)":{userSelect:"none",WebkitUserSelect:"none"},"[card-content]":{overflow:"hidden"}},iq_fft_elements_1.styles),IQFFTDemo.template=({})=>nerdy_elements_1.default.createElement("template",null,nerdy_elements_1.default.createElement(styles_1.Style,null,[styles_1.styleObject||{},IQFFTDemo_1.style]),nerdy_elements_1.default.createElement("div",{id:"content","on-drop":"_drop"},nerdy_elements_1.default.createElement("style",null,`
                @media (max-width: 800px) { [shrink-fit] { zoom: var(--shrink-zoom, 0.5); } :host { --shrink-zoom: 0.5; } }
                @media (max-height: 600px) { [shrink-fit] { zoom: var(--shrink-zoom, 0.5); } :host { --shrink-zoom: 0.5; }
                `),nerdy_elements_1.default.createElement(iq_fft_elements_1.Card,{id:"imageInputCard","drop-target":"imageInput",style:"height: 0 !important; overflow: hidden;"},"  ",nerdy_elements_1.default.createElement(iq_fft_elements_1.Section,null,nerdy_elements_1.default.createElement(iq_fft_elements_1.ImageInput,null))),nerdy_elements_1.default.createElement(iq_fft_elements_1.Card,null,nerdy_elements_1.default.createElement(iq_fft_elements_1.Section,null,nerdy_elements_1.default.createElement(iq_fft_elements_1.Canvases,{id:"canvases"}))),nerdy_elements_1.default.createElement(iq_fft_elements_1.Card,null,nerdy_elements_1.default.createElement(iq_fft_elements_1.Section,null,nerdy_elements_1.default.createElement(iq_fft_elements_1.FilterControls,null)),nerdy_elements_1.default.createElement(iq_fft_elements_1.Section,{"shrink-fit":!0,"x-flex-horizontal":!0,"flex-row":!0},nerdy_elements_1.default.createElement("div",{"flex-center":!0},"Contrast: [[asFixed(patchContrast)]]"),nerdy_elements_1.default.createElement("div",{"flex-center":!0},"Resolution: [[asFixed(patchResolution, 4)]]"),nerdy_elements_1.default.createElement("div",{"flex-center":!0},"Cycles: [[asFixed(patchCycles)]]"))))),IQFFTDemo=IQFFTDemo_1=__decorate([iq_fft_1.model(iq_fft_1.AppState)],IQFFTDemo),exports.IQFFTDemo=IQFFTDemo;for(const name of["source","forward","filter","filterOverlay","inverse","composite"]){const canvas=`${name}Canvas`,context=`${name}Context`,_context=`_${context}`;Object.defineProperties(IQFFTDemo.prototype,{[canvas]:{get(){return this.$[canvas]}},[context]:{get(){return this[canvas]&&this[_context]||(this[_context]=this[canvas].getContext("2d"))}}})}nerdy_elements_1.default.define(IQFFTDemo),exports.default=IQFFTDemo;var IQFFTDemo_1}),___scope___.file("app/components/styles.js",function(exports,require,module,__filename,__dirname){"use strict";function __export(m){for(var p in m)exports.hasOwnProperty(p)||(exports[p]=m[p])}Object.defineProperty(exports,"__esModule",{value:!0}),__export(require("./global-styles")),__export(require("./shared-styles")),__export(require("./nerdy-styles"));var nerdy_styles_1=require("./nerdy-styles");exports.nerdyStyles=nerdy_styles_1.default,exports.nerdy=nerdy_styles_1.default;var shared_styles_1=require("./shared-styles");exports.sharedStyles=shared_styles_1.default,exports.shared=shared_styles_1.default;var global_styles_1=require("./global-styles");exports.globalStyle=global_styles_1.default,exports.global=global_styles_1.default;var app_style_1=require("./app-style");exports.appStyle=app_style_1.default,exports.app=app_style_1.default,__export(require("~/modules/nerdy-utils/styles"));var nerdy_elements_1=require("~/modules/nerdy-elements");exports.Style=nerdy_elements_1.StyleElement,exports.style=nerdy_elements_1.style,exports.styling=nerdy_elements_1.styling;const styles=require("./styles");exports.default=styles}),___scope___.file("app/components/global-styles.js",function(exports,require,module,__filename,__dirname){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.flexStyles={"[flex], [flex-pad], [flex-wrap], [flex-space] [flex-column], [flex-row], [flex-fill]":{display:"flex"},"[flex] > *":{margin:"auto",marginTop:"auto",marginBottom:"auto",marginLeft:"auto",marginRight:"auto"},"[flex-row]":{flexDirection:"row",flex:"1 1 auto"},"[flex-row] > *":{marginTop:"auto",marginBottom:"auto"},"[flex-column]":{flexDirection:"column",flex:"1 1 auto"},"[flex-column] > *":{marginLeft:"auto",marginRight:"auto"},"[flex-wrap], [flex][auto-wrap]":{flexWrap:"wrap"},"[no-wrap]":{flexWrap:"nowrap"},"[flex-inline], [flex][inline]":{display:"inline-flex"},"[flex-fill], [flex] > [fill]":{flexGrow:1,flexBasis:"100%",alignSelf:"stretch",justifySelf:"stretch"},'[space*="around along"], [space=around], [space-around=""], [space-around~=along], [space-around-along]':{justifyContent:"space-around"},'[space*="around across"], [space=around], [space-around=""], [space-around~=across], [space-around-across]':{alignContent:"space-around"},'[space*="between along"], [space=between], [space-between=""], [space-between~=along], [space-between-along]':{justifyContent:"space-between"},'[space*="between across"], [space=between], [space-between=""], [space-between~=across], [space-between-across]':{alignContent:"space-between"},'[space*="evenly along"], [space=evenly], [space-evenly=""], [space-evenly~=along], [space-evenly-along]':{justifyContent:"space-evenly"},'[space*="evenly across"], [space=evenly], [space-evenly=""], [space-evenly~=across], [space-evenly-across]':{alignContent:"space-evenly"},'[center=""], [center~=along]:not([center*="self along"]), [center*="items along"], [center-items], [center-items~=along]':{justifyItems:"center"},'[center=""], [center~=across]:not([center*="self across"]), [center*="items across"], [center-items], [center-items~=across]':{alignItems:"center"},'[center=""], [center~=along]:not([center*="self along"]), [center*="content along"], [center-content], [center-content~=along]':{justifyContent:"center"},'[center=""], [center~=across]:not([center*="self across"]), [center*="content across"], [center-content], [center-content~=across]':{alignContent:"center"},'[center-self=""], [center-self~=along], [center*="self along"]':{justifySelf:"center"},'[center-self=""], [center-self~=across], [center*="self across"]':{alignSelf:"center"},'[stretch=""], [stretch~=along]:not([stretch*="self along"]), [stretch*="items along"], [stretch-items], [stretch-items~=along]':{justifyItems:"stretch"},'[stretch=""], [stretch~=across]:not([stretch*="self across"]), [stretch*="items across"], [stretch-items], [stretch-items~=across]':{alignItems:"stretch"},'[stretch=""], [stretch~=along]:not([stretch*="self along"]), [stretch*="content along"], [stretch-content], [stretch-content~=along]':{justifyContent:"stretch"},'[stretch=""], [stretch~=across]:not([stretch*="self across"]), [stretch*="content across"], [stretch-content], [stretch-content~=across]':{alignContent:"stretch"},'[stretch-self=""], [stretch-self~=along], [stretch*="self along"]':{justifySelf:"stretch"},'[stretch-self=""], [stretch-self~=across], [stretch*="self across"]':{alignSelf:"stretch"}},exports.globalStyle=Object.assign({"*::selection":{backgroundColor:"Highlight",color:"HighlighText"},"*:not(:defined), *:not(:defined) *, [not-defined], [not-defined] *":{opacity:"0 !important",color:"rgba(125, 127, 127, 0)",background:"rgba(125, 127, 127, 0)"},":defined, :defined *, ::slotted(*), *:not(:defined), *:not(:defined) *, [not-defined], [not-defined] *":{transitionProperty:"opacity, color, background",transitionTimingFunction:"ease-in-out",transitionDuration:"100ms"},"@keyframes fadeout":`from { opacity: 1; } to { opacity: 0; }`,"[hidden]":{opacity:0},"[pixelated]":{imageRendering:"pixelated"}},exports.flexStyles),exports.style=exports.globalStyle,exports.default=exports.globalStyle}),___scope___.file("app/components/shared-styles.jsx",function(exports,require,module,__filename,__dirname){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const framework_1=require("~/framework");const app_style_1=require("./app-style");const nerdy_styles_1=require("../components/nerdy-styles");const global_styles_1=require("./global-styles");exports.mixins={View:nerdy_styles_1.View,Paper:nerdy_styles_1.Paper,Flex:nerdy_styles_1.Flex},exports.styleObject=Object.assign({},nerdy_styles_1.Flex,{":root":Object.assign({},nerdy_styles_1.View[":root"]||{},app_style_1.default.variables||{})},global_styles_1.default),Object.setPrototypeOf(exports.styleObject,exports.mixins);const styleText=framework_1.StyleElement.generateStyleText(exports.styleObject);const styleBlob=new Blob([styleText],{type:"text/css"});exports.styleURL=URL.createObjectURL(styleBlob),exports.sharedStyles=`@import "${exports.styleURL}"`;class NerdyAppStyles extends framework_1.PolymerElement{}NerdyAppStyles.template=()=>framework_1.Components.createElement("template",null,framework_1.Components.createElement(framework_1.StyleElement,null,exports.sharedStyles)),exports.NerdyAppStyles=NerdyAppStyles,exports.stylesheet=framework_1.Components.createElement(framework_1.StyleElement,null,exports.sharedStyles),document.head.appendChild(exports.stylesheet),exports.sheet=exports.stylesheet.sheet,exports.default=NerdyAppStyles}),___scope___.file("app/components/nerdy-styles.js",function(exports,require,module,__filename,__dirname){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const global_styles_1=require("./global-styles");exports.flex={display:"flex",flex:1,flexDirection:"column",flexBasis:"auto"},Object.seal(Object.setPrototypeOf(exports.flex,{inline:Object.seal({display:"inline-flex"}),center:Object.seal(Object.setPrototypeOf(Object.assign({},exports.flex,{placeContent:"center",justifyContent:"center",alignContent:"center"}),{content:Object.seal(Object.assign({},exports.flex,{placeContent:"center",justifyContent:"center",alignContent:"center"})),items:Object.seal(Object.assign({},exports.flex,{placeItems:"center",justifyItems:"center",alignItems:"center"}))}))})),exports.vertical=Object.seal({flexDirection:"column"}),exports.horizontal=Object.seal({flexDirection:"row"}),exports.Flex=Object.setPrototypeOf({"[flex-horizontal]":Object.assign({},exports.flex,{justifyContent:"space-between",flexDirection:"row"}),"[flex-vertical]":Object.assign({},exports.flex,{justifyContent:"space-between",flexDirection:"column"}),"[flex-horizontal] > *, [flex-vertical] > *":{flexGrow:1},"[flex-horizontal] > *:not([hidden])":{margin:"0 var(--flex-padding, 0.5em)"},"[flex-horizontal] > *:not([hidden]):first-child":{marginLeft:0},"[flex-horizontal] > *:not([hidden]):last-child":{marginRight:0},"[flex-vertical] > *:not([hidden])":{margin:"var(--flex-padding, 0.5em) 0"},"[flex-vertical] > *:not([hidden]):first-child":{marginTop:0},"[flex-vertical] > *:not([hidden]):last-child":{marginBottom:0},"[flex-center-items]":Object.assign({},exports.flex.center.items),"[flex-center-content]":Object.assign({},exports.flex.center.content),"[flex-center]":Object.assign({},exports.flex.center.items,exports.flex.center.content)},exports.flex),exports.grid={display:"grid"},Object.seal(Object.setPrototypeOf(exports.grid,{inline:Object.seal({display:"inline-grid"}),center:Object.seal(Object.setPrototypeOf(Object.assign({},exports.grid,{placeContent:"center",justifyContent:"center",alignContent:"center"}),{content:Object.seal(Object.assign({},exports.grid,{placeContent:"center",justifyContent:"center",alignContent:"center"})),items:Object.seal(Object.assign({},exports.grid,{placeItems:"center",justifyItems:"center",alignItems:"center"}))}))})),exports.colorFill=(color="transparent",alpha=1)=>`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="1" height="1" style="opacity: ${0<=alpha?alpha:1}; fill: ${color};">
        <rect width="1" height="1" />
    </svg>')`.replace(/\s*\n\s*/g,""),exports.$ColorFill=`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="10" height="10" style="opacity: var(--color-alpha, 1);">
        <rect x="0" y="0" width="50" height="50" fill="white" style="fill: var(--color-fill, transparent);" />
    </svg>')`.replace(/\s*\n\s*/g,""),exports.$CheckerboardSize=`var(--checkerboard-size, 25px)`,exports.$Checkerboard={$CheckerboardSize:exports.$CheckerboardSize},exports.$CheckerboardImage=`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" style="opacity: 0.125;">
        <rect x="50" y="0" width="50" height="50" fill="black" />
        <rect x="0" y="50" width="50" height="50" fill="black" />
        <rect x="0" y="0" width="50" height="50" fill="white" />
        <rect x="50" y="50" width="50" height="50" fill="white" />
    </svg>')`.replace(/\s*\n\s*/g,""),exports.Patterns={checkerboard:Object.assign({},exports.$Checkerboard,{background:exports.$CheckerboardImage,backgroundPosition:`50% 50%`,backgroundSize:`${exports.$CheckerboardSize} ${exports.$CheckerboardSize}`})},exports.rounded=Object.seal({borderRadius:"0.5rem"}),exports.padded=Object.seal({padding:"0.25rem"}),exports.contained=Object.seal({objectFit:"contain",maxWidth:"100%",maxHeight:"100%"}),exports.unselectable=Object.seal({userSelect:"none",WebkitUserSelect:"none"}),exports.inert=Object.seal(Object.assign({pointerEvents:"none"},exports.unselectable)),exports.ease=Object.seal({transition:"all 125ms ease-in-out"}),exports.sticky=Object.seal({position:"sticky",top:"-1px",zIndex:1}),exports.blurring=Object.seal({backdropFilter:"blur(5px)",WebkitBackdropFilter:"blur(5px)"}),exports.Paper={".primary":"color: var(--primary-text-color); @apply --paper-font-body2",".secondary":"color: var(--secondary-text-color); @apply --paper-font-body1"},exports.View=Object.assign({},global_styles_1.default,{":root":{$Foreground:"rgba(0, 0, 0, 0.95)",$Background:"rgba(255, 255, 255, 0.85)",$PaperTabInk:"var(--primary, gray)",$PaperTabsSelectionBarColor:"var(--primary, gray)"},":host":Object.assign({},exports.flex.center,{flexDirection:"column"},exports.ease),":host > #toolbar":{color:"var(--foreground, #222)",backgroundColor:"var(--background, #eee)"},":host > #toolbar[blurring]":Object.assign({},exports.blurring),":host > #toolbar[sticky]":Object.assign({},exports.sticky),":host > #content":Object.assign({},exports.flex.center,{flexDirection:"column"},exports.padded)},exports.Flex),Object.assign(exports.View[":host"],exports.View[":root"]),exports.ImageField={":root":{$Foreground:"rgba(31, 31, 31, 0.5)",$Background:"transparent"},":host":Object.assign({},exports.flex.center,exports.ease),"*":Object.assign({},exports.ease),"#dropspace":Object.assign({},exports.flex.center,exports.horizontal,exports.padded,exports.unselectable,exports.ease,{backgroundColor:"var(--background, rgba(159, 159, 159, 0.125))",color:"var(--foreground, rgba(31, 31, 31, 0.5))",fontWeight:200,letterSpacing:"0.025em",minWidth:"5em",minHeight:"5em",height:"auto"}),"#dropspace.dragover":{$Foreground:"rgba(255, 255, 255, 1)",$Background:"rgba(159, 159, 255, 0.375)"},"#dropspace #preview":Object.assign({},exports.flex.center,{flexShrink:"initial",flexGrow:"initial",flexBasis:"initial",flexWrap:"nowrap",minWidth:"0"}),"#dropspace #placeholder-label, #dropspace #placeholder-label *1︎":Object.assign({},exports.inert),"#dropspace #placeholder-label":Object.assign({},exports.grid.center,exports.padded,{margin:"1em"},exports.inert,{minWidth:"100%",height:"auto",border:"2.5px dotted var(--foreground, rgba(31, 31, 31, 0.5))",opacity:0.75,textAlign:"center",transition:[exports.ease.transition,"height 750ms ease-in-out"].join(", ")}),"#dropspace #preview-image":Object.assign({},exports.contained),"*:not([visible])[hidden]":{display:"none !important"}},exports.DropTarget={".dragover[drop-target]":{backgroundColor:"rgba(255, 191, 127, 0.375)"},".dragover[drop-target] > *":{transition:"all 1s ease-in-out",backgroundColor:"rgba(255, 191, 127, 0.375)",filter:"blur(1px)",opacity:"0.75"},".dragover[drop-target]::before":{display:"flex",justifyContent:"center",alignItems:"center",position:"absolute",zIndex:1,width:"100%",height:"100%",content:"Drop image here",color:"white",fontWeight:400,letterSpacing:"0.025em",fontSize:"1.5em",textShadow:"0 0 30px rgba(0, 0, 0, 0.75), 0 0 20px rgba(255, 255, 255, 0.75), 0 0 10px rgba(255, 191, 127, 0.75), 0 1px 1px rgba(0, 0, 0, 0.5)",pointerEvents:"none"}},Object.assign(exports.ImageField[":host"],exports.ImageField[":root"]);const NerdyStyles=require("./nerdy-styles");exports.default=NerdyStyles}),___scope___.file("app/components/iq-fft-elements.jsx",function(exports,require,module,__filename,__dirname){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const nerdy_elements_1=require("~/modules/nerdy-elements");const iq_fft_1=require("../components/iq-fft");exports.BandInput=iq_fft_1.BandInput,exports.KeyEvent=iq_fft_1.KeyEvent;const iq_fft_2=require("../components/iq-fft");exports.Toolbar=iq_fft_2.Toolbar,exports.Header=iq_fft_2.Header,exports.Layout=iq_fft_2.Layout,exports.Button=iq_fft_2.Button,exports.Card=iq_fft_2.Card,exports.Input=iq_fft_2.Input,exports.Section=iq_fft_2.Section;const iq_fft_3=require("../components/iq-fft");exports.FilterControls=iq_fft_3.FilterControls,exports.ImageInput=iq_fft_3.ImageInput,exports.ImageSelector=iq_fft_3.ImageSelector;const styles_1=require("../components/styles");exports.$Checkerboard=styles_1.$Checkerboard;const iq_fft_4=require("../modules/iq-fft");exports.Canvas=iq_fft_4.Canvas;const{round}=Math;exports.canvasSize=2048;const{hardwareConcurrency=1}="undefined"==typeof navigator?{}:navigator;const{height:screenHeight,width:screenWidth}="undefined"==typeof screen?{}:screen,screenSize=_Mathmax(screenWidth||480,screenHeight||480);const canvasSizes=[128,256];(2<hardwareConcurrency||512<=screenSize)&&(canvasSizes.push(512),(3<hardwareConcurrency||1024<=screenSize)&&canvasSizes.push(1024),4<hardwareConcurrency&&canvasSizes.push(2048)),exports.ControlBar=(value,label=value)=>nerdy_elements_1.default.createElement("paper-tabs",{class:"control-bar","control-bar":!0}),exports.ToggleItem=(value,label=value||"")=>nerdy_elements_1.default.createElement("paper-tab",{class:"toggle-item","toggle-item":!0,value:value},label||[]),exports.ToggleButton=(label="")=>nerdy_elements_1.default.createElement("paper-button",{class:"addon toggle-button","toggle-button":!0},label),exports.ToggleSwitch=(label="")=>nerdy_elements_1.default.createElement("paper-button",{toggles:!0,class:"addon toggle-switch","toggle-switch":!0,addon:!0},label),exports.CanvasControls=({}={})=>nerdy_elements_1.default.createElement("div",{id:"canvasControls","canvas-controls":!0,"flex-horizontal":!0,style:"flex-wrap: nowrap; flex: none;"}," ",nerdy_elements_1.default.createElement(exports.ControlBar,{id:"resolutionTabs",style:"display: flex; flex: 1 1 20em; min-width: 150px;",selected:"{{canvasSize}}","attr-for-selected":"value",scrollable:!0,"fit-container":!0},canvasSizes.map(value=>nerdy_elements_1.default.createElement(exports.ToggleItem,{value:value},1e3<value?round(value/1e3)+"k":value)),nerdy_elements_1.default.createElement("div",{class:"addon-controls",style:"display: flex; flex: 1 1 1em; min-width: min-content; width: min-content; place-content: center; place-items: center;"},nerdy_elements_1.default.createElement(exports.ToggleSwitch,{id:"filterScalingSwitch",active:"{{filterScaling}}",title:"Toggle filter-size-based zooming to help with visual fine-tuning."},nerdy_elements_1.default.createElement("b",null,"\u25A3")),nerdy_elements_1.default.createElement(exports.ToggleSwitch,{id:"autoContrastSwitch",active:"{{autoContrast}}",title:"Use contrast scaling for inverse transformations."},nerdy_elements_1.default.createElement("b",null,"\u25D0")),nerdy_elements_1.default.createElement(exports.ToggleSwitch,{id:"useWorkerSwitch",active:"{{useWorker}}",title:"Use multi-threaded processing."},nerdy_elements_1.default.createElement("b",null,"\u2726")))));const $Primary="var(--primary, #3f3fff)";const $Contrast="var(--primary-contrast, white)";exports.CanvasControlsStyles=exports.CanvasControls.style={"#canvasControls":{backgroundColor:"var(--background, rgba(255, 255, 255, 0.75))",$CanvasBasis:"256px",zIndex:1,alignSelf:"flex-start"},"#canvasControls > *":{flex:"1 1 auto",color:"rgba(0, 0, 0, 0.75)"},"#canvasControls paper-button":{borderRadius:0,height:"100%",margin:"auto"},"#canvasControls *[aria-selected=true], #canvasControls *[active]":{backgroundImage:styles_1.colorFill($Primary,0.375),fontWeight:700,color:$Contrast,textShadow:`0 1px 0px ${$Primary}, 0 1px 2px ${$Primary}`}},exports.CanvasContainer=({$canvasSize="[[canvasSize]]"}={})=>nerdy_elements_1.default.createElement("div",{class:"canvas-container","canvas-container":!0}),exports.CanvasGroup=({$canvasSize="[[canvasSize]]"}={})=>nerdy_elements_1.default.createElement("div",{"canvas-group":!0}),exports.CanvasContainerStyles=exports.CanvasContainer.style={"[canvas-area], [canvas-container], [canvas-group]":{display:"flex"},"[canvas-area]":{zoom:"var(--canvas-zoom, 1)",zIndex:-1,flexWrap:"wrap",flex:"1",justifyContent:"center",maxHeight:"min(100%, calc(calc(100vh - 300px) / var(--canvas-zoom, 1)))",maxWidth:"calc(100vw / var(--canvas-zoom, 1))",width:"100%",height:"max-content",overflowY:"scroll"},"[canvas-area] canvas, [canvas-area] img":{imageRendering:"optimizeQuality"},"[canvas-container], [canvas-group]":{flex:"1 1 auto",overflow:"hidden",margin:0,justifyContent:"center",alignItems:"center",alignContent:"center",filter:"none",backgroundColor:"transparent"},"[canvas-container]":{},"[canvas-group]":{flexFlow:"row wrap"},"[canvas-container] > *":{transition:"opacity 125ms ease-in-out"},"[canvas-container] > *:not([canvas-container]) ":{backgroundColor:"#fff"},"[canvas-container] > [layer-group]":{position:"relative",backgroundColor:"rgb(127, 127, 127)"},"[canvas-container] > [layer-group] > *":{position:"absolute",top:0,left:0,display:"block"},"[canvas-container] > [layer-group] > :first-child":{position:"relative"},"[canvas-container] > [layer-group] > .faded, [canvas-container] > [layer-group] .tainted":{opacity:"0.25 !important"},"[canvas-container] > [layer-group] > draggable":{opacity:"0"},"[canvas-container] > [layer-group]:hover > draggable":{opacity:"1"},"[canvas-container][processes]":{transition:"filter 2s ease-in 1ms",filter:"brightness(50%) contrast(50%) sepia(100%)"},"[canvas-container] [canvas-fit]":{maxWidth:"var(--canvas-size, 256px)",maxHeight:"var(--canvas-size, 256px)"}},exports.LayerGroup=({}={})=>nerdy_elements_1.default.createElement("div",{"layer-group":!0}),exports.Canvases=({$canvasSize="[[canvasSize]]",$overlaySize="[[_overlaySize(canvasSize)]]"}={})=>nerdy_elements_1.default.createElement("div",{id:"canvases","canvases-container":!0},nerdy_elements_1.default.createElement(exports.CanvasControls,null),nerdy_elements_1.default.createElement("div",{id:"canvas-area","canvas-area":!0,"x-flex-horizontal":!0,style:""},nerdy_elements_1.default.createElement(exports.CanvasGroup,{"shrink-fit":!0,style:"flex-basis: calc(var(--canvas-size, 256px) / 2)"}," ",nerdy_elements_1.default.createElement(exports.CanvasContainer,{style:"border: 0 none; min-width: calc(var(--canvas-size, 256px) * 0.75);"},nerdy_elements_1.default.createElement(exports.LayerGroup,{style:"background-color: rgb(127, 127, 127);","drop-target":"imageInput","drop-caption":"Drop source image"},nerdy_elements_1.default.createElement(iq_fft_4.Canvas,{width:$canvasSize,height:$canvasSize,id:"sourceCanvas","drag-source":"imageInput",draggable:"true"}))),nerdy_elements_1.default.createElement(exports.CanvasContainer,{style:"border: 0 none; min-width: calc(var(--canvas-size, 256px) * 0.75);"},nerdy_elements_1.default.createElement(exports.LayerGroup,{style:"background-color: rgb(127, 127, 127);"},nerdy_elements_1.default.createElement("img",{draggable:!0,id:"inverseImage",width:$canvasSize,height:$canvasSize}),nerdy_elements_1.default.createElement(iq_fft_4.Canvas,{id:"inverseCanvas",width:$canvasSize,height:$canvasSize,style:"pointer-events: none;"})))),nerdy_elements_1.default.createElement(exports.CanvasContainer,{id:"fourierCanvasContainer",style:"flex-basis: var(--canvas-size, 256px);"},nerdy_elements_1.default.createElement(exports.LayerGroup,{id:"fourierCanvasGroup",style:"background-color: rgb(127, 127, 127);"},nerdy_elements_1.default.createElement("img",{draggable:!0,id:"forwardCanvasImage",width:$canvasSize,height:$canvasSize,"on-click":"_toggleFilterOverlayCanvas"}),nerdy_elements_1.default.createElement(iq_fft_4.Canvas,{id:"forwardCanvas","scale-canvas":!0,width:$canvasSize,height:$canvasSize,style:"pointer-events: none"}),nerdy_elements_1.default.createElement(iq_fft_4.Canvas,{id:"filterOverlayCanvas","canvas-fit":!0,width:2048,height:2048,style:"pointer-events: none;"}))),nerdy_elements_1.default.createElement(exports.CanvasContainer,{style:"display: none;"},nerdy_elements_1.default.createElement(exports.LayerGroup,{style:"background-color: rgb(127, 127, 127);"},nerdy_elements_1.default.createElement(iq_fft_4.Canvas,{id:"compositeCanvas",width:$canvasSize,height:$canvasSize,"on-click":"_toggleFilterCanvas"}),nerdy_elements_1.default.createElement(iq_fft_4.Canvas,{id:"filterCanvas",width:$canvasSize,height:$canvasSize,style:"pointer-events: none;"}))))),exports.CanvasesStyles=exports.Canvases.style=Object.assign({"[canvases-container]":Object.assign({$FlexPadding:"-0.5px",border:"1px solid rgba(63, 63, 63, 0.75)"},styles_1.Patterns.checkerboard,{$CheckerboardSize:"25px",backgroundColor:"#fff",maxWidth:"100%",maxHeight:"100%",$CanvasScale:"1"}),"[canvases-container] [scale-canvas]":{transition:"transform 1s ease-in-out",transformOrigin:"center",marginLeft:"50%",marginTop:"50%",zoom:"calc(1 / var(--canvas-zoom, 1))",transform:"translate(-50%, -50%) scale(calc(var(--canvas-zoom, 1) * var(--canvas-scale, 1)))"},"[canvases-container] > *":{fontSize:"initial",userSelect:"none"}},exports.CanvasContainerStyles,exports.CanvasControlsStyles,styles_1.DropTarget),exports.styles=Object.assign({},exports.CanvasesStyles)}),___scope___.file("app/components/iq-fft/index.js",function(exports,require,module,__filename,__dirname){"use strict";function __export(m){for(var p in m)exports.hasOwnProperty(p)||(exports[p]=m[p])}Object.defineProperty(exports,"__esModule",{value:!0}),__export(require("./common")),__export(require("./band-input")),__export(require("./image-selector")),__export(require("./image-input")),__export(require("./filter-controls"))}),___scope___.file("app/components/iq-fft/common.js",function(exports,require,module,__filename,__dirname){"use strict";function factory(factoryClass){const _a=factoryClass,{template}=_a,factory=__rest(_a,["template"]);return Object.assign("function"==typeof template?template:()=>template,Object.assign({},factory))}var __rest=this&&this.__rest||function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&0>e.indexOf(p)&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,p=Object.getOwnPropertySymbols(s);i<p.length;i++)0>e.indexOf(p[i])&&(t[p[i]]=s[p[i]]);return t};Object.defineProperty(exports,"__esModule",{value:!0});var nerdy_polymer_elements_1=require("~/modules/nerdy-polymer-elements");exports.Toolbar=nerdy_polymer_elements_1.AppToolbar,exports.Header=nerdy_polymer_elements_1.AppHeader,exports.Layout=nerdy_polymer_elements_1.AppHeaderLayout,exports.Dialog=nerdy_polymer_elements_1.PaperDialog,exports.Button=nerdy_polymer_elements_1.PaperButton,exports.Card=nerdy_polymer_elements_1.PaperCard,exports.Input=nerdy_polymer_elements_1.PaperInput,exports.notify=!0,exports.reflectToAttribute=!0;var AbstractEvent;(function(AbstractEvent){AbstractEvent.stop=event=>(event.stopPropagation(),event.preventDefault(),event)})(AbstractEvent=exports.AbstractEvent||(exports.AbstractEvent={})),exports.Event=AbstractEvent,exports.stop=AbstractEvent.stop,exports.factory=factory;const section=document.createElement("div");section.setAttribute("card-content",""),section.classList.add("card-content"),exports.Section=()=>section.cloneNode()}),___scope___.file("app/components/iq-fft/band-input.jsx",function(exports,require,module,__filename,__dirname){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const framework_1=require("~/framework");const nerdy_polymer_elements_1=require("~/modules/nerdy-polymer-elements");const common_1=require("./common");class BandInputHelper{constructor(element,host=element.__dataHost,root){this.element=element,this.host=host,this.root=root,this.defaultStep=1,this.defaultType="number",this.keyEventMatches=(event,eventString)=>null;const capture=!1,{events=BandInputHelper.events}=this.constructor;root&&root.log&&(this.log=root.log["@BandInput"]||root.log),this.handle||(this.handle=(type,event)=>this.log.type(event));for(const type of events)element.addEventListener(type,this.handle.bind(this,type),capture);this.handleFocused&&host.addEventListener("focused-changed",()=>this.handleFocused(),!1),host&&"keyboardEventMatchesKeys"in host&&(this.keyEventMatches=host.keyboardEventMatchesKeys),host&&host.$&&host.$.container&&host.$.container.style&&(host.$.container.style.width="100%")}static initialize(element,root){const{nativeInput}=element.$||{};return nativeInput?nativeInput.bandInputHandler=new BandInputHelper(nativeInput,element,root||element.domHost):nerdy_polymer_elements_1.PaperInput.whenDefined.then(()=>BandInputHelper.initialize(element)),element}handleFocused({host,defaultType="number",host:{type=defaultType},element}=this){host.focused?(element.type="text",element.setAttribute("inputmode","numeric")):(element.type="number",this.update(null,0)),host&&(host.alwaysFloatLabel=host.focused)}handle(type=null,event={}){if("object"==typeof type)return this.handle(type.type||null,event=type);const defaultStep=1,stepKey=(/Arrow(Up|Down)/.exec(event.key)||"")[1];return stepKey?this.handleStep(event,stepKey):"."===event.key?this.handleDecimal(event):"Backspace"===event.key&&this.handleDelete(event)}update(value=null,timeout=75){clearTimeout(this.updateTimeout);const{element,host}=this;(element||host)&&(this.updateTimeout=setTimeout(()=>{const newValue=null===value?(element||{}).value:value;host&&host.updateValueAndPreserveCaret&&host.updateValueAndPreserveCaret(newValue)},-1<timeout?timeout:75))}handleStep(event,stepKey=(/Arrow(Up|Down)/.exec(event.key)||"")[1],{defaultStep,host,element,element:{step=defaultStep,min=NaN,max=NaN,value=NaN}}=this){const{type,ctrlKey,shiftKey,altKey,repeat}=event;const stepper=`step${stepKey}`,up="Up"===stepKey,down="Down"===stepKey;if("function"==typeof element[stepper])common_1.AbstractEvent.stop(event);else return;const round=value=>Math[up?"ceil":down?"floor":"round"](value);let nextStep=+step||defaultStep;value=+(value||min)||0,element.type="number";const state=this[`${stepKey}Key`]||(this[`${stepKey}Key`]={});"keyup"===type?(nextStep=state.repeated?0:defaultStep*(ctrlKey?0.25:1),state.repeats=null,state.repeated=null):"keydown"===type&&(state.repeated=repeat,state.repeats=(state.repeats||0)+1,nextStep=state.repeated?defaultStep*(ctrlKey?0.25:shiftKey?_Mathmin(5,state.repeats||1):1):0),element.step=nextStep||defaultStep,value/nextStep%1?this.update(round(value/nextStep)*nextStep,0):0<nextStep&&(element[stepper](),element.step=defaultStep,this.update(null,ctrlKey?0:void 0))}handleDecimal(event,{element,element:{min=NaN,max=NaN,value=NaN}}=this){element.type="text","."===event.key&&-1<element.value.indexOf(".")&&common_1.AbstractEvent.stop(event);const[match,sign,integer=isNaN(min)?_Mathround(value)||0:min,decimal=0]=/([\-\+]?)(\d*)(?:\.?)(\d*)/.exec(element.value)||"";const newValue=`${sign}${integer||"0"}.${decimal||"0"}`;element.value=newValue.replace(/(\..*?)\..*?$/,"$1"),element.setSelectionRange(newValue.indexOf(".")+1,newValue.length)}handleDelete(event,{element,element:{min=NaN,max=NaN,value=NaN}}=this){element.type="text";const decimalPosition=element.value.indexOf(".");if(-1<decimalPosition){const deltaStart=element.selectionStart-decimalPosition;if((!deltaStart||1==deltaStart)&&element.selectionEnd>element.selectionStart){common_1.AbstractEvent.stop(event);const[match,sign,integer=isNaN(min)?_Mathround(value)||0:min,decimal=0]=/([\-\+]?)(\d*)(?:\.?)(\d*)/.exec(value)||"";const newValue=`${sign}${integer}`;element.value=newValue,element.selectionEnd=(element.selectionStart=_Mathmin(newValue.length,element.selectionStart))+1,this.update(+newValue)}else if(-1<deltaStart){common_1.AbstractEvent.stop(event);const newValue=element.value.slice(0,element.selectionStart)+element.value.slice(element.selectionEnd);element.value=newValue.replace(/(\..*?)\..*?$/,"$1"),element.selectionEnd=element.selectionStart=_Mathmin(newValue.length,element.selectionStart),setTimeout(()=>this.handleDecimal(event),0)}}}}BandInputHelper.events=["keydown","keyup","keypress"],exports.BandInputHelper=BandInputHelper,exports.BandInput=common_1.factory({template:()=>framework_1.Components.createElement(nerdy_polymer_elements_1.PaperInput,{"band-input":!0,type:"number","prevent-invalid-input":!0,"allowed-pattern":"[.0-9]",inputmode:"numeric"}),helper:BandInputHelper}),exports.default=exports.BandInput}),___scope___.file("app/components/iq-fft/image-selector.jsx",function(exports,require,module,__filename,__dirname){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const framework_1=require("~/framework");const common_1=require("./common");const nerdy_image_grid_1=require("../nerdy-image-grid");exports.ImageSelector=({}={})=>framework_1.Components.createElement(common_1.Dialog,{id:"imageSelector"},framework_1.Components.createElement("h2",null,"Select Image"),framework_1.Components.createElement("paper-dropdown-menu",{label:"Draft to discard"},framework_1.Components.createElement("paper-listbox",{class:"dropdown-content",slot:"dropdown-content"},framework_1.Components.createElement("paper-item",null,"Draft 1"),framework_1.Components.createElement("paper-item",null,"Draft 2"),framework_1.Components.createElement("paper-item",null,"Draft 3"),framework_1.Components.createElement("paper-item",null,"Draft 4"))),framework_1.Components.createElement(nerdy_image_grid_1.default,null)),exports.default=exports.ImageSelector}),___scope___.file("app/components/nerdy-image-grid.jsx",function(exports,require,module,__filename,__dirname){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const framework_1=require("~/framework");const styles_1=require("../components/styles");const notify=!0,reflectToAttribute=!0;class NerdyImageGrid extends framework_1.PolymerElement{constructor(){super(),this.image=new Image,this.rows=10,this.columns=10,this.image.onload=()=>this.slice}get container(){return this.$.container}get canvas(){return this.$.canvas}get context(){return this._context||(this._context=this.canvas.getContext("2d"))}slice(){const{image,canvas,context}=this}}NerdyImageGrid.style={":root":{$Foreground:"rgba(31, 31, 31, 0.5)",$Background:"transparent"},":host":Object.assign({},styles_1.flex.center,styles_1.ease),"*":Object.assign({},styles_1.ease),"#container":Object.assign({},styles_1.flex.center,styles_1.horizontal,{minWidth:"5em",minHeight:"5em",height:"auto"}),"#container > *":{position:"absolute",display:"block",top:0,left:0,width:"100%",height:"100%"},"#container > :first-child":{position:"relative"},"#image":{$MaxImageHeight:"var(--max-image-height, 100vh)",maxHeight:"var(--max-image-height, 100vh) !important"},"*[not-visible]":{visibility:"hidden"}},NerdyImageGrid.properties={src:{type:String,notify,reflectToAttribute},rows:{type:Number,notify,reflectToAttribute},columns:{type:Number,notify,reflectToAttribute}},NerdyImageGrid.template=()=>framework_1.Components.createElement("template",null,framework_1.Components.createElement(styles_1.Style,null,NerdyImageGrid.style),framework_1.Components.createElement("div",{id:"container"},framework_1.Components.createElement("canvas",{id:"canvas",style:"display: none; pointer-events: none;"}),framework_1.Components.createElement("div",{id:"grid"}))),exports.NerdyImageGrid=NerdyImageGrid,framework_1.Components.define(NerdyImageGrid),exports.default=NerdyImageGrid}),___scope___.file("app/components/iq-fft/image-input.jsx",function(exports,require,module,__filename,__dirname){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const framework_1=require("~/framework");const nerdy_image_field_1=require("../../components/nerdy-image-field");exports.ImageInput=()=>framework_1.Components.createElement(nerdy_image_field_1.PaperImageField,{id:"imageInput","value-":"{{sourceURI}}"}),exports.default=exports.ImageInput}),___scope___.file("app/components/nerdy-image-field.jsx",function(exports,require,module,__filename,__dirname){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const framework_1=require("~/framework");const styles_1=require("../components/styles");const nerdy_utils_1=require("~/modules/nerdy-utils");const dropspace_1=require("../modules/dropspace");const stopEvent=event=>(event.stopPropagation(),event.preventDefault(),event);const timeout=(callback,delay=5e3)=>setTimeout(callback,delay);const notify=!0;class NerdyImageField extends framework_1.PolymerElement{constructor(){super(),this.src="",this.placeholder="Drop image here",this._lastDrag={},this._targets=new Set,this._dragstart=this._dragstart.bind(this)}get dropspace(){return(this.$||{}).dropspace}get previewImage(){return(this.$||{})["preview-image"]}set previewImage(image){image instanceof HTMLImageElement&&(this.previewImage.src=image.src)}attached(){const{dropspace,previewImage}=this;dropspace&&previewImage&&(dropspace.style.height=window.getComputedStyle(dropspace).height,previewImage.onload=()=>(dropspace.style.height="auto",dropspace.style.height=window.getComputedStyle(dropspace)))}async getImage(){const{previewImage}=this;return previewImage?await new Promise((resolve,reject)=>{const image=previewImage.cloneNode(!0);image&&(image.onload=()=>resolve(image))}):void 0}_drag(event){}_dragstart(event){const{src,file}=this,{dataTransfer}=event||{};const setPublic=!1;if(src&&dataTransfer){this.dragImage||(this.dragImage=new Image),this.dragImage.src=this.previewImage.src,dataTransfer.setDragImage(this.dragImage,0,0),dataTransfer.effectAllowed="copy",dataTransfer.dropEffect="copy";const html=`<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">${this.dragImage.outerHTML}`;dataTransfer.setData("text/html",html),dataTransfer.setData("text/plain",src),setPublic}return this._parseDragEvent(event),!0}_parseDragEvent(event={}){const data={},{type:eventType,dataTransfer=null}=event||{type:void 0};if(dataTransfer&&(dataTransfer.effectAllowed="copy",dataTransfer.dropEffect="copy"),"drop"===eventType&&dataTransfer){const allowedTypes=["text/html","image/tiff","image/png","text/plain","public.html","public.url","public.html"];const typedData=data.typedData={};const types=[...(dataTransfer.types||[])];for(const type of allowedTypes)types.includes(type)&&(typedData[type]=dataTransfer.getData(type))}dropspace_1.default.parse(event,data);const{type,files=[],src}=data;const $dropspace=event.dropspace||this.dropspace;let force=!1;switch(type){case"drop":$dropspace.classList.remove("dragover"),this.file=null,files.length?this._setFile(files[0]):src?this._setSrc(src):force=!0;break;case"dragenter":$dropspace.classList.add("dragover");break;case"dragend":$dropspace.classList.remove("dragover"),this.dropspace.classList.remove("dragover"),this._draggingFrom=!1;case"dragleave":this.dropspace.classList.remove("dragover"),$dropspace.classList.remove("dragover");break;case"dragstart":case"drag":$dropspace.classList.add("dragover");break;case"dragover":this.dropspace.classList.remove("dragover"),$dropspace.classList.add("dragover");break;default:return!1;}if(event instanceof Event)return(force||"drop"===eventType)&&this._logDragEvent(data,force),"drag"!==type&&"dragstart"!==type&&event.preventDefault(),!0}_logDragEvent(data={},force=!1){const{type,types=[],files,event}=data,{_lastDrag:last}=this;(force||type&&type!==last.type)&&(clearTimeout(last.timeout),last.timeout=timeout(()=>(delete last.type,delete last.timeout)),console.log(data))}_setSrc(src){if(!this.file&&"string"==typeof src&&nerdy_utils_1.uri.isDataURI(src)){const attributes=nerdy_utils_1.uri.Attributes.parse(src);const{type="url/data",name=`arbitrary ${/^image/.test(type)?type.split("/").resverse().join(" "):type.split("/")[0]}`}=attributes;const file=this.file=new dropspace_1.default.ImageFile(src)}return(src||this.src!==src)&&(this.src=src),src}_setFile(file){if(file&&"object"==typeof file)return this.src="",dropspace_1.default.readImage(this.file=file,this),!0}}NerdyImageField.style=Object.assign({},styles_1.ImageField,{"#preview-image":{$MaxImageHeight:"var(--max-image-height, 25vh)",maxHeight:"var(--max-image-height, 25vh) !important"},"*[not-visible]":{visibility:"hidden"}}),NerdyImageField.properties={placeholder:{type:String},file:{type:File,notify},src:{type:String,notify,reflectToAttribute:!0,observer:"_setSrc"}},NerdyImageField.template=()=>framework_1.Components.createElement("template",null,framework_1.Components.createElement(styles_1.Style,null,NerdyImageField.style),framework_1.Components.createElement("div",{id:"dropspace","on-drop":"_drop","on-dragover":"_dragover","on-dragenter":"_dragenter","on-dragleave":"_dragleave"},framework_1.Components.createElement("div",{id:"placeholder-label",class:"label",hidden:"[[src]]"},framework_1.Components.createElement("span",null,"[[placeholder]]")),framework_1.Components.createElement("div",{id:"preview",hidden:"[[!src]]"},framework_1.Components.createElement("img",{id:"preview-image","bind-src":"[[src]]","on-dragstart":"_dragstart","on-drag":"_drag",draggable:!0})))),exports.NerdyImageField=NerdyImageField;for(const method of["_drop","_dragover","_dragenter","_dragleave"])NerdyImageField.prototype[method]=NerdyImageField.prototype._parseDragEvent;framework_1.Components.define(NerdyImageField),exports.default=NerdyImageField;var nerdy_paper_image_field_1=require("./nerdy-paper-image-field");exports.PaperImageField=nerdy_paper_image_field_1.default}),___scope___.file("app/modules/dropspace.js",function(exports,require,module,__filename,__dirname){function parse(event,data={}){if(!event||!event.dataTransfer)return data;const{type,dataTransfer,dataTransfer:{types:_types,files=[]}}=event;const types=_types||[];if(data=Object.assign(data||{},{type,event,types:[...(types||[])],files:Array.from(files)}),data.typedData=data.typedData,"drop"===type){const dataTypes=data.dataTypes=data.types.join(" ");const[textType]=/text\/(html|plain)\b/.exec(dataTypes)||types;const contentType=textType||"text/plain";const content=data.typedData[contentType]||dataTransfer.getData(contentType);if(/text\/html/.test(dataTypes)&&/ src\=["]/.test(content)&&(data.src=(/(?: src\=["])(.*?)(?:["])/.exec(content)||"")[1]),!data.src&&/text\//.test(dataTypes)&&/^(data:image|(https?|file)\:\/)\//.test(content)&&(data.src=content),data.src&&nerdy_utils_1.uri.isDataURI(data.src)){const file=nerdy_utils_1.uri.toFile(data.src);file&&(data.files=(data.files||[]).push(file))}data.content=content,data.textType=textType}return data}function readImage(file,image=new Image){if(file&&/^image\//.test(file.type)){const imageFile=new ImageFile(file);const reader=new FileReader;return reader.onload=({target:{result}})=>{if(/^data\:image\//.test(result)){const{name=""}=file,metadata={};name&&"string"==typeof name&&(metadata.name=name),result=nerdy_utils_1.uri.Attributes.append(result,metadata)}image.src=result},reader.readAsDataURL(imageFile),image}}var __decorate=__fsbx_decorate(arguments);"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=3>c?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;0<=i;i--)(d=decorators[i])&&(r=(3>c?d(r):3<c?d(target,key,r):d(target,key))||r);return 3<c&&r&&Object.defineProperty(target,key,r),r};var __metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)};Object.defineProperty(exports,"__esModule",{value:!0});const nerdy_utils_1=require("~/modules/nerdy-utils");const decorators_1=require("~/modules/nerdy-utils/decorators");exports.parse=parse;class ImageFile extends File{constructor(contents,filename,properties){if("object"==typeof contents&&contents instanceof URL&&(contents=contents.href),"string"==typeof contents&&(contents=nerdy_utils_1.uri.toFile(contents)),"object"==typeof contents&&contents instanceof File){const file=contents;if(!/^image\//.test(file.type))throw TypeError(`Unexpected file type: "${file.type}" is not an image file type`);const imageFile=Object.setPrototypeOf(contents,ImageFile.prototype);return imageFile}super(contents,filename,properties)}get name(){return this.effectiveName||this.originalName}set name(name){decorators_1.readonlyValue(this,"effectiveName",name||this.originalName)}}__decorate([decorators_1.descriptor(decorators_1.getDescriptor(File.prototype,"name")),__metadata("design:type",Object)],ImageFile.prototype,"originalName",void 0),exports.ImageFile=ImageFile,exports.readImage=readImage;const dropspace=require("./dropspace");exports.default=dropspace}),___scope___.file("modules/nerdy-utils/decorators.js",function(exports,require,module,__filename,__dirname){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getOwnPropertyDescriptor=Object.getOwnPropertyDescriptor,exports.getOwnPropertyDescriptors=Object.getOwnPropertyDescriptors,exports.defineProperty=Object.defineProperty,exports.isWritable=(object,property,value,{writable}=Object.getOwnPropertyDescriptor(object,property)||{})=>!!writable,exports.readonlyValue=(object,property,value,writable=exports.isWritable(object,property))=>exports.defineProperty(object,property,{configurable:!0,value,writable}),exports.getConstructor=({constructor:{prototype}}={})=>prototype,exports.getDescriptor=(target,property)=>exports.getOwnPropertyDescriptor(target,"property")||exports.getOwnPropertyDescriptor(exports.getConstructor(target),property)||{configurable:!0},exports.descriptor=(_descriptor,inherit=!1)=>(target,property,{base=inherit?exports.getDescriptor(target,property):{configurable:!0},descriptor=Object.assign({},base,_descriptor,{property})}={})=>descriptor}),___scope___.file("app/components/nerdy-paper-image-field.jsx",function(exports,require,module,__filename,__dirname){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const framework_1=require("~/framework");const styles_1=require("../components/styles");const nerdy_polymer_elements_1=require("~/modules/nerdy-polymer-elements");const nerdy_image_field_1=require("../components/nerdy-image-field");const nerdy_utils_1=require("~/modules/nerdy-utils");const stopEvent=event=>(event.stopPropagation(),event.preventDefault(),event);const notify=!0,reflectToAttribute=!0;class NerdyPaperImageField extends framework_1.PolymerElement{constructor(){super(),this.value=""}attached(){const{$}=this,noop=()=>{};for(const event of["drop","drag","dragover","dragenter","dragleave","dragstart","dragend"])this[`_${event}`]=this[`_${event}`]||((e,{input={}}=$)=>(input[`_${event}`]||noop).call(input,e)||!1)}async getImage(){const{input}=this.$||{};return input&&input.getImage?await input.getImage():void 0}_updateSrc(src=this.$.input.src){this.$.container._inputHasContent=!!(this.value=this.$.input.src)}_updateValue(value=this.value){this.value=this.$.input.src=nerdy_utils_1.uri.isURL(value)?value:""}}NerdyPaperImageField.style={"#caption":"@apply --paper-input-suffix"},NerdyPaperImageField.properties={value:{type:String,notify},file:{type:File,notify}},NerdyPaperImageField.observers=["_updateValue(value)"],NerdyPaperImageField.template=()=>framework_1.Components.createElement("template",null,framework_1.Components.createElement(styles_1.Style,null,NerdyPaperImageField.style),framework_1.Components.createElement(nerdy_polymer_elements_1.PaperInputContainer,{id:"container"},framework_1.Components.createElement("label",{slot:"label"},"Image"),framework_1.Components.createElement(nerdy_image_field_1.default,{slot:"input",id:"input","on-src-changed":"_updateSrc",class:"paper-input-input",file:"{{file}}"}),framework_1.Components.createElement("span",{id:"caption",slot:"add-on"},"[[file.name]]"))),exports.NerdyPaperImageField=NerdyPaperImageField,framework_1.Components.define(NerdyPaperImageField),exports.default=NerdyPaperImageField}),___scope___.file("app/components/iq-fft/filter-controls.jsx",function(exports,require,module,__filename,__dirname){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const framework_1=require("~/framework");const band_input_1=require("./band-input");const bandInputSize=5;const bandInputStyle=`display: flex; flex: 1 1 auto; min-width: ${4<bandInputSize?bandInputSize/4:2}em; width: ${2<bandInputSize?bandInputSize:2}em; max-width: 100%; margin: 0.5em;`;const bandInputGroupStyle=`display: flex; flex: 1 1 ${2<bandInputSize?2*bandInputSize:2}em; flex-flow: row wrap;`;exports.FilterControls=({addon=!1,step=1,atSuffix="suffix",numerify=(property,$nan="\u22EF")=>`[[asNumber(${property}, '${$nan}')]]`}={})=>framework_1.Components.createElement("div",{style:"display: flex; flex-flow: row wrap-reverse;"},framework_1.Components.createElement("div",{style:"display: flex; flex: 1 1 25%; flex-flow: row wrap; place-content: center; place-items: center;"},framework_1.Components.createElement("label",{style:"display: flex; white-space: nowrap; justify-self: start; align-self: start; margin: 0.5rem; margin-right: 2rem;"},"Filter"),framework_1.Components.createElement("div",{style:"display: flex; flex: 1 1 auto; flex-flow: row wrap; place-content: space-between; place-items: center;"},framework_1.Components.createElement("paper-toggle-button",{style:"display: flex; flex: 1 1 5em; justify-self: center; align-self: center;",checked:"{{bandPassMode}}",title:"Toggle between band pass or stop filtering by simply inverting the pre-computed filter when multiplying it with the computed FFT data."},"[[_filterMode(bandPassMode)]]"),framework_1.Components.createElement("paper-toggle-button",{style:"display: flex; flex: 1 1 5em; justify-self: center; align-self: center;",checked:"{{dynamicFilter}}",title:"Enable or disable dynamically computed band when using images with supported resolution metadata."},"[[_filterMethod(dynamicFilter)]]"))),framework_1.Components.createElement("div",{style:"display: flex; flex-wrap: wrap; flex: 1 1 75%; flex-flow: row wrap; place-content: space-between;"},framework_1.Components.createElement("div",{style:bandInputGroupStyle},framework_1.Components.createElement(band_input_1.default,{style:bandInputStyle,id:"lowValueInput",label:"[[_filterLabel(\"low\")]]",value:"{{bandFilter.low}}",min:"0",step:step/2},addon&&framework_1.Components.createElement("span",{class:"secondary",slot:atSuffix},numerify("bandFilter.lowValue"))),framework_1.Components.createElement(band_input_1.default,{style:bandInputStyle,id:"highValueInput",label:"[[_filterLabel(\"high\")]]",value:"{{bandFilter.high}}",min:"0",step:step/2},addon&&framework_1.Components.createElement("span",{class:"secondary",slot:atSuffix},numerify("bandFilter.highValue")))),framework_1.Components.createElement("div",{style:bandInputGroupStyle},framework_1.Components.createElement(band_input_1.default,{style:bandInputStyle,id:"bandValueInput",label:"[[_filterLabel(\"band\")]]",value:"{{bandFilter.band}}",min:"0",step:step},addon&&framework_1.Components.createElement("span",{slot:atSuffix},numerify("bandFilter.bandValue"))),framework_1.Components.createElement(band_input_1.default,{style:bandInputStyle,id:"bandSizeInput",label:"[[_filterLabel(\"size\")]]",value:"{{bandFilter.size}}","on-value-changed":"_disableSymmetricFilter",min:"0",step:step},addon&&framework_1.Components.createElement("span",{slot:atSuffix},numerify("bandFilter.sizeValue")))))),exports.FilterControls.attach=parent=>{const inputHosts=[...parent.root.querySelectorAll("[band-input]")];inputHosts.map(input=>band_input_1.default.helper.initialize(input,parent))},exports.default=exports.FilterControls}),___scope___.file("app/modules/iq-fft.js",function(exports,require,module,__filename,__dirname){var process=require("process");"use strict",Object.defineProperty(exports,"__esModule",{value:!0});const quasi_elements_1=require("~/modules/nerdy-elements/core/quasi-elements");const turbomaze_1=require("~/modules/nerdy-fft/turbomaze");exports.Complex=turbomaze_1.Complex;const nerdy_utils_1=require("~/modules/nerdy-utils");exports.subinterval=nerdy_utils_1.subinterval;const process_1=require("../modules/process");exports.Process=process_1.default,exports.shouldAbort=(process,i=0)=>!(i%100)&&(!process||!0===process.aborted||turbomaze_1.outdated(process.output)||turbomaze_1.outdated(process.input)),exports.render=(process,{render,aborted}=process)=>("function"!=typeof render||exports.shouldAbort(process)||process.render.call(process,process),process),exports.getImageData=(context,{canvas=context&&context.canvas,top=0,left=0,width=canvas&&(canvas.width||0-left),height=canvas&&canvas.height-top||0}={})=>context&&context.getImageData(top,left,width,height),exports.createImageData=(context,{canvas=context&&context.canvas,top=0,left=0,width=canvas&&(canvas.width||0-left),height=canvas&&canvas.height-top||0}={})=>context&&context.createImageData(width,height),exports.prepareImageData=exports.getImageData;class ImageProcess extends process_1.default{constructor(){super(...arguments),this.data={}}}exports.ImageProcess=ImageProcess;class ConvertToGrayProcess extends ImageProcess{draw(source,canvas,{context=canvas&&canvas.getContext("2d"),scale=NaN,left=NaN,top=NaN,width=NaN,height=NaN,sourceFit=nerdy_utils_1.max,canvasFit=nerdy_utils_1.min}={}){if(source){source.crossOrigin="";const{save,restore,drawImage,scale:setScale,setTransform,backingStoreRatio:backingStoreRatio}=nerdy_utils_1.Bound(context);const{naturalWidth:sourceWidth,naturalHeight:sourceHeight}=source||{};const sourceSize=sourceFit(sourceWidth,sourceHeight);const canvasSize=canvasFit(canvas.width,canvas.height);const devicePixelRatio=window.devicePixelRatio||1;return 0<scale||(scale=canvasSize/sourceSize),isNaN(width)&&(width=sourceWidth),isNaN(height)&&(height=sourceHeight),left=(left||0)+nerdy_utils_1.imul(sourceWidth-width,0.5),top=(top||0)+nerdy_utils_1.imul(sourceHeight-height,0.5),save(),setTransform(scale,0,0,scale,0,0),drawImage(source,left,top,width,height),restore(),source}}async process({input,parameters,output,data,log,parameters:{canvas,top=0,left=0,width=canvas.width-left,height=canvas.height-top,context}}){if(canvas&&(canvas.processes=(canvas.processes||0)+1),context.restore(),context.clearRect(top,left,width,height),this.draw(input,canvas,{context,top,left,sourceFit:nerdy_utils_1.min}),exports.shouldAbort(this))return output;const imageData=exports.getImageData(context,{top,left,width,height});const toGray=data=>exports.toGrayBits(data);const pixelData=imageData.data;const grayData=output=turbomaze_1.initializeData(toGray(imageData.data));return this.aborted&&canvas&&(canvas.processes=(canvas.processes||1)-1),this.output=await output,exports.render(this),output}async render({input,output,data,postrender,parameters:{top=0,left=0,width,height,context,canvas=context&&context.canvas}}=this){if(output||output.length){const length=width*height;const fromGray=data=>exports.fromGrayBits(data);const pixelData=fromGray(output);exports.shouldAbort(this)||(context&&context.putImageData(new ImageData(pixelData,width,height),0<left?left:0,0<top?top:0),canvas&&(canvas.processes=(canvas.processes||1)-1),"function"==typeof postrender&&postrender.call(this,this))}}}ConvertToGrayProcess.id="ConverToGray",ConvertToGrayProcess.instances=0,exports.ConvertToGrayProcess=ConvertToGrayProcess,exports.fftDefaults={contrastConstant:9e-3,maxMagnitude:4194304,fallbackValue:new turbomaze_1.Complex(0,0)};const{contrastConstant:_contrastConstant,maxMagnitude:_maxMagnitude,fallbackValue:_fallbackValue}=exports.fftDefaults;exports.initializeFFTData=(fftData,options={})=>{const{contrastConstant,maxMagnitude,fallbackValue}=options=Object.assign({},exports.fftDefaults,options);const{length=fftData.length,width=nerdy_utils_1.ceil(0.5*length**0.5),height=nerdy_utils_1.ceil(0.5*length**0.5)}=options;const output={contrastConstant,maxMagnitude};const curve=output.curve=magnitude=>Math.log1p(contrastConstant*magnitude);const curvedMagnitude=output.curvedMagnitude=output.curve(maxMagnitude);const denominator=(data,{curvedMagnitude,maxMagnitude,max}=data)=>curvedMagnitude||(data.curvedMagnitude=data.curve(maxMagnitude||max));const shifted=output.shifted=i=>i;const getShifted=output.getShifted=i=>fftData.get(fftData.shifted(i))||fallbackValue;const rgb=output.rgb=i=>nerdy_utils_1.round(255*fftData.curve(fftData.getShifted(i).getMagnitude())/denominator(fftData));return Object.assign(fftData,output)};class ForwardFFTProcess extends ImageProcess{pre({output,parameters:{width,height},input:{length=width*height}}){output||(this.output=new SharedComplexArray(length)),Object.defineProperty(this.output,"progress",{get:()=>this.progress,set:progress=>this.progress=progress})}async process({input,parameters,data,output,log,worker,parameters:{useWorker=!1,contrastConstant=_contrastConstant,maxMagnitude=_maxMagnitude,width,height,fallbackValue=_fallbackValue,context,canvas=context&&context.canvas}}){canvas&&(canvas.processes=(canvas.processes||0)+1),useWorker&&(worker=turbomaze_1.workers&&turbomaze_1.workers[width])?await new Promise((resolve,reject)=>{const uid=this.id;let listener,dispose=()=>(clearInterval(interval),worker.removeEventListener("message",listener),dispose=()=>{});const abort=()=>worker.postMessage({action:"abort",uid});worker.addEventListener("message",listener=({data={},data:{uid:_uid,output:_data}})=>{_uid!==uid||exports.shouldAbort(this)||(dispose(),output.data=_data,turbomaze_1.processForwardData(output),resolve())});const interval=setInterval(({aborted}=this)=>aborted&&(reject("aborted"),abort(),dispose()),100);const{data:$out}=output,$in=input;worker.postMessage({input:$in,output:$out,uid,action:"forward"},exports.transferables($in.buffer,$out.buffer))}):turbomaze_1.default.forward(input,output);const length=width*height,dx=nerdy_utils_1.floor(width/2),dl=nerdy_utils_1.floor(length/2);return exports.initializeFFTData(output,{contrastConstant,maxMagnitude,fallbackValue}),output.shifted=(i,x=i%width,l=i-x)=>(l+(dx-x)%width+dl)%length,this.aborted&&canvas&&(canvas.processes=(canvas.processes||1)-1),(this.output=await output,exports.render(this),output)}async render({input,output,data,postrender,parameters:{top=0,left=0,width,height,context,canvas=context&&context.canvas}}){if(output||output.length){const length=width*height;top=0<top?top:0,left=0<left?left:0;const pixelData=new Uint8ClampedArray(4*length);pixelData.fill(255);for(let v,i=0;i<length&&(i%100||!exports.shouldAbort(this));i++)pixelData.fill(output.rgb(i),4*i,4*i+3);if(!exports.shouldAbort(this)){const{beginPath,moveTo,lineTo,stroke,fill,save,restore,setTransform,clearRect,putImageData,setLineDash,set,get,globalAlpha}=nerdy_utils_1.Bound(context);save(),setTransform(1,0,0,1,0,0),clearRect(top,left,width,height);const offset=0.5,alpha=1;setTransform(1,0,0,1,offset,offset),set("globalAlpha",alpha);const x1=0<left?left:0,y1=0<top?top:0;putImageData(new ImageData(pixelData,width,height),x1,y1);const line=(x1,y1,x2,y2,style="white")=>{beginPath(),moveTo(x1,y1),lineTo(x2,y2),set("strokeStyle",style),stroke()};const x0=0,xn=width,xm=xn/2,dx=8;const y0=9,yn=height,ym=yn/2,dy=8;const d1=8,d2=2*dx;set("lineWidth",1),setLineDash([2,d2-2]),line(xm-d1,ym,x0,ym,"rgb(255, 191, 127)"),line(xm-d2,ym,x0,ym,"rgb(31, 15, 0)"),line(xm,ym-d1,xm,y0,"rgb(255, 191, 127)"),line(xm,ym-d2,xm,y0,"rgb(31, 15, 0)"),line(xm+d1,ym,xn,ym,"rgb(255, 191, 127)"),line(xm+d2,ym,xn,ym,"rgb(31, 15, 0)"),line(xm,ym+d1,xm,yn,"rgb(255, 191, 127)"),line(xm,ym+d2,xm,yn,"rgb(31, 15, 0)"),canvas&&(canvas.processes=(canvas.processes||1)-1),restore(),set("globalAlpha",globalAlpha),"function"==typeof postrender&&postrender.call(this,this)}}}}ForwardFFTProcess.id="ForwardFFT",ForwardFFTProcess.instances=0,ForwardFFTProcess.fallbackValue=_fallbackValue,exports.ForwardFFTProcess=ForwardFFTProcess;class InverseFFTProcess extends ImageProcess{pre({output,parameters:{width,height},input:{length=width*height}}){output||(this.output=turbomaze_1.initializeData(new SharedFloat32Array(length))),Object.defineProperty(this.output,"progress",{get:()=>this.progress,set:progress=>this.progress=progress})}async process({input,parameters,output,log,worker,input:{shifted,rgb},parameters:{useWorker=!1,width,height,filterData,context,canvas=context&&context.canvas}}){canvas&&(canvas.processes=(canvas.processes||0)+1);const length=width*height;return useWorker&&(worker=turbomaze_1.workers&&turbomaze_1.workers[width])?await new Promise((resolve,reject)=>{const uid=this.id;let listener,dispose=()=>(clearInterval(interval),worker.removeEventListener("message",listener),dispose=()=>{});const abort=()=>worker.postMessage({action:"abort",uid});worker.addEventListener("message",listener=({data={},data:{uid:_uid,output:_data}})=>{_uid!==uid||exports.shouldAbort(this)||(dispose(),turbomaze_1.processInverseData(new turbomaze_1.ComplexArray(_data),output),resolve())});const interval=setInterval(({aborted}=this)=>aborted&&(reject("aborted"),abort(),dispose()),100);const $in=input instanceof turbomaze_1.ComplexArray?input.data:input;const $out=new SharedFloat32Array($in.length);worker.postMessage({input:$in,output:$out,uid,action:"inverse"},exports.transferables($in.buffer,$out.buffer))}):turbomaze_1.default.inverse(input,output),this.aborted&&canvas&&(canvas.processes=(canvas.processes||1)-1),(this.output=await output,exports.render(this),output)}async render({input,output,postrender,parameters:{top=0,left=0,width,height,context,canvas=context&&context.canvas,min=NaN,max=NaN,autoContrast=!0}}){if(!output||!output.length)return;const length=width*height;top=0<top?top:0,left=0<left?left:0;const imageData=this.imageData=exports.prepareImageData(context,{top,left,width,height});const pixelData=imageData?imageData.data:new Uint8ClampedArray(4*length);const grayData=output;const traverse=(data,callback,{view=new DataView(data.buffer),length=data.length,start=0,end=length-1,getter=DataView.prototype.getFloat64,step=64/data.BYTES_PER_ELEMENT}={})=>{for(let i=start;i<=end;i+=step)callback(getter.call(view,i),i,step)};const cmax=(data,cmax=data[0])=>(traverse(data,(chunk,start,length)=>{chunk>cmax&&(cmax=_Mathmax(cmax,...data.slice(start,start+length))||cmax)}),cmax);min=isNaN(min)?"cmin"in output?output.cmin:output.min:min,max=isNaN(max)?"cmax"in output?output.cmax:output.max:max;const scale=autoContrast&&!isNaN(max+min)?value=>255*(value-min)/(max-min):value=>value;const pixel=(value,scaled=scale(value))=>[scaled,scaled,scaled,255];pixelData.fill(255);for(let v,i=0;i<length&&(i%100||!exports.shouldAbort(this));i++)pixelData.fill(scale(output[i]),4*i,4*i+3);exports.shouldAbort(this)||(context&&context.putImageData(imageData,0<left?left:0,0<top?top:0),canvas&&(canvas.processes=(canvas.processes||1)-1),"function"==typeof postrender&&postrender.call(this,this))}}InverseFFTProcess.id="InverseFFT",InverseFFTProcess.instances=0,exports.InverseFFTProcess=InverseFFTProcess;class FilterFFTProcess extends process_1.default{async process({input,parameters,output,log}){const{fftData,filterData}=input||{};const{data:filter,width=0,height=0}=filterData,{length=width*height}=filter||{};if(!filterData||!filter||exports.shouldAbort(this))return this.output=fftData;if(length!==fftData.length)return this.abort(`fftData length (${fftData.length}) is not equal to filter length (${length})!`),this.output=fftData;const{filtered=_fallbackValue,mode="pass",contrastConstant=_contrastConstant,maxMagnitude=_maxMagnitude,fallbackValue=_fallbackValue}=parameters||{};output=this.output=new turbomaze_1.default.ComplexArray(fftData.length),exports.initializeFFTData(output,{contrastConstant,maxMagnitude,fallbackValue});const dx=output.dx=nerdy_utils_1.floor(width/2),dl=output.dl=nerdy_utils_1.floor(length/2);const unshifted=(i,x=i%width,l=i-x)=>(l-(dx-x)%width+dl)%length;const stopMode="stop"===mode||!1===mode;const $in=input.buffer?input:input.data&&input.data.buffer?input.data:null;const $out=output.buffer?output:output.data&&output.data.buffer?output.data:null;const apply=$in&&$out?(i,i1=2*i,i2=i1+1,h=filter[unshifted(i)])=>{stopMode&&(h=1-h),$out[i1]=($in[i1]||0)*h,$out[i2]=($in[i2]||0)*h}:(i,h=filter[unshifted(i)],{real,imag,magnitude}=fftData.get(i))=>{stopMode&&(h=1-h),output.set(i,{real:real*h,imag:imag*h})};for(let v,i=0;i<length&&(i%100||!exports.shouldAbort(this));i++)apply(i);return output.max=input.max,output.min=input.min,this.output=await output}}FilterFFTProcess.id="InverseFFT",FilterFFTProcess.instances=0,exports.FilterFFTProcess=FilterFFTProcess;class GenerateFilterProcess extends process_1.default{pre({parameters:{low,high,width,height}}){this.output={low,high,width,height}}async process({input,parameters,output,log,parameters:{low,high,width,height,fill=1,clear=0}}){let data;return data=output.data=width&&height?(isNaN(low)||0>=low)&&(isNaN(high)||high>=_Mathmin(width,height))?new Float32Array(width*height).fill(fill):turbomaze_1.default.filter([width,height],_Mathmax(0,low||0),_Mathmin(high||Infinity,width,height),{fill,clear}):new Float32Array(0),output.zeros="zeros"in data?data.zeros:-1<data.indexOf(clear),output.ones="ones"in data?data.ones:-1<data.indexOf(fill),this.output=await output}}GenerateFilterProcess.id="GenerateFilterData",GenerateFilterProcess.instances=0,exports.GenerateFilterProcess=GenerateFilterProcess;class RenderFilterProcess extends ImageProcess{async process({input,parameters,output,log,input:{filterData,fftData},parameters:{context,compositeContext,top=0,left=0,width,height,pixels}}){if(exports.shouldAbort(this))return output;const length=width*height;top=0<top?top:0,left=0<left?left:0;const{ones=!0,zeros=!0,data=new Uint8ClampedArray(length)}=filterData||{};const imageData=this.imageData=exports.prepareImageData(context,{top,left,width,height});const pixelData=(imageData?imageData.data:new Uint8ClampedArray(4*length)).fill(255);const compositeImageData=this.compositeImageData=compositeContext&&exports.prepareImageData(compositeContext,{top,left,width,height});const compositeData=this.compositePixelData=(compositeImageData?compositeImageData.data:new Uint8ClampedArray(4*length)).fill(255);const{gray,rgb}=fftData||{};const{filterFillPixel,filterClearPixel,fftClearPixel,fftVoidPixel}=Object.assign({},RenderFilterProcess.pixels,pixels);const fft=gray?(i,v=gray[i])=>[v,v,v,255]:rgb?(i,v=rgb(i))=>[v,v,v,255]:()=>fftClearPixel;const filter=i=>{const h=+data[i]||0,p=255&255*h,v=fft(i)[0]||0;pixelData.set([filterFillPixel[0]*h,filterFillPixel[1]*h,filterFillPixel[2]*h,filterFillPixel[3]],4*i),compositeData&&compositeData.set([v*h,v*h,v*h,255],4*i)};for(let v,i=0;i<length&&(i%100||!exports.shouldAbort(this));i++)filter(i);return exports.shouldAbort(this)||(context&&context.putImageData(imageData,left,top),compositeContext&&compositeContext.putImageData(compositeImageData,left,top)),this.output=output}}RenderFilterProcess.id="RenderFilter",RenderFilterProcess.instances=0,RenderFilterProcess.pixels={filterFillPixel:[255,255,0,127],filterClearPixel:[0,0,0,127],fftClearPixel:[127,127,127,255],fftVoidPixel:[0,0,0,255]},exports.RenderFilterProcess=RenderFilterProcess;class SimulateFilterProcess extends ImageProcess{async process({input,parameters,output,log,parameters:{canvas,context=canvas.getContext("2d")},parameters:{top=0,left=0,width=canvas.width,height=canvas.height,pixels},parameters:{scale,lineScale:_lineScale,clientScale:_clientScale},parameters:{low:lowBand,high:highBand},parameters:{filter}}){const contextScale=1,lineScale=contextScale,transformScale=contextScale;const filterScale=0<scale?scale:1;const{low,high,size,radius,sameBand,noHigh,noLow}=turbomaze_1.parseFilterRange({lowBand,highBand,size:_Mathmin(width,height)});const{filterFillPixel,filterClearPixel,fftClearPixel,fftVoidPixel}=Object.assign({},RenderFilterProcess.pixels,pixels);const{beginPath,moveTo,lineTo,stroke,fill,fillRect,ellipse,save,restore,setTransform,clearRect,putImageData,setLineDash,set,get}=nerdy_utils_1.Bound(context);save(),setTransform(1,0,0,1,0,0),clearRect(top,left,width,height);const offset=0.5,alpha=1;const xOffset=(width-width*filterScale)/2+offset*filterScale;const yOffset=(height-height*filterScale)/2+offset*filterScale;if(setTransform(filterScale,0,0,filterScale,xOffset,yOffset),set("globalAlpha",alpha),sameBand||noHigh&&noLow)return;const dx=(width-size)/2,x=dx+size/2;const dy=(height-size)/2,y=dy+size/2;const innerRadius=transformScale*(0<lowBand?lowBand:NaN);const outerRadius=transformScale*(highBand>(lowBand||0)?highBand:NaN);const inner=!noLow&&0<innerRadius,outer=!noHigh&&0<outerRadius;if(outer||inner)return function outline(){const delta=_Mathabs(outer?(innerRadius||0)-outerRadius:innerRadius||outerRadius);const centerRadius=outer?outerRadius-delta/2:inner?innerRadius+delta/2:NaN;const centerCircumference=2*_MathPI*centerRadius;const center=2<delta&&!isNaN(centerRadius);const filterStyle=`rgba(255, 255, 0, 255)`;const guideStyle=`rgba(127, 255, 255, 255)`;const lineWidth=_Mathmax(lineScale/4,_Mathmin(delta/4||lineScale,lineScale));const dashSteps=32,dashStep=centerCircumference/dashSteps,dashOffset=0;let dashRatio=1;save(),clearRect(top,left,width,height),set("strokeStyle",filterStyle),dashRatio=outerRadius/centerRadius;const boundaryDash=3*dashStep,boundaryGap=dashStep,boundaryOffset=dashOffset+boundaryDash/2;beginPath(),ellipse(x,y,outerRadius,outerRadius,0,0,4*_MathPI),setLineDash([boundaryDash*dashRatio,boundaryGap*dashRatio]),set("lineDashOffset",boundaryOffset*dashRatio),set("lineWidth",lineWidth),set("strokeStyle",filterStyle),outer&&stroke(),dashRatio=innerRadius/centerRadius,beginPath(),ellipse(x,y,innerRadius,innerRadius,0,0,4*_MathPI),setLineDash([boundaryDash*dashRatio,boundaryGap*dashRatio]),set("lineDashOffset",boundaryOffset*dashRatio),set("lineWidth",0.5*lineWidth),set("strokeStyle",filterStyle),inner&&stroke(),dashRatio=1;const centerDash=boundaryGap/2,centerGap=boundaryDash+boundaryGap/2;const centerOffset=dashOffset+centerDash/2+(centerGap+centerDash)/2;const centerOutline=dashStep/12;const centerColor="rgba(191, 255, 255, 1)";beginPath(),ellipse(x,y,centerRadius,centerRadius,0,0,4*_MathPI),setLineDash([centerDash*dashRatio,centerGap*dashRatio]),set("lineDashOffset",centerOffset*dashRatio),set("strokeStyle","black"),set("lineWidth",1.5*lineWidth),center&&stroke(),setLineDash([(centerDash-centerOutline)*dashRatio,(centerGap+centerOutline)*dashRatio]),set("lineDashOffset",(centerOffset-centerOutline/2)*dashRatio),set("strokeStyle",centerColor),set("lineWidth",1.25*lineWidth),center&&stroke(),restore()}(),context.restore(),this.output=output}}SimulateFilterProcess.id="SimulateFilter",SimulateFilterProcess.instances=0,SimulateFilterProcess.pixels=RenderFilterProcess.pixels,SimulateFilterProcess.deferred=!1,exports.SimulateFilterProcess=SimulateFilterProcess,exports.toGrayIndex=(data,index=0,output=new exports.TransientUint8ClampedArray(data.length/4))=>{if(index=_Mathabs((index||0)%4))for(let v,i=0,source=data,length=_Mathmin(source.length,4*output.length);i<length;i+=4)output[i/4]=source[i+index];else for(let v,i=0,source=data,length=_Mathmin(source.length,4*output.length);i<length;i+=4)output[i/4]=source[i];return output},exports.toGrayBits=(data,bits=0,output=new exports.TransientUint8ClampedArray(data.length/4))=>{if(bits=8*_Mathabs(_Mathround((4>=bits?8*bits:bits)||0)/8)%32)for(let v,i=0,source=new Uint32Array(data.buffer),length=_Mathmin(source.length,4*output.length);i<length;i++)output[i]=255&source[i]>>bits;else for(let v,i=0,source=new Uint32Array(data.buffer),length=_Mathmin(source.length,4*output.length);i<length;i++)output[i]=255&source[i];return output},exports.fromGrayIndex=(data,index=0,slice=3,output=new exports.TransientUint8ClampedArray(4*data.length))=>{if((index=_Mathabs((index||0)%4))||1<(slice=1<slice?~~slice:1))for(let v,i=0,source=data,length=_Mathmin(source.length,output.length/4);i<length;i++)output.fill(source[i],4*i+index,4*i+index+slice);else for(let v,i=0,source=data,length=_Mathmin(source.length,output.length/4);i<length;i++)output[4*i+index]=source[i];return output},exports.fromGrayBits=(data,mask=16777215,filter=4278190080,output=new Uint32Array(data.length))=>{const source=data,target=output instanceof Uint32Array?output:new Uint32Array(output.buffer),length=_Mathmin(source.length,output.length);for(let v,i=0;i<length;i++)v=255&source[i],target[i]=((v|v<<8|v<<16|v<<24)&mask)+filter;return output instanceof exports.TransientUint8ClampedArray?output:new exports.TransientUint8ClampedArray(output.buffer)},exports.Canvas=quasi_elements_1.Canvas;class SharedFloat32Array extends Float32Array{constructor(parameter){super("number"==typeof parameter?new SharedArrayBuffer(4*parameter):parameter)}}exports.SharedFloat32Array=SharedFloat32Array;class SharedUint32Array extends Uint32Array{constructor(parameter){super("number"==typeof parameter?new SharedArrayBuffer(4*parameter):parameter)}}exports.SharedUint32Array=SharedUint32Array;class SharedUint8ClampedArray extends Uint8ClampedArray{constructor(parameter){super("number"==typeof parameter?new SharedArrayBuffer(parameter):parameter)}}exports.SharedUint8ClampedArray=SharedUint8ClampedArray;class SharedComplexArray extends turbomaze_1.ComplexArray{constructor(parameter){super("number"==typeof parameter?new SharedFloat32Array(2*parameter):parameter)}}exports.SharedComplexArray=SharedComplexArray,exports.transferableTypes=[...("undefined"==typeof ArrayBuffer?[]:[ArrayBuffer]),...("undefined"==typeof MessagePort?[]:[MessagePort]),...("undefined"==typeof ImageBitmap?[]:[ImageBitmap])],exports.transferables=(...objects)=>objects.filter(object=>object&&"object"==typeof object&&exports.transferableTypes.find(type=>object instanceof type)),exports.TransientUint8ClampedArray=SharedUint8ClampedArray}),___scope___.file("modules/nerdy-fft/turbomaze/index.js",function(exports,require,module,__filename,__dirname){"use strict";function __export(m){for(var p in m)exports.hasOwnProperty(p)||(exports[p]=m[p])}Object.defineProperty(exports,"__esModule",{value:!0}),__export(require("./complex"));var complex_1=require("./complex");exports.Complex=complex_1.default,__export(require("./filter"));var filter_1=require("./filter");exports.filter=filter_1.default,__export(require("./iteration"));var iteration_1=require("./iteration");exports.iterate=iteration_1.default,__export(require("./complex-array"));var complex_array_1=require("./complex-array");exports.ComplexArray=complex_array_1.default,__export(require("./fft"));var fft_1=require("./fft");exports.default=fft_1.default}),___scope___.file("modules/nerdy-fft/turbomaze/complex.js",function(exports,require,module,__filename,__dirname){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const nerdy_utils_1=require("~/modules/nerdy-utils");exports.dud={real:0,imag:0},exports.times=({real:r1,imag:i1}=exports.dud,{real:r2,imag:i2}=exports.dud)=>new Complex(r1*r2-i1*i2,r1*i2+i1*r2),exports.plusTimes=({real:r1,imag:i1}=exports.dud,{real:r2,imag:i2}=exports.dud,{real:r3,imag:i3}=exports.dud)=>new Complex(r1+(r2*r3-i2*i3),i1+(r2*i3+i2*r3)),exports.minusTimes=({real:r1,imag:i1}=exports.dud,{real:r2,imag:i2}=exports.dud,{real:r3,imag:i3}=exports.dud)=>new Complex(r1-(r2*r3-i2*i3),i1-(r2*i3+i2*r3)),exports.plusTimesSet=(c,{real:r2,imag:i2}=exports.dud,{real:r3,imag:i3}=exports.dud)=>{const{real:r1,imag:i1}=c;const r=c.real=r1+(r2*r3-i2*i3),i=c.imag=i1+(r2*i3+i2*r3);return c._magnitude2=exports.magnitude2(r,i),delete c._magnitude,c},exports.minusTimesSet=(c,{real:r2,imag:i2}=exports.dud,{real:r3,imag:i3}=exports.dud)=>{const{real:r1,imag:i1}=c;const r=c.real=r1-(r2*r3-i2*i3),i=c.imag=i1-(r2*i3+i2*r3);return c._magnitude2=exports.magnitude2(r,i),delete c._magnitude,c},exports.magnitude2=(real,imag)=>real*real+imag*imag||0;class Complex{constructor(real,imag){0<arguments.length&&(this._magnitude2=exports.magnitude2(this.real=real,this.imag=imag||0))}static computeMagnitude2({_magnitude2=NaN,real,imag}=this){return isNaN(_magnitude2)?this._magnitude2=real*real+imag*imag||0:_magnitude2}static computeMagnitude({_magnitude=NaN,_magnitude2}=this){return isNaN(_magnitude)?this._magnitude=_magnitude2?_Mathsqrt(_magnitude2):0:_magnitude}get magnitude2(){return this._magnitude2}get magnitude(){return"_magnitude"in this?this._magnitude:this._magnitude=_Mathsqrt(this.magnitude2)}plus(z){return new Complex(this.real+z.real,this.imag+z.imag)}subtract(z){this.real-=z.real,this.imag-=z.imag}minus(z){return new Complex(this.real-z.real,this.imag-z.imag)}times(z){return"object"==typeof z?exports.times(this,z):new Complex(z*this.real,z*this.imag)}getMagnitude(){return nerdy_utils_1.diagonal(this.real||0,this.imag||0)}}Complex.plusTimes=exports.plusTimes,Complex.minusTimes=exports.minusTimes,Complex.plusTimesSet=exports.plusTimes,Complex.minusTimesSet=exports.minusTimes,Complex.magnitude2=exports.magnitude2,exports.Complex=Complex,exports.default=Complex}),___scope___.file("modules/nerdy-fft/turbomaze/filter.js",function(exports,require,module,__filename,__dirname){"use strict";function filter(input,lowPass=NaN,highPass=NaN,{fill=1,clear=0}={}){const{mode,dimensions}=parseFilterInput(input),isRender="render"===mode,isFilter="filter"===mode;const[M,N]=dimensions,M2=M/2,N2=N/2,MN=M*N;const{low:lowSquare,high:highSquare,noLow,noHigh,sameBand,size,radius,size:I,radius:D}=exports.parseFilterRange({lowBand:lowPass,highBand:highPass,size:min(M,N)});const low=lowSquare&&lowSquare**0.5||0,high=highSquare&&highSquare**0.5||radius;const hasHigh=high!==radius,hasLow=0!==low,hasBand=hasHigh||hasHigh;const id=hasBand&&`${I} ${low}:${high}`;if(id&&filters.has(id))return filters.get(id);const delta=min(high||radius,radius)-max(0,low||0);const variance=2*log2(4),norm=variance**0.5*gaussian.twiddle;const turbomazeFilter=()=>normalizeFilter(radialFilter(radius,i=>rectBandFilter(i,low,high)));const gaussianFilter=()=>normalizeFilter(multiplyFilters(radialFilter(radius,i=>exp(-((i>=high?i-high:i<=low?i-low:0)**2)/variance/2))));const filter=gaussianFilter();const N0=_Mathmax(0,_1.floor((N-highSquare)/2)),M0=_Mathmax(0,_1.floor((N-highSquare)/2));const data=new Float32Array(M*N);let zeros=!0,ones=!1;if(sameBand||!hasBand)data.fill(fill),zeros=!0,ones=!1;else for(let t,b,dm,k=N0;t=k*M,b=MN-t,dm=imul(k-M2,k-M2),k<=N2;k++)for(let r,d,i,l=M0;r=M-l,d=dm+imul(l-N2,l-N2),i=1<d&&_1.round(d**0.5)||0,l<=M2;l++)data[t+l]=data[t+r]=data[b+l]=data[b+r]=filter[i]||0;return data.zeros=data.includes(0),data.ones=data.includes(1),filters.set(id,data),data}Object.defineProperty(exports,"__esModule",{value:!0});const _1=require("../../nerdy-utils/");const{PI,exp,min,max,imul,fround,log,log2}=Math;const parseFilterInput=input=>{"number"==typeof input&&(input=[input,input]),1===input.length&&(input=[input[0],input[0]]);const mode=2===input.length?"render":"filter";return"render"==mode?{mode,dimensions:input}:{mode,dimensions:[,,].fill(input.length**0.5)}};exports.parseFilterRange=({lowBand=NaN,highBand=NaN,low=NaN,high=NaN,noLow,noHigh,sameBand,size=Infinity,radius=size?_1.diagonal(size):NaN}={})=>(0<size?(sameBand=lowBand===highBand,noLow=sameBand||isNaN(lowBand)||0>=lowBand,noHigh=sameBand||isNaN(highBand)||highBand>=radius,low=sameBand?NaN:noLow?(lowBand=NaN,-radius):lowBand**2,high=sameBand?NaN:noHigh?(highBand=NaN,radius):highBand**2):(lowBand=highBand=low=high=size=radius=NaN,noLow=!1,noHigh=!1),{lowBand,highBand,sameBand,low,high,noLow,noHigh,size,radius});var gaussian;(function(gaussian_1){gaussian_1.twiddle=(2*PI)**0.5,gaussian_1.gaussian=(χ,α,σ,δ=σ**2,ω=σ*gaussian_1.twiddle)=>exp(-((χ-α)**2)/(2*δ))/ω})(gaussian=exports.gaussian||(exports.gaussian={})),gaussian=Object.assign(gaussian.gaussian,gaussian);const rectBandFilter=(d,low,high)=>d>low-0.5&&d<high+0.5;const multiplyFilters=(...filters)=>1===filters.length?filters[0]:filters.reduce((result,filter)=>{length=result&&0<result.length&&filter&&0<filter.length&&min(result.length,filter.length);for(let i=0;i<length;i++)result[i]*=filter[i]||0;return result},Float32Array.from(filters[0]));const combineFilters=(...filters)=>filters.reduce((result,filter)=>{length=result&&0<result.length&&filter&&0<filter.length&&min(result.length,filter.length);for(let i=0;i<length;i++)result[i]=min(1,result[i]+filter[i]||0);return result},Float32Array.from(filters[0]));const normalizeFilter=(filter,norm=filter.reduceRight((norm,v)=>v>norm?v:norm,-Infinity))=>filter.map(v=>v/norm);const radialFilter=(ρ,ƒ)=>new Float32Array(ρ).map((x,i)=>ƒ(i));const filters=new Map;exports.filter=filter,exports.default=filter}),___scope___.file("modules/nerdy-fft/turbomaze/iteration.js",function(exports,require,module,__filename,__dirname){"use strict";function*generator(size=0,start=0,offset=0,step=1,iterations){const yields=!iterations,nextSize=size>>1,nextStep=step<<1,nextStart=start+nextSize,nextOffset=offset+step;return iterations=iterations||[],1<size&&(generator(nextSize,start,offset,nextStep,iterations).next(),generator(nextSize,nextStart,nextOffset,nextStep,iterations).next()),1<=size&&(iterations.push([size,start,offset,step]),yields&&(yield*iterations)),iterations}function generate(size=0,start=0,offset=0,step=1){let iterations;if(!start&&!offset&&1===step){if(iterators.has(size))return iterators.get(size);const started=now();generator(size,start,offset,step,iterations=[]).next();const ended=now(),elapsed=ended-started;requestIdleCallback(()=>console.info(`FFT: ▷ ${(size**0.5).toFixed(0)}² × ${iterations.length} ops / ${elapsed.toFixed(1)}ms`)),iterators.set(size,iterations)}else iterations=Array.from(generator(size,start,offset,step));return iterations}function iterate({start=0,offset=0,size=0,step=1,remaining=!0,completed=0},callback){const iterations=!start&&!offset&&1===step&&iterators.get(size)||generate(size);let i;const length=iterations.length,started=now();for(i=0;i<length&&!1!==callback(...iterations[i]);i++);const ended=now(),elapsed=ended-started,operations=i,aborted=i<length-1;return requestIdleCallback(()=>console[aborted?"warn":"info"](`FFT: ▶︎ ${(size**0.5).toFixed(0)}² × ${(operations/1e3).toFixed(1)}k ops / ${elapsed.toFixed(1)}ms`)),iterations}Object.defineProperty(exports,"__esModule",{value:!0});const now="undefined"!=typeof performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date);exports.generator=generator;const iterators=new Map;exports.generate=generate;const N128=16384,N256=65536,N512=262144,N1024=1048576,N2048=4194304;exports.iterate=iterate;const pregenerate=(size,timeout=size**0.5)=>new Promise((resolve,reject)=>requestIdleCallback(()=>(console.log(`FFT: ⚡︎ ${(size**0.5).toFixed(0)}²`),resolve(generate(size))),{timeout}));exports.default=iterate}),___scope___.file("modules/nerdy-fft/turbomaze/complex-array.js",function(exports,require,module,__filename,__dirname){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const complex_1=require("./complex");const data_1=require("./data");class ComplexArray{constructor(parameter,store=Float32Array){this.allocations=[];const data=0<parameter?new store(2*parameter):parameter;if(!data||!(data instanceof store))throw Error("ComplexArray requires either a positive size value or a double-sized Float64Array as the first argument.");this.data=data,this.values=Array(this.length),data_1.default(this)}get length(){return this.data&&this.data.length/2}get(i){return this.allocate(i)}set(i,value,{real=0,imag=0}=value||{}){this.data[2*i]=real,this.data[2*i+1]=imag,this.allocate(i)}create(i,value=new ComplexCell(this,i)){return this.values[i]=value,value}allocate(i,value=this.values[i]){return value||this.create(i)}unallocate({allocations,values}=this){return;allocations&&allocations.length&&requestIdleCallback(()=>{const _allocations=allocations.splice(0,allocations.length);for(const i of _allocations)delete values[i]})}}exports.ComplexArray=ComplexArray;class ComplexCell extends complex_1.default{constructor(array,index=NaN){super(),this.array=array,this.index=index}get data(){return this.array.data}get real(){return this.data[2*this.index]}set real(real){this.data[2*this.index]=real}get imag(){return this.data[2*this.index+1]}set imag(imag){this.data[2*this.index+1]=imag}get _magnitude2(){return complex_1.default.magnitude2(this.data[2*this.index],this.data[2*this.index+1])}get magnitude(){const magnitude2=complex_1.default.magnitude2(this.data[2*this.index],this.data[2*this.index+1]||0);return _Mathsqrt(magnitude2)}}exports.ComplexCell=ComplexCell,exports.default=ComplexArray}),___scope___.file("modules/nerdy-fft/turbomaze/data.js",function(exports,require,module,__filename,__dirname){"use strict";function initialize(data){if(!data||"object"!=typeof data)throw ReferenceError(`Cannot initialize data from ${/^[aeiou]/.test(typeof data)?"an":"a"} ${typeof data} value!`);if(data[IS_DATA_OBJECT]=data[IS_DATA_OBJECT]||"get"in data&&"set"in data&&"function"==typeof data.get&&"function"==typeof data.set);else if("function"==typeof data.get&&"function"==typeof data.set)console.warn(`Blocked an attempt to initialize data from an object that defines both get and set methods to avoid potential conflicts with non-data-related implementations!`);else{if(data instanceof exports.TypedArray)Object.defineProperties(data,typedArrayDataDescriptors);else if(Array.isArray(data))data.get=AbstractData.prototype.get,data.set=AbstractData.prototype.set;else throw TypeError(`Cannot initialize data from ${exports.stringTag(data)} instance!`);data[IS_DATA_OBJECT]=!0}return data}Object.defineProperty(exports,"__esModule",{value:!0});class AbstractData{get(i){return this[i]}set(i,value){this[i]=value}}exports.getSuperConstructor=(Type,...args)=>Object.getPrototypeOf(Object.getPrototypeOf(new Type(...(args.length?args:[1]))).constructor),exports.TypedArray=exports.getSuperConstructor(Uint8Array),exports.stringTag=object=>Object.prototype.toString.call(object);class TypedArrayData extends AbstractData{get(i){return this[i]}set(i,value){this[i]=value}}const[writable,configurable]=[!0,!0];const abstractDataDescriptors={get:{writable,value:AbstractData.prototype.get},set:{writable,value:AbstractData.prototype.set}};const typedArrayDataDescriptors={get:{writable,value:TypedArrayData.prototype.get},set:{writable,value:TypedArrayData.prototype.set}};const IS_DATA_OBJECT=Symbol("[[IS_DATA_OBJECT]]");exports.initialize=initialize,exports.default=initialize}),___scope___.file("modules/nerdy-fft/turbomaze/fft.js",function(exports,require,module,__filename,__dirname){"use strict";function transform($in,$out,direction){const forward="forward"===direction,sign=forward?1:-1,PIt=PI2;const validData=$in&&0<$in.length&&$out&&0<$out.length;const fromReal=validData&&$in.length===$out.length/2,fromComplex=validData&&$in.length===$out.length;const size=fromReal?$in.length:fromComplex?$in.length/2:0;const cis=cis_exp_1.cisTables.get(size),[n,n2,n4,n8]=cis.n;if(!size||!(validData&&(fromReal||fromComplex)))return!1;const integrate=(size,start,offset,step)=>{const length=size/2,end=start+length,d=n/size;for(let k1,k2,r1,i1,r2,i2,rt,it,rk,ik,k=start,h=0;k1=imul(k,2),k2=imul(k+length,2),r1=$out[k1],i1=$out[k1+1],r2=$out[k2],i2=$out[k2+1],rt=cis[h+n4],it=sign*cis[h],rk=(r2||i2)&&r2*rt+i2*it,ik=(r2||i2)&&-r2*it+i2*rt,k<end;k++,h+=d)$out[k1]+=rk,$out[k1+1]+=ik,$out[k2]=r1-rk,$out[k2+1]=i1-ik;return!0};const translate=fromReal?(start,offset)=>($out[2*start]=$in[offset]||0,$out[2*start+1]=0,!0):fromComplex?(start,offset)=>($out[2*start]=$in[2*offset]||0,$out[2*start+1]=$in[2*offset+1]||0,!0):(start,offset)=>!1;const aggregate=(size,start,offset,step)=>1===size?translate(start,offset):!!(1<size)&&integrate(size,start,offset,step);return _1.iterate({size},aggregate),!0}function iterateFFT(input,output,direction){const $in=input.BYTES_PER_ELEMENT?input:input instanceof complex_array_1.default?input.data:input;const $out=output instanceof complex_array_1.default?output.data:output;transform($in,$out,direction)}function forwardFFT(input,output,{start=0,offset=0,size=input.length,step=1}={}){const iterator=iterateFFT(input,output,"forward");return processForwardData(output),output}function processForwardData(output,{length=output.length}={}){let max=-Infinity,min=Infinity;output.outdated=!0===output.outdated;const $out=output instanceof complex_array_1.default?output.data:output;const factor=2/length;for(let k=0;k<length;k++){const k0=imul(k,2),r=$out[k0],i=$out[k0+1];const m=hypot(r,i);m>max&&(max=m,!0)||m<min&&(min=m,!0)}return output.max=max,output.min=min,output}function inverseFFT(input,output,{start=0,offset=0,size=input.length,step=1}={}){const intrim=output.intrim=Object.defineProperty(new complex_array_1.default(size),"progress",{get:()=>output.progress,set:progress=>output.progress=progress});intrim.filteredSize=input.filteredSize;const iterator=iterateFFT(input,intrim,"inverse");return processInverseData(intrim,output),output}function processInverseData(intrim,output,{length=intrim.length,denominator=length}={}){let max=-Infinity,min=Infinity;for(let k=0;k<length;k++){const t=intrim.get(k),{real=0}=t,v=(real||0)/denominator;output.set(k,v),v>max?max=v:!!(v<min)&&(min=v)}return output.max=max,output.min=min,output}Object.defineProperty(exports,"__esModule",{value:!0});const _1=require(".");const complex_array_1=require("./complex-array");const cis_exp_1=require("./cis-exp");const data_1=require("./data");exports.initializeData=data_1.default;const{hardwareConcurrency=1}="undefined"==typeof navigator?{}:navigator;const workerSizes=[128];0<hardwareConcurrency&&workerSizes.push(256),1<hardwareConcurrency&&workerSizes.push(512),4<hardwareConcurrency&&workerSizes.push(1024),6<hardwareConcurrency&&workerSizes.push(2048),exports.workers={},exports.useWorkers=!0,exports.useWorkers&&workerSizes.forEach(size=>{try{exports.workers[size]=new Worker("./workers/fft.js"),4<hardwareConcurrency&&requestIdleCallback(()=>exports.workers[size].postMessage({action:"preGenerate",size:size**2}),{timeout:2*size})}catch(exception){console.warn(exception)}},exports.workers),exports.outdated=object=>object&&!0===object.outdated||!1,exports.FFT=(input,output)=>forwardFFT(data_1.default(input),data_1.default(output),{start:0,offset:0,size:input.length,step:1}),exports.forward=exports.FFT,exports.IFFT=(input,output)=>inverseFFT(data_1.default(input),data_1.default(output),{start:0,offset:0,size:input.length,step:1}),exports.inverse=exports.IFFT;const{PI,imul,sin,cos,sqrt,abs,hypot}=Math,PI2=2*PI;const voidExp=[];exports.transform=transform,exports.processForwardData=processForwardData,exports.processInverseData=processInverseData;const{plusTimes,minusTimes,plusTimesSet,minusTimesSet}=_1.Complex;exports.default={Complex:_1.Complex,ComplexArray:complex_array_1.default,forward:exports.FFT,inverse:exports.IFFT,filter:_1.filter,initializeData:data_1.default,outdated:exports.outdated}}),___scope___.file("modules/nerdy-fft/turbomaze/cis-exp.js",function(exports,require,module,__filename,__dirname){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const nerdy_utils_1=require("~/modules/nerdy-utils");var cisTables;(function(cisTables){const{PI,abs,sin,cos,sqrt,max}=Math;const Base=Float32Array;class CISTable extends Base{constructor(size){super(new SharedArrayBuffer(Base.BYTES_PER_ELEMENT*(1.25*size))),this.size=size;const[n,n2,n4,n8]=this.n=[size,size>>1,size>>2,size>>3];const t=sin(PI/n),c0=this[n4]=1,s0=this[0]=0,n2p4=n2+n4;const dc0=2*t**2,ds0=max((2-dc0)*dc0)**0.5,t0=2*dc0;for(let i=1,[dc,ds,t,c,s]=[dc0,ds0,t0,c0,s0];i<n8;i++)this[i]=s+=ds,ds-=t*s,this[n4-i]=c-=dc,dc+=t*c;0!==n8&&(this[n8]=0.5**0.5);for(let j=0;j<n4;j++)this[n2-j]=this[j];for(let k=0;k<n2p4;k++)this[n2+k]=-this[k]}}cisTables.CISTable=CISTable;const tables=new Map;cisTables.get=size=>(!tables.has(size)&&tables.set(size,new CISTable(size)),tables.get(size))})(cisTables||(cisTables={})),exports.cisTables=cisTables,cisTables=Object.assign(cisTables.get,cisTables),window.cisTables=cisTables;var cisExp;(function(cisExp){const{PI,abs,sin,cos}=Math;const period=2*PI,significance=64*PI;const length=2*nerdy_utils_1.ceil(2*(period*significance));cisExp.buffer=new SharedArrayBuffer(4*length);const table=new Float32Array(cisExp.buffer).fill(-Infinity);cisExp.create=x=>[cos(x),sin(x)],cisExp.get=(x,xt=~~((x%period+period)*significance),i=2*xt,ei=table[i],ej=table[i+1])=>(ei!==-Infinity||(table[i]=ei=cos(x=xt/significance),table[i+1]=ej=sin(x)),[ei,ej])})(cisExp=exports.cisExp||(exports.cisExp={})),cisExp=Object.assign(cisExp.get,cisExp),exports.default=cisExp}),___scope___.file("app/modules/process.js",function(exports,require,module,__filename,__dirname){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});class Process{constructor(process={}){this.state="pending",this.aborted=!1,this.log=[],this.log.push(this.state="initializing"),Object.assign(this,process);const constructor=new.target;const instance=this.instance=constructor.instances=(constructor.instances||0)+1;const id=this.id=`${this.id||constructor.id||"Process"}[${instance}]`;this.deferred="deferred"in process?!!process.deferred:!("deferred"in constructor)||constructor.deferred;const execute=this.execute,abort=this.abort=this.abort.bind(this);this.execute=(...args)=>execute.call(this,...args),this.log.push(this.state="ready")}async process(process){return this.output}abort(reason,type){return!1===reason||"executing"!==this.state?!1:((this.aborted=!0)&&(this.state="aborted",this.output&&(this.output.outdated=!0),this.log.push(reason?`aborted: ${reason}`:"aborted"),reason&&console[type]&&setTimeout(()=>console[type](`${this.id||"Process"}#abort: ${reason}`,this),100)),reason)}execute(){const{id,deferred=!0}=this;this.aborted=!1;const defer=callback=>callback(),deferOptions=[];const thisProcess=this;const{next,clean,abort}=this;let result=this.output,reason=!1;const execute=(resolve,reject)=>{const{input,parameters={}}=thisProcess;"ready"!==this.state&&reject(`Cannot execute a process in the "${this.state}" state.`);const{pre,process,post}=this;this.log.push(this.state="executing"),this.aborted=!1,defer(async function execute(){this.aborted||"function"!=typeof pre||(this.log.push("executing pre"),await pre.call(this,this)),this.aborted||"function"!=typeof process||(this.log.push("executing process"),this.output=result=await process.call(this,this)),this.aborted||"function"!=typeof post||(this.log.push("executing post"),await post.call(this,this,result)),this.log.push(this.state="completed"),resolve(this)}.bind(thisProcess),...deferOptions)};const promise=new Promise((resolve,reject)=>execute.call(this,resolve,reject));return(next||clean)&&promise.then(_result=>{next&&next(thisProcess),clean&&clean.call(thisProcess,thisProcess)}),promise.catch(_reason=>{!0!==thisProcess.aborted&&_reason&&(reason=abort.call(thisProcess,_reason)),clean&&clean.call(thisProcess,thisProcess)}),promise}}Process.instances=0,Process.deferred=!0,exports.Process=Process,exports.default=Process}),___scope___.file("app/models/iq-fft.js",function(exports,require,module,__filename,__dirname){"use strict";function __export(m){for(var p in m)exports.hasOwnProperty(p)||(exports[p]=m[p])}Object.defineProperty(exports,"__esModule",{value:!0}),__export(require("./iq-band-pass-filter")),__export(require("./iq-fft-app-state"));var iq_band_pass_filter_1=require("./iq-band-pass-filter");exports.BandPassFilter=iq_band_pass_filter_1.default;var iq_fft_app_state_1=require("./iq-fft-app-state");exports.AppState=iq_fft_app_state_1.default}),___scope___.file("app/models/iq-band-pass-filter.js",function(exports,require,module,__filename,__dirname){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.numerify=(value,fallback=NaN)=>0===value?0:!value||isNaN(value)?value||fallback:value;class BandPassFilter{constructor({low=NaN,high=NaN,band=NaN,size=NaN,min=0,max=Infinity}={}){this.min=0,this.max=Infinity,this.state={low,high,band,size}}setBasis(basis){const{basis:currentBasis}=this.state;basis=this.state.basis=isNaN(basis)||0>basis?NaN:+basis;const change=basis!=currentBasis;if(change&&!isNaN(basis)&&!isNaN(currentBasis)){const{low:currentLow,high:currentHeight,band:currentBand,size:currentSize}=this.state;const low=isNaN(currentLow)?NaN:currentLow/currentBasis*basis;const high=isNaN(currentHeight)?NaN:currentHeight/currentBasis*basis;const band=isNaN(currentBand)?NaN:currentBand/currentBasis*basis;const size=isNaN(currentSize)?NaN:currentSize/currentBasis*basis;this.state.basis=basis,this.state.low=low,this.state.high=high,this.set({low,high,band,size})}return change}set(change){"basis"in change&&this.setBasis(change.basis);const numerify=value=>value||0===value?isNaN(value)?value:+value:NaN;let{low,high,band,size}=Object.assign({},this.state,change);const{min,max}=(({min,max,basis}=this.state)=>({max:(isNaN(max)?0<basis?Math.hypot(basis,basis):Infinity:max)||Infinity,min:(isNaN(min)?0:min)||0}))();if("low"in change||"high"in change)low=numerify(low),high=numerify(high),isNaN(low)&&isNaN(high)||((isNaN(low)||low<=min)&&high>min?(NaN,size=_Mathabs(high-min),band=min+size/2):(isNaN(high)||high>=max)&&low<max?(size=_Mathabs(max-low),band=min+size/2):!isNaN(low)&&!isNaN(high)&&(size=_Mathabs(low-high),band=_Mathmin(low,high)+size/2));else if("band"in change||"size"in change)band=numerify(band),size=numerify(size),isNaN(size)&&(low===min||high===max)&&(size=_Mathabs(high-low)),isNaN(band)||isNaN(size)||(low=band-size/2,high=band+size/2);else return!1;return Object.assign(this.state,{low,high,band,size}),!0}get(key){if(key)return exports.numerify(this.state[key],null);const{lowValue:low,highValue:high,bandValue:band,sizeValue:size}=this;return{low,high,band,size}}getValue(key){const{[key]:value,low,high}=this.state;return _Mathmax(0,"lowValue"===key?low===high?NaN:_Mathmin(low,high):"highValue"===key?low===high?NaN:_Mathmax(low,high):value)}}exports.BandPassFilter=BandPassFilter,Object.defineProperties(BandPassFilter.prototype,["low","high","band","size","basis"].reduce((map,key)=>Object.assign(map,{[key]:{get(){return this.get(key)},set(value){return this.set({[key]:value})}},[`${key}Value`]:{get(){return this.getValue(key)}}}),{})),exports.default=BandPassFilter}),___scope___.file("app/models/iq-fft-app-state.js",function(exports,require,module,__filename,__dirname){"use strict";function __export(m){for(var p in m)exports.hasOwnProperty(p)||(exports[p]=m[p])}function model(model){const descriptors=model.keys.reduce((descriptors,key)=>(descriptors[key]={configurable:!0,get(){return this[`_${key}`]||(!(`_${key}`in this)&&"function"==typeof model[key]&&(this[key]=this[`_${key}`]=model[key](this)),this[`_${key}`])},set(value){this[`_${key}`]=value}},descriptors),{});let mixin;return constructor=>(mixin=constructor,Object.defineProperties(mixin.prototype,descriptors),mixin)}Object.defineProperty(exports,"__esModule",{value:!0});const framework_1=require("~/framework");const iq_fft_1=require("../modules/iq-fft");exports.Complex=iq_fft_1.Complex,exports.GrayData=iq_fft_1.GrayData,exports.FFTData=iq_fft_1.FFTData,exports.FilterData=iq_fft_1.FilterData;const iq_band_pass_filter_1=require("../models/iq-band-pass-filter");const nerdy_utils_1=require("~/modules/nerdy-utils");__export(require("./iq-band-pass-filter"));const{max,min,clz32:lead}=Math;const baseURL=document.baseURI.replace(/\/[^\/]*$/,"");const conresPatchSize=[7.06,"mm"];const checkerboardCycles=8,checkerboardResolution=nerdy_utils_1.hypot(checkerboardCycles)/conresPatchSize[0];const checkerboardPatch=`${baseURL}/samples/checkerboard.png?contrast=100.0&resolution=${checkerboardResolution}`;const conresPatch=`${baseURL}/samples/conres-19tv/vector/ConRes19tv - Vector-08.svg?contrast=100.0&resolution=3.759`;const ernestJung=`${baseURL}/samples/ernst-jung-2048.png`;const defaults={bandFilter:{band:11.3137,size:1},sourceURI:checkerboardPatch,bandPassMode:!0,autoContrast:!0,dynamicFilter:!0,bandScaling:!1,filterScaling:!0,symmetricFilter:!1,useWorker:!0};const view="undefined"!=typeof window&&window||{};const viewWidth=view.innerWidth||1280,viewHeight=view.innerHeight||800;const viewMin=min(viewWidth,viewHeight),viewMax=max(viewWidth,viewHeight);const viewArea=viewWidth*viewHeight;const forceSize=!1;const defaultSize=max(128,min(512,1<<31-lead(viewMin/1.75)));const defaultZoom=(canvasSize=defaultSize,canvasMargin=10)=>{const viewRows=nerdy_utils_1.floor(viewHeight/(canvasSize+(canvasMargin||0)))+0.5;const viewColumns=nerdy_utils_1.floor(viewWidth/(canvasSize+(canvasMargin||0)))+0.5;const viewCells=nerdy_utils_1.floor(viewRows)*nerdy_utils_1.floor(viewColumns)+0.75;return min(512>canvasSize?1.5:3,max(min(viewColumns/2,viewRows/3,viewCells/4),0.1))};class AppState extends Object{}AppState.keys=["sourceURI","sourceFile","sourceImage","grayData","fftData","filterData","filteredData","bandFilter"],AppState.defaultZoom=defaultZoom,AppState.bandFilter=()=>new iq_band_pass_filter_1.default(defaults.bandFilter),AppState.sourceURI=()=>defaults.sourceURI,AppState.bandPassMode=()=>defaults.bandPassMode,AppState.canvasSize=()=>defaults.canvasSize||defaultSize,AppState.canvasZoom=()=>defaults.canvasZoom||defaultZoom(AppState.canvasSize()),AppState.autoContrast=()=>defaults.autoContrast,AppState.bandScaling=()=>defaults.bandScaling,AppState.filterScaling=()=>defaults.filterScaling,AppState.symmetricFilter=()=>defaults.symmetricFilter,AppState.dynamicFilter=()=>defaults.dynamicFilter,AppState.useWorker=()=>defaults.useWorker,exports.AppState=AppState,exports.model=model,exports.StatefulElement=(constructor=framework_1.PolymerElement)=>constructor,exports.default=AppState}),___scope___.file("app/routes/default.jsx",function(exports,require,module,__filename,__dirname){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const nerdy_elements_1=require("~/modules/nerdy-elements");class NerdyAppIndex extends nerdy_elements_1.PolymerElement{constructor(){super(...arguments),this.name="NerdyApp"}}NerdyAppIndex.tagName="nerdy-app-index",NerdyAppIndex.style={},NerdyAppIndex.template=({})=>nerdy_elements_1.default.createElement("template",null,nerdy_elements_1.default.createElement(nerdy_elements_1.StyleElement,null,NerdyAppIndex.style),nerdy_elements_1.default.createElement("h1",null,"Welcome to [[name]]")),exports.NerdyAppIndex=NerdyAppIndex,nerdy_elements_1.default.define(NerdyAppIndex),exports.default=NerdyAppIndex}),___scope___.file("app/routes/error-404.jsx",function(exports,require,module,__filename,__dirname){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const nerdy_elements_1=require("~/modules/nerdy-elements");exports.flexStyle="display: flex; flex: 1; flex-direction: column; justify-content: center; align-items: center;",exports.flexStyled=(element,style=exports.flexStyle)=>(element.setAttribute("style",(element.getAttribute("style")||"")+style),element),exports.Error404View=class Error404View{constructor(){return exports.flexStyled(nerdy_elements_1.default.createElement("div",null,nerdy_elements_1.default.createElement("h1",null,"Error 404"),"The page you are looking for cannot be found!"))}},exports.default=exports.Error404View}),___scope___.file("modules/nerdy-app/server.js",function(exports,require,module,__filename,__dirname){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const nerdy_utils_1=require("~/modules/nerdy-utils");nerdy_utils_1.$entry(__filename||"nerdy-app/server.ts");class NerdyServer{start(){throw console.warn("NerdyServer.start()",`Unimplemented method: ${"string"==typeof __filename?__filename:"nerdy-app/nerdy-server.ts"} `),ReferenceError("Unimplemented!")}}exports.NerdyServer=NerdyServer,exports.default=NerdyServer}),___scope___.file("modules/nerdy-app/template.js",function(exports,require,module,__filename,__dirname){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.template=`
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, minimum-scale=1, initial-scale=1, user-scalable=yes">

  <title>$title</title>

  <!-- Polymer -->
  <script src="bower_components/webcomponentsjs/webcomponents-loader.js"></script>
  <link rel="import" href="bower_components/polymer/polymer-element.html">
  <link rel="import" href="bower_components/app-layout/app-drawer/app-drawer.html">
  <link rel="import" href="bower_components/app-layout/app-drawer-layout/app-drawer-layout.html">
  <link rel="import" href="bower_components/app-layout/app-header/app-header.html">
  <link rel="import" href="bower_components/app-layout/app-header-layout/app-header-layout.html">
  <link rel="import" href="bower_components/app-layout/app-scroll-effects/app-scroll-effects.html">
  <link rel="import" href="bower_components/app-layout/app-toolbar/app-toolbar.html">
  <link rel="import" href="bower_components/app-route/app-location.html">
  <link rel="import" href="bower_components/app-route/app-route.html">
  <link rel="import" href="bower_components/iron-pages/iron-pages.html">
  <link rel="import" href="bower_components/iron-selector/iron-selector.html">
  <link rel="import" href="bower_components/paper-icon-button/paper-icon-button.html">


  <!-- Style -->
  <style>
    html {
      display: flex;
      width: 100%;
      min-height: 100%;
      justify-content: center;
      align-content: center;
    }
    
    body {
      background-color: #fff;
    }
    
    body,
    app {
      display: flex;
      flex: 1;
      flex-direction: column;
      justify-content: center;
      align-items: center;
    }
    /*:unresolved {
            opacity: 0;
            transition: opacity 2s;
        }*/
  </style>
</head>

<body>
  $bundles
</body>

</html>
`,exports.default=exports.template}),___scope___.file("modules/nerdy-elements/components/index.js",function(exports,require,module,__filename,__dirname){"use strict";function __export(m){for(var p in m)exports.hasOwnProperty(p)||(exports[p]=m[p])}Object.defineProperty(exports,"__esModule",{value:!0}),__export(require("./nerdy-element")),__export(require("./style-element")),__export(require("./polymer-element"))}),___scope___.entry="framework/index.js"}),FuseBox.global("__fsbx_decorate",function(localArguments){return function(decorators,target,key,desc){var d,c=arguments.length,r=3>c?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if(decorators){if(decorators&&decorators.push&&decorators.push(__metadata("fusebox:exports",localArguments[0]),__metadata("fusebox:require",localArguments[1]),__metadata("fusebox:module",localArguments[2]),__metadata("fusebox:__filename",localArguments[3]),__metadata("fusebox:__dirname",localArguments[4])),"object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;0<=i;i--)(d=decorators[i])&&(r=(3>c?d(r):3<c?d(target,key,r):d(target,key))||r);return 3<c&&r&&Object.defineProperty(target,key,r),r}}}),FuseBox.global("__metadata",function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)}),FuseBox.import("nerdy-app/app/index.js"),FuseBox.main("nerdy-app/app/index.js"),FuseBox.defaultPackageName="nerdy-app"})(FuseBox);
//# sourceMappingURL=framework.js.map